{"version":3,"sources":["App.module.css","components/ProvenanceTable.module.css","components/ProvenanceIsolatedNodes.module.css","components/TableDataLoader.module.css","SidePane.module.css","static/taskImages sync /^/.//.*/.png$","static/taskImages/1_manual.png","static/taskImages/1_supported.png","static/taskImages/23_manual.png","static/taskImages/2_supported.png","static/taskImages/41_manual.png","static/taskImages/44_manual.png","static/taskImages/47_manual.png","static/taskImages/4_manual.png","static/taskImages/54_manual.png","static/taskImages/5_supported.png","static/taskImages/60_manual.png","static/taskImages/63_manual.png","static/taskImages/66_manual.png","static/taskImages/8_manual.png","static/taskImages/8_supported.png","static/taskImages/S-task01_adjMatrix.png","static/taskImages/S-task01_nodeLink.png","static/taskImages/S-task02_adjMatrix.png","static/taskImages/S-task02_nodeLink.png","static/taskImages/S-task03_adjMatrix.png","static/taskImages/S-task03_nodeLink.png","static/taskImages/S-task04_adjMatrix.png","static/taskImages/S-task04_nodeLink.png","static/taskImages/S-task05_adjMatrix.png","static/taskImages/S-task05_nodeLink.png","static/taskImages/S-task06_adjMatrix.png","static/taskImages/S-task06_nodeLink.png","static/taskImages/S-task07_adjMatrix.png","static/taskImages/S-task07_nodeLink.png","static/taskImages/S-task08_adjMatrix.png","static/taskImages/S-task08_nodeLink.png","static/taskImages/S-task09_adjMatrix.png","static/taskImages/S-task09_nodeLink.png","static/taskImages/S-task10_adjMatrix.png","static/taskImages/S-task10_nodeLink.png","static/taskImages/S-task11_adjMatrix.png","static/taskImages/S-task11_nodeLink.png","static/taskImages/S-task12_adjMatrix.png","static/taskImages/S-task12_nodeLink.png","static/taskImages/S-task13_adjMatrix.png","static/taskImages/S-task13_nodeLink.png","static/taskImages/S-task14_adjMatrix.png","static/taskImages/S-task14_nodeLink.png","static/taskImages/S-task15_adjMatrix.png","static/taskImages/S-task15_nodeLink.png","static/taskImages/S-task16_adjMatrix.png","static/taskImages/S-task16_nodeLink.png","static/taskImages/Screen Shot 2020-09-07 at 3.25.40 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.25.55 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.28.22 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.28.59 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.29.22 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.29.36 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.31.26 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.32.07 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.32.24 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.32.44 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.33.05 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.33.39 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.33.53 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.34.49 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.35.08 PM.png","static/taskImages/Screen Shot 2020-09-07 at 3.35.48 PM.png","static/taskImages/linear regression_supported.png","static/taskImages/outlier.png","static/taskImages/outlier_supported.png","static/taskImages/placeholder.png","static/taskImages/quadratic regression_supported.png","static/taskImages/quadratic_regression_supported.png","static/taskImages/skyline_supported.png","fetchers/fetchMocks.js","hooks/hooks.js","components/eventMapping.js","components/ProvenanceDataContext.tsx","components/ProvenanceIsolatedNodes.tsx","pages/Home.tsx","pages/Study.tsx","pages/Upload.tsx","components/ActionLegend.tsx","components/EventManager.tsx","pages/Overview.tsx","pages/Export.tsx","components/TableFilters.tsx","components/reactTagWrapper.tsx","components/EventSearch.tsx","components/Tagger.tsx","components/ColumnDefinitions.tsx","components/DevExtremeTable.tsx","components/ProvenanceController.tsx","components/TableDataLoader.tsx","pages/Table.tsx","Main.tsx","components/CheckBox.tsx","components/sortMenu.tsx","SidePane.tsx","App.tsx","serviceWorker.ts","index.tsx","components/EventSearch.module.css"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","host","fetchProvenanceDataByNodeId","nodeId","a","postData","res","patternCache","getTopPatternsForGroup","groups","cached","readFromCache","console","log","participants","storeInCache","group","idsShortened","participantID","substring","parseActionConfiguration","config","elements","replace","JSON","parse","err","color","name","label","_id","icon","hidden","type","storeActionConfiguration","configList","stringify","updateActionConfigurations","getActionConfigurations","getData","data","getTaskOverviewFromServer","taskID","undefined","getSchema","tableID","getTaskDataFromServer","getTimelineFromServer","getTaskListFromServer","uri","postBody","fetchOptions","defaultHeaders","url","method","headers","body","completePromise","val","Accept","requestOptions","fetch","response","json","success","ok","useFetchAPIData","fetchingFunc","dependencies","useState","isLoading","setIsLoading","errorMessage","setErrorMessage","fetchedData","setFetchedData","onError","error","useEffect","then","result","message","catch","iconMapping","Add","PanTool","Sort","FiberManualRecordIcon","RadioButtonUncheckedIcon","Search","Clear","Start","PlayArrowIcon","StopIcon","CheckBoxOutlineBlankIcon","RemoveCircle","TabUnselected","Crop75","AspectRatio","VisibilityOff","SelectAll","GetApp","Brush","DragHandleIcon","colors","answerSelectColor","selectColor","clearColor","eventMappingList","ProvenanceDataContext","React","createContext","compileActionListToHashTable","list","newActionObject","forEach","item","newObject","assign","ProvenanceDataContextProvider","children","selectedTaskId","setSelectedTaskId","queryCount","setQueryCount","value","actionConfigurationsFromServer","actionConfigurationsFiltered","filter","setActionConfigurationsListInternal","actionConfigurationsList","actionConfigurations","setActionConfigurations","conditions","metrics","overviewData","setOverviewData","fetchedInitialTask","setFetchedInitialTask","taskList","setTaskList","homeTaskSort","setHomeTaskSort","loadingTaskList","taskListFromServer","dataFromServer","newTaskData","setTaskSort","Provider","handleChangeSelectedTaskId","event","target","setActionConfigurationsList","newActionConfigurationsList","saveActionConfigurationToDB","oldActions","newActions","length","i","difference","k","innerIndex","isStructuralActionChange","setCurrentTaskData","IsolatedNode","node","configToUse","useContext","eventMapping","eventMap","ProvenanceIcon","transform","Tooltip","TransitionComponent","Fade","TransitionProps","timeout","title","count","PopperProps","popperOptions","modifiers","offset","enabled","arrow","width","height","x","y","rx","fill","opacity","scale","ProvenanceIsolatedNodes","nodes","selectedItemId","hoveredItemId","handleHover","handleProvenanceNodeClick","className","styles","wrapper","style","display","flexDirection","index","determineItemOpacity","key","onMouseEnter","onMouseLeave","onClick","theme","createMuiTheme","overrides","MuiTableCell","root","padding","useStyles","makeStyles","minWidth","flexGrow","table","sortable","cursor","backgroundColor","sorted","media","condition","fontSize","bullet","margin","pos","marginBottom","maxValue","d3","range","domain","Stimulus","img","conditionName","classes","imgName","require","Box","mt","mb","mr","boxShadow","CardMedia","component","image","Typography","variant","SequenceCount","row","hoveredRow","hoveredRowColor","clickedRow","clickedRowColor","numIconsPerCol","Math","floor","numCols","ceil","xScale","iconWidth","yScale","currentParticipants","matchingSequences","s","hoveredParticipants","intersection","includes","textWidth","Array","from","fontWeight","alignmentBaseline","textAnchor","SortIconContainer","paddingTop","TableComponent","rows","setHoveredRow","setClickedRow","desc","Count","Pattern","sort","setSort","b","aValue","seq","bValue","rValue","TableContainer","maxHeight","stickyHeader","aria-label","TableHead","TableRow","header","TableCell","sameKey","TableBody","onMouseDown","background","scope","seqObj","answer","align","Histogram","metric","find","m","hoveredStats","stats","intersectionRow","intersections","r","hoveredCI","ci","histColor","Grid","DrawHistogram","props","size","hovered","setHovered","average","lowerBound","upperBound","xDomain","bins","yDomain","hist","barWidth","textLabel","round","x1","y1","x2","y2","stroke","strokeWidth","d","barPadding","cx","cy","ConditionCard","freqPattern","metricValues","setHidden","patterns","topK","Set","action","Fragment","container","spacing","xs","justify","overflow","rowHeight","p","Divider","TaskCard","task","Card","CardContent","marginLeft","prompt","cKey","CardActions","Button","TaskContainer","getValues","conditionFilter","sortKey","values","c","push","tasks","aValues","bValues","max","min","taskA","t","taskB","indexOf","Skeleton","categories","TimeLineView","loadingTimeLineData","errorLoadingTimeLineData","timelineData","Alert","severity","AlertTitle","StudyCard","hoveredElement","uniqueID","study","eventID","random","conditionGroups","allLevels","level","flat","category","minutesToComplete","reduce","rv","cond","slice","participant","borderBottom","borderColor","averageAccuracy","eventData","metricSquare","barHeight","labelHeight","labelWidth","axisHeight","colorScale","maxTime","elapsedTime","duration","phases","filteredData","labelPos","labelStart","labelExtent","n","shortName","metricColorScales","metricYScales","taskTimeScales","colorRange","heightRange","timeScaleRange","getStats","taskInfo","dd","out","trim","rectWidth","onMouseOver","onMouseOut","timeScale","avg","slower","minTime","diff","abs","lineHeight","glyphSize","vertScale","Upload","taskTooltip","filteredMetrics","nodeWidth","actions","frequentActions","evenlabelPos","eveny","labels","textHeight","renderPattern","Item","styled","div","isDragging","ActionLegendDragContainer","collapsed","handleActionItemEdit","isActionLegendEditing","hashMapConfig","listRef","useRef","handleActionConfigurationChange","findIndex","copy","listEvents","onDragEnd","copyListItem","copyListEvents","source","destination","droppableId","reorder","allItemConfig","usedGroupedElements","duplicatedFlag","entries","element","checkIfGroupDuplicates","copiedSource","copiedDestination","movedChanges","move","current","handleAddConfigurationToList","reference","open","ActionLegend","actionItemBeingEdited","setActionItemBeingEdited","setIsActionLegendEditing","setVolatileActionConfigurationList","volatileActionConfigurationList","useMemo","Modal","onClose","alignItems","justifyContent","aria-labelledby","aria-describedby","actionConfiguration","handleActionConfigurationCancel","newConfiguration","configurationIndex","configCopy","EditActionForm","volatileConfiguration","setVolatileConfiguration","handleConfigurationPropertyChange","newValue","clonedConfiguration","order","TextField","onChange","disabled","for","defaultValue","Switch","checked","inputProps","uuid","toString","startIndex","endIndex","splice","removed","droppableSource","droppableDestination","sourceClone","destClone","dragId","Pop","Popper","anchorEl","placement","border","handleEditActionConfiguration","ActionLegendPresentational","renderedItems","ref","isDropDisabled","provided","snapshot","innerRef","isDraggingOver","isDragDisabled","draggableId","draggableProps","dragHandleProps","placeholder","ActionItemNode","ListItem","ListItemText","maxWidth","textOverflow","EventManager","nonHiddenConfigs","handleAddGroup","initialItems","Content","List","Container","Notice","button","ButtonText","GroupedList","newListName","newListEvents","viewBox","actionItem","copyItem","Input","Overview","location","enterButton","PlusSquareOutlined","Export","buckets","currentBins","thresholds","bucket","currentBinCounter","bars","x0","toFixed","brushRef","dayBrush","brushX","extent","on","selection","warn","select","selectAll","enter","append","attr","call","BrushableHistogram","setMinimum","setMaximum","inputs","invert","QuantitativeFilter","onFilter","minimum","maximum","debouncedMin","useDebounce","debouncedMax","filterMin","filterMax","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","TagWrapper","tags","onTagChange","isMaster","autofocus","allowNew","handleDelete","tag","handleAddition","uuidv4","actionName","ActionList","renderClone","items","rubric","shouldRenderClone","draggingFromThisWith","Shop","setAnchorEl","Boolean","IconButton","currentTarget","Popover","anchorOrigin","vertical","horizontal","transformOrigin","searchOptions","ShoppingBag","direction","searchBar","dragID","Discard","EventSearch","shoppingBagItems","setShoppingBagItems","useCallback","state","searchContainer","outerSearchBar","outerSearchOptions","outerSearchDiscard","initialState","mouseX","mouseY","Tagger","text","tagDivId","rowData","setState","setTags","remove","setRemove","handleClose","window","getSelection","currentTags","document","getElementById","querySelectorAll","focus","taggedText","onMouseUp","preventDefault","clientX","clientY","split","Menu","keepMounted","anchorReference","anchorPosition","top","left","MenuItem","newTags","QuantitativeCell","additionalComponents","commonScale","sequence","time","NotesColumn","metaData","this","handleTagCreation","selectionIndicies","cellStyle","customSort","filterComponent","render","isArray","generateRowId","iterTag","LongTextColumn","hideByDefault","CategoricalColumn","QuantitativeColumn","handleFilterChange","customFilterAndSearch","filterQuantitativeValues","cellComponent","datum","niceX","nice","binner","groupedSummaryComponent","incomingData","pointerEvents","partitionedData","newWidth","Component","EventsSummary","ProvenanceColumn","filterValue","rowValue","master","sub","every","v","hasSubArrayNonStrict","renderData","GroupedEventSummary","pure","filteredList","errorLoading","patternDataFromServer","float","marginTop","topSequence","borderRadius","GroupDataResolver","setPartitionedData","_","isFunction","toFixedTrunc","f","substr","GroupCellContent","provenanceData","column","groupData","columnSummaries","GroupCell","FilterCells","other","restProps","itemProps","Cell","ProvenanceCells","onSave","workbook","xlsx","writeBuffer","buffer","saveAs","Blob","generateColumnDefinition","columnSchema","columnsMetaData","defaultColumnDefinition","columnMetaData","columnKey","getColumnMetaData","COLUMN_NAME","DATA_TYPE","DevExtremeTable","tableSchema","exporterRef","filters","setFilters","handleFilter","columnName","currentFilterIndex","clonedFilters","accuracy","notes","setColumns","generateColumnObject","columns","setSelectionInternal","setRows","startExport","options","exportGrid","grouping","setGroupingInternal","groupingPredicate","isRowInTrueGroup","integratedGroupingColumnExtensions","groupingValue","groupMetaData","criteria","showWhenGrouped","tableGroupColumnExtension","defaultColumnWidths","predicate","IntegratedFiltering","defaultPredicate","filteringColumnExtensions","showInGroupFooter","alignByColumn","groupSummaryItems","defaultHiddenColumnNames","Paper","onGroupingChange","newGrouping","secondArray","newlyAddedGroups","firstArrayItem","some","secondArrayItem","currentFilter","filterItem","newGroupIndex","newGroup","columnGroupingEnabled","columnExtensions","groupItems","calculator","getValue","onFiltersChange","onSelectionChange","showGroupingControls","showSelectAll","rowComponent","groupedRowHeader","groupedBy","columnInfo","groupIndex","repeat","join","groupHeaderRow","colSpan","groupHeaderContent","Row","summaryCellComponent","contentComponent","showColumnsWhenGrouped","stubCellComponent","stubProps","shouldHideStub","groupedByRow","tableRow","freeze","adjMatrix","nodeLink","ProvenanceController","selectedNode","playInterval","setPlayInterval","setHoveredItemId","setSelectedItemIdInternal","currentIndex","currentNode","querySelector","contentWindow","postMessage","nodeID","setSelectedItemId","handleForward","previousId","src","gridTemplateRows","gridTemplateColumns","gridRow","clearInterval","setInterval","TimeLine","ms","Promise","TableDataLoader","setHeight","currentlyVisitedNodes","setCurrentlyVisitedNodes","fetched","processedNodes","actionID","participantId","uniqueId","isTaskDataLoading","isTaskDataError","currentTaskData","setTableSchema","isPerformanceSchemaLoading","isPerformanceSchemaError","schemaFromServer","hiddenColumns","hideAggregate","concat","ORDINAL_POSITION","bounds","onResize","contentRect","measureRef","LoaderStyles","loader","animation","Table","Wrapper","withRouter","TransitionGroup","CSSTransition","classNames","path","Home","Study","CheckBox","visible","checkBoxCallback","setChecked","Checkbox","evt","stopPropagation","MenuWrapper","option","handleMenuItemClickCallback","setHoveredRowCallback","selectedIndex","filterConditions","setConditions","currentState","checkboxes","selected","SortMenu","setSelectedIndex","handleMenuItemClick","sortObj","aria-haspopup","aria-controls","primary","secondary","createStyles","typography","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","leavingScreen","appBarShift","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","mixins","content","SidePane","selectedPrompt","useTheme","setOpen","HomeLink","forwardRef","to","StudyLink","useLocation","CssBaseline","AppBar","position","clsx","Toolbar","edge","pathname","FormControl","SelectedTaskInput","Select","labelId","ml","noWrap","Drawer","paper","link","HomeIcon","ComputerIcon","TableChart","ListItemIcon","isCurrent","Icon","makeIcon","App","initialEntries","initialIndex","sidePane","main","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qHACAA,EAAOC,QAAU,CAAC,UAAY,uBAAuB,OAAS,oBAAoB,KAAO,kBAAkB,SAAW,sBAAsB,KAAO,oB,oBCAnJD,EAAOC,QAAU,CAAC,KAAO,8BAA8B,eAAiB,wCAAwC,mBAAqB,4CAA4C,OAAS,kC,oBCA1LD,EAAOC,QAAU,CAAC,QAAU,2C,oBCA5BD,EAAOC,QAAU,CAAC,OAAS,kC,oBCA3BD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,kBAAoB,sC,4HCDpE,IAAIC,EAAM,CACT,iBAAkB,IAClB,oBAAqB,IACrB,kBAAmB,IACnB,oBAAqB,IACrB,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,iBAAkB,IAClB,kBAAmB,IACnB,oBAAqB,IACrB,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,iBAAkB,IAClB,oBAAqB,IACrB,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,2BAA4B,IAC5B,0BAA2B,IAC3B,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,6CAA8C,IAC9C,oCAAqC,IACrC,gBAAiB,IACjB,0BAA2B,IAC3B,oBAAqB,IACrB,uCAAwC,IACxC,uCAAwC,IACxC,0BAA2B,KAI5B,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBN,EAAOC,QAAUE,EACjBA,EAAeE,GAAK,K,oBC3FpBL,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,kE,oBCA3CD,EAAOC,QAAU,IAA0B,yD,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,4D,oBCA3CD,EAAOC,QAAU,IAA0B,4D,oBCA3CD,EAAOC,QAAU,IAA0B,+C,8ZCEvCc,G,cAAe,yBAEZ,SAAeC,EAAtB,kC,4CAAO,WAA2CC,GAA3C,eAAAC,EAAA,sEACWC,GAASJ,EAAO,YAAcE,GADzC,cACDG,EADC,yBAEEA,GAFF,4C,sBAIP,IAAIC,EAAe,GACZ,SAAeC,EAAtB,kC,4CAAO,WAAsCC,GAAtC,iBAAAL,EAAA,2DACDM,EAASC,EAAcF,IADtB,uBAGHG,QAAQC,IAAI,6BAHT,kBAIIH,GAJJ,uBAMWL,GAAS,GAAD,OAAIJ,EAAJ,kBAA0B,CAChDQ,OAAQ,CAAC,CAAElB,GAAI,SAAUuB,aAAcL,MAPpC,cAMDH,EANC,OASLS,EAAaN,EAAQH,GAThB,kBAWEA,GAXF,4C,sBAaP,SAASK,EAAcK,GACrB,IAAIC,EAAeD,EAAM5B,KAAI,SAAC4B,GAAD,OAAWA,EAAME,cAAcC,UAAU,EAAG,MACzE,OAAOZ,EAAaU,GAEtB,SAASF,EAAaC,EAAOV,GAC3B,IAAIW,EAAeD,EAAM5B,KAAI,SAAC4B,GAAD,OAAWA,EAAME,cAAcC,UAAU,EAAG,MACzEZ,EAAaU,GAAgBX,EAQ/B,SAASc,EAAyBC,GAChC,GAAIA,EAAOC,SAAU,CACnBV,QAAQC,IAAIQ,EAAOC,UACnBD,EAAOC,SAAWD,EAAOC,SAASC,QAAQ,SAAU,WACpDF,EAAOC,SAAWD,EAAOC,SAASC,QAAQ,QAAS,UACnDF,EAAOC,SAAWD,EAAOC,SAASC,QAAQ,iBAAkB,KAI5DX,QAAQC,IAAI,gBAAiBQ,EAAOC,gBAAiBD,EAAOC,UAC5D,IACED,EAAOC,SAAWE,KAAKC,MAAMJ,EAAOC,UACpC,MAAOI,GACPd,QAAQC,IAAI,QAASa,GAEvBd,QAAQC,IAAI,aAAcQ,EAAOC,UAMnC,OAHAD,EAAOM,MAAQN,EAAOM,MAAMJ,QAAQ,KAAM,IAC1CX,QAAQC,IAAI,aAAcQ,EAAOM,OAE1B,CACLA,MAAON,EAAOM,MACdC,KAAMP,EAAOQ,MACbtC,GAAI8B,EAAOS,IACXR,SAAUD,EAAOC,SACjBS,KAAMV,EAAOU,KACbC,OAAQX,EAAOW,OACfC,KAAMZ,EAAOY,MAGjB,SAASC,EAAyBC,GAChC,OAAOA,EAAW/C,KAAI,SAACiC,GACrB,MAAO,CACLS,IAAKT,EAAO9B,GACZsC,MAAOR,EAAOO,KACdN,SAAUD,EAAOC,SAAWE,KAAKY,UAAUf,EAAOC,UAAY,KAC9DS,KAAMV,EAAOU,KACbE,KAAMZ,EAAOY,KACbN,MAAON,EAAOM,MACdK,OAAQX,EAAOW,W,4CAId,WAA2CK,GAA3C,eAAAjC,EAAA,sEACWC,GACdJ,EAAO,wBACPiC,EAAyBG,IAHtB,cACD/B,EADC,OAKLM,QAAQC,IAAI,gBAAiBP,GALxB,kBAOEA,GAPF,4C,sBASA,SAAegC,KAAtB,gC,8CAAO,4BAAAlC,EAAA,sEAEWmC,GAAQtC,EAAO,yBAF1B,cAEDK,EAFC,OAGLM,QAAQC,IAAI,0BAA2BP,GACvCA,EAAIkC,KAAOlC,EAAIkC,KAAKpD,IAAIgC,GACxBR,QAAQC,IAAI,qBAAsBP,GAL7B,kBAOEA,GAPF,4C,sBASA,SAAemC,KAAtB,gC,8CAAO,0CAAArC,EAAA,yDAAyCsC,EAAzC,oCAAkDC,EAAlD,UAOOD,EAPP,gCAQOrC,GAASJ,EAAI,oBAAgByC,IARpC,2DASOrC,GAASJ,EAAI,sBATpB,mCAOCK,EAPD,uBAYIA,GAZJ,kCAcHM,QAAQC,IAAI,eAAZ,MAdG,2D,sBAiBA,SAAe+B,GAAtB,mC,8CAAO,WAAyBC,GAAzB,eAAAzC,EAAA,sEACWmC,GAAQ,GAAD,OAAItC,EAAJ,kBAAkB4C,EAAlB,YADlB,cACDvC,EADC,yBAEEA,GAFF,4C,sBAIA,SAAewC,GAAtB,mC,8CAAO,WAAqCJ,GAArC,eAAAtC,EAAA,sEACWmC,GAAQ,GAAD,OAAItC,EAAJ,sBAAsByC,IADxC,cACDpC,EADC,yBAEEA,GAFF,4C,sBAKA,SAAeyC,KAAtB,gC,8CAAO,4BAAA3C,EAAA,sEAEWmC,GAAQ,GAAD,OAAItC,EAAJ,cAFlB,cAEDK,EAFC,yBAIEA,GAJF,4C,sBAQA,SAAe0C,KAAtB,gC,8CAAO,4BAAA5C,EAAA,sEACWmC,GAAQ,GAAD,OAAItC,EAAJ,cADlB,cACDK,EADC,yBAEEA,GAFF,4C,sBAUA,SAAeD,GAAtB,uC,8CAAO,WAAwB4C,EAAKC,EAAUC,GAAvC,iBAAA/C,EAAA,6DAEDgD,EAAiB,CACnBC,IAAKJ,EAELK,OAAQ,OACRC,QAAS,CACP,eAAgB,mCAElBC,KAAMhC,KAAKY,UAAUc,IATlB,SAYaO,GAAgBR,EAAKG,GAZlC,cAYCM,EAZD,yBAcEA,GAdF,4C,sBAiBA,SAAenB,GAAtB,qC,8CAAO,WAAuBU,EAAKE,GAA5B,eAAA/C,EAAA,6DACDgD,EAAiB,CACnBG,QAAS,CACPI,OAAQ,qBAHP,SAMQF,GAAgBR,EAAKG,GAN7B,oF,sBASA,SAAeK,GAAtB,qC,8CAAO,WAA+BR,EAAKW,GAApC,eAAAxD,EAAA,+EAGcyD,MAAMZ,EAAKW,GAHzB,cAGHE,EAHG,gBAOmBA,EAASC,OAP5B,OAOHD,EAAStB,KAPN,OAQHsB,EAASE,QAAUF,EAASG,GARzB,wDAYHrD,QAAQC,IAAI,QAAZ,MAZG,sCAeEiD,GAfF,2D,sBCnKA,SAASI,GAAgBC,EAAcC,GAAe,IAAD,EACtBC,mBAAS,MADa,mBACjDC,EADiD,KACtCC,EADsC,OAEhBF,mBAAS,MAFO,mBAEjDG,EAFiD,KAEnCC,EAFmC,OAGlBJ,mBAAS,MAHS,mBAGjDK,EAHiD,KAGpCC,EAHoC,KAUlDC,EAAU,SAACC,GACbN,GAAa,GACbE,EAAgBI,IA6BpB,OArBAC,qBAAU,WAdNP,GAAa,GACbE,EAAgB,IAehBN,IACKY,MACG,SAACC,GACG,IAVOxC,EAUSwC,GAAUA,EAAOhB,SAClBgB,EAAOxC,MAXfA,EAaWwC,EAAOxC,KAZrCmC,EAAenC,GACf+B,GAAa,IAaGK,EAAQ,+CAGhB,SAACC,GACGD,EAAQ,mCAAD,cAAoCC,QAApC,IAAoCA,OAApC,EAAoCA,EAAOI,aAGzDC,OAAM,SAACL,GACJD,EAAQ,oCAAD,cAAqCC,QAArC,IAAqCA,OAArC,EAAqCA,EAAOI,eAlBtD,YAoBFb,IACA,CAACE,EAAWE,EAAcE,G,mZCxBxBS,GAAc,CACzBC,SACAC,aACAC,SACAC,2BACAC,8BACAC,YACAC,WACAC,WACAC,mBACAC,cACAC,8BACAC,kBACAC,mBACAC,YACAC,iBACAC,mBACAC,eACAC,YACAC,WACAC,qBAEIC,GAAS,CACb,UACA,UACA,UACA,UACA,UACA,WAGIC,GAAoBD,GAAO,GAG3BE,GAAcF,GAAO,GAErBG,GAAaH,GAAO,GAEbI,GAAmB,CAC9B,CACE7E,KAAM,gBACNJ,MAAO,UACPpC,GAAI,oBACJqC,KAAM,aACNK,KAAM,MACND,QAAQ,GAGV,CACED,KAAM,WACNJ,MAAO,UACPpC,GAAI,gBACJqC,KAAM,gBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,MACNJ,MAAO8E,GACPlH,GAAI,gBACJqC,KAAM,gBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,UACNJ,MAlCc6E,GAAO,GAmCrB5E,KAAM,eACNrC,GAAI,eACJ0C,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,OACNJ,MAzCc6E,GAAO,GA0CrBjH,GAAI,OACJqC,KAAM,OACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,wBACNJ,MAAO+E,GACPnH,GAAI,UACJqC,KAAM,yBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,2BACNJ,MAAO8E,GACPlH,GAAI,kBACJqC,KAAM,mBAER,CACEG,KAAM,wBACNJ,MAAO+E,GACPnH,GAAI,cACJqC,KAAM,gBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,wBACNJ,MAAO+E,GACPnH,GAAI,WACJqC,KAAM,yBAER,CACEG,KAAM,wBACNJ,MAAO+E,GACPnH,GAAI,WACJqC,KAAM,qBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,SACNJ,MAnFgB6E,GAAO,GAoFvBjH,GAAI,SACJqC,KAAM,SACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,wBACNJ,MAAO+E,GACPnH,GAAI,OACJqC,KAAM,cACNK,KAAM,MACND,QAAQ,GAGV,CACED,KAAM,2BACNJ,MAAO+E,GACPnH,GAAI,gBACJqC,KAAM,gBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,QACNJ,MAAOgF,GACPpH,GAAI,QACJqC,KAAM,mBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,QACNJ,MAAOgF,GACPpH,GAAI,aACJqC,KAAM,gBACNK,KAAM,QACND,QAAQ,EACRV,SAAU,CACR,CACES,KAAM,QACNJ,MAAOgF,GACPpH,GAAI,QACJqC,KAAM,mBACNK,KAAM,MACND,QAAQ,GAEV,CACED,KAAM,2BACNJ,MAAO+E,GACPnH,GAAI,gBACJqC,KAAM,gBACNK,KAAM,MACND,QAAQ,MCrJhB,IAAM6E,GAAwBC,IAAMC,cAAc,IAClD,SAASC,GAA6BC,GACpC,IAAIC,EAAkB,GAMtB,OALAD,EAAKE,SAAQ,SAACC,GACZ,IAAIC,EAAY,GAChBA,EAAUD,EAAK7H,IAAM6H,EACrBrH,OAAOuH,OAAOJ,EAAiBG,MAE1BH,EAEF,IAAMK,GAAgC,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EAEjBV,IAAMzC,SAAS,MAFE,mBAEtDoD,EAFsD,KAEtCC,EAFsC,OAKzBrD,mBAAS,GALgB,mBAKtDsD,EALsD,KAK1CC,EAL0C,OAWzD1D,GAAe,sBAAC,4BAAA9D,EAAA,sEACEkC,KADF,cACZuF,EADY,OAElBjH,QAAQC,IAAI,6BAA8BgH,GAFxB,kBAGXA,GAHW,2CAIjB,CAACF,IAfyD,mBAU3DG,GAV2D,gBAiB7DhD,qBAAU,WAER,GAAIgD,EAAgC,CAClC,IAAMC,EAA+BD,EAA+BE,QAClE,SAAC3G,GAAD,MAA4B,UAAhBA,EAAOY,QAErBrB,QAAQC,IAAI,2BAA4BkH,GACxCE,EAAoCF,MAErC,CAACD,IA1ByD,MA0FzDzD,mBAAS,IA1FgD,mBAwF3D6D,EAxF2D,KAyF3DD,EAzF2D,OA4FL5D,mBACtD2C,GAA6BJ,KA7F8B,mBA4FtDuB,EA5FsD,KA4FhCC,EA5FgC,KA+F7DtD,qBAAU,WACRsD,EACEpB,GAA6BkB,MAE9B,CAACA,IAnGyD,IA4GzDG,EACAC,EA7GyD,EAqGrBjE,qBArGqB,mBAqGtDkE,EArGsD,KAqGxCC,EArGwC,OAsGTnE,oBAAS,GAtGA,mBAsGtDoE,EAtGsD,KAsGlCC,EAtGkC,OAuG7BrE,qBAvG6B,mBAuGtDsE,EAvGsD,KAuG5CC,EAvG4C,KA+GzDL,IACFF,EAAaE,EAAaF,WAC1BC,EAAUC,EAAaD,SAjHoC,MAoHvBjE,qBApHuB,mBAoHxDwE,EApHwD,KAoH1CC,EApH0C,OAyHf5E,GAAe,sBAAC,sBAAA9D,EAAA,6DAC5DQ,QAAQC,IAAI,oCADgD,SAE/CmC,KAF+C,mFAG3D,IA5H0D,mBAyHtD+F,EAzHsD,KAyHrCC,EAzHqC,KA8H7DlE,qBAAU,WACJkE,GACFtB,EAAkBsB,EAAmB,IAAItG,UAE1C,CAACsG,IAlIyD,MAqIlB9E,GAAe,sBAAC,sBAAA9D,EAAA,6DACzDQ,QAAQC,IAAI,gCAAiC8H,EAAS,IADG,SAE5ClG,GAA0BkG,EAAS,GAAGjG,QAFM,mFAGxD,CAACiG,EAAUhB,IAxI+C,mBAqIpCsB,GArIoC,gBAiJ7DnE,qBAAU,WACJmE,IACFT,EAAgBS,GAChBP,GAAuBD,MAExB,CAACQ,IAiBJ/E,GAAe,sBAAC,sBAAA9D,EAAA,sDACV6I,IACFrI,QAAQC,IAAI,wBACZ4B,KAA4BsC,MAAK,SAACmE,GAChCtI,QAAQC,IAAI,cAAeqI,EAAY1G,MACvCgG,EAAgBU,EAAY1G,UALlB,2CAQb,CAACyG,IAEJnE,qBAAU,WACRlE,QAAQC,IAAI,uBAAwBmI,GACpCJ,EAAYI,KACX,CAACA,IApLyD,MAyL/B3E,mBAAS,QAzLsB,mBAyL9C8E,IAzL8C,WAoM7D,OACE,kBAACtC,GAAsBuC,SAAvB,CACEvB,MAAO,CACLwB,2BAPN,SAAoCC,GAClC5B,EAAkB,CAAC4B,EAAMC,OAAO1B,SAO5BJ,iBACAc,eACAQ,kBACAJ,WACAL,UACAX,aACAwB,eACAN,eACAC,kBACAT,aACAF,uBACAqB,4BAtJN,SAAqCC,IHnChC,SAAP,mCGyCIC,CAA4BD,GAA6B1E,MACvD,SAACjB,IAjCL,SAAkC6F,EAAYC,GAE5C,GAAID,EAAWE,SAAWD,EAAWC,OACnC,OAAO,EAIT,IAPwD,eAO/CC,GAKP,IAJA,IAAIC,EAAahK,OAAOD,KAAK6J,EAAWG,IAAI9B,QAC1C,SAACgC,GAAD,OACExI,KAAKY,UAAUuH,EAAWG,GAAGE,MAAQxI,KAAKY,UAAUwH,EAAWE,GAAGE,OAE7DC,EAAa,EAAGA,EAAaF,EAAWF,OAAQI,IACvD,GAC6B,aAA3BF,EAAWE,IACgB,WAA3BF,EAAWE,IACgB,OAA3BF,EAAWE,GAEX,MAAM,CAAN,GAAO,IAXJH,EAAI,EAAGA,EAAIH,EAAWE,OAAQC,IAAK,CAAC,IAAD,IAAnCA,GAAmC,kCAgB5C,OAAO,EAaDI,CACEhC,EACAuB,GASFxB,EAAoCwB,IALpC7B,EAAcD,EAAa,GAC3Ba,IACA2B,0BAqIFjC,6BAEDV,IA6GQX,U,+BCjUFuD,GAAe,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,YAC7BnC,EAAyBoC,qBAAW1D,IAApCsB,qBAGFmC,IACFnC,EAAuBmC,GAGzB,IAAME,EAAerC,EACjBsC,EAAWD,EAAaH,EAAKzI,MAC7B4I,EAAaH,EAAKzI,MAClB,CAAEG,KAAM,OAAQJ,MAAO,QAEvB+I,EAAiBvF,GAAYsF,EAAS1I,MAO1C,OANK2I,IACHA,EAAiB,kBAAM,0BAAMC,UAAW,mBAAoB,QAM5D,kBAACC,EAAA,EAAD,CACEC,oBAAqBC,KACrBC,gBAAiB,CAAEC,QAAS,KAC5BC,MAAK,UAAKZ,EAAKzI,KAAV,YAAkByI,EAAKa,MAAL,WAAiBb,EAAKa,MAAtB,KAAiC,IACxDC,YAAa,CACXC,cAAe,CACbC,UAAW,CACTC,OAAQ,CACNC,SAAS,EACTD,OAAQ,gBAKhBE,OAAK,GACL,yBAAKC,MAAO,GAAIC,OAAQ,IACtB,0BACEC,EAAG,EACHC,EAAG,EACHH,MAAO,GACPC,OAAQ,GACRG,GAAI,EACJC,KAAMrB,EAAS9I,MACfoK,QAAS1B,EAAK2B,OAAS,IACzB,uBAAGrB,UAAS,kBACT,kBAACD,EAAD,CAAgBe,MAAO,GAAIC,OAAQ,SAU/BO,GAtGiB,SAAC,GAM1B,IALLC,EAKI,EALJA,MACAC,EAII,EAJJA,eACAC,EAGI,EAHJA,cAGI,IAFJC,mBAEI,MAFU,aAEV,MADJC,iCACI,MADwB,aACxB,EAeJ,OACE,yBACEC,UAAWC,KAAOC,QAClBC,MAAO,CAAEC,QAAS,OAAQC,cAAe,QACxCV,EAAM9M,KAAI,SAACiL,EAAMwC,GAChB,IAAMd,EAlBZ,SAA8B1B,EAAM8B,EAAgBC,GAClD,IAAIL,EASJ,OARII,GAAkB9B,EAAK9K,KAAO4M,GAEvBC,GAAiB/B,EAAK9K,KAAO6M,KADtCL,EAAU,IAIR1B,EAAK9K,KAAO6M,GAAiB/B,EAAK9K,KAAO4M,IAC3CJ,EAAU,GAELA,EAQae,CACdzC,EACA8B,EACAC,GAEF,OACE,yBACEW,IAAKF,EACLH,MAAO,CAAEX,WACTiB,aAAc,kBAAMX,EAAYhC,EAAK9K,KACrC0N,aAAc,kBAAMZ,EAAY,OAChCa,QAAS,kBAAMZ,EAA0BjC,KACzC,kBAAC,GAAD,CAAcA,KAAMA,U,UCI1B8C,GAAQC,YAAe,CAC3BC,UAAW,CACTC,aAAc,CACZC,KAAM,CACJC,QAAS,QAMXC,GAAYC,YAAW,CAC3BH,KAAM,CACJI,SAAU,IACVC,SAAU,GAEZC,MAAO,CACLL,QAAS,QAEXM,SAAU,CACRC,OAAQ,UACRC,gBAAiB,oBAEnBC,OAAQ,CACNnC,KAAM,WAERoC,MAAO,CACLzC,MA5Bc,IA6BdC,OA9BY,KAiCdyC,UAAW,CACTC,SAAU,OAEZC,OAAQ,CACN1B,QAAS,eACT2B,OAAQ,QACR3D,UAAW,cAEbM,MAAO,CACLmD,SAAU,IAEZG,IAAK,CACHC,aAAc,MAWlB,SAASxC,GAAMP,EAAOgD,GACpB,OAAOC,MAAiBC,MAAM,CAAC,GAAIlD,IAAQmD,OAAO,CAAC,EAAGH,IAGvCzC,GAAM,GAAI,GACTA,GAAM,GAAI,MAqNX0C,MAAiBC,MAAM,CAAC,EAAG,KAAKC,OAAO,CAAC,EAAG,MAE5D,SAASC,GAAT,GAAuD,IAYjDC,EAZcpM,EAAkC,EAAlCA,OAAQqM,EAA0B,EAA1BA,cAAeC,EAAW,EAAXA,QAIrCC,EAAU,wBAA0BvM,EAAS,IAAMqM,EAAgB,OASvE,IACED,EAAMI,OAAQ,KACZxM,EACA,IACAqM,EACA,QACF,MAAOrN,GAEPoN,EAAM,GAGR,OACE,oCACE,kBAACK,EAAA,EAAD,CAAKC,GAAI,MAAOC,GAAI,MAAOC,GAAI,OAAQC,UAAW,GAChD,kBAACC,EAAA,EAAD,CACE9C,MAAO,CAAEC,QAAS,gBAClBJ,UAAWyC,EAAQd,MACnBuB,UAAU,MACVC,MAAOZ,EAEP7D,MAAOgE,KAGX,kBAACU,EAAA,EAAD,CAAYpD,UAAWyC,EAAQT,IAAKqB,QAAQ,WAAWjO,MAAM,WAA7D,aAQN,SAASkO,GAAT,GAMI,IALFC,EAKC,EALDA,IACAC,EAIC,EAJDA,WACAC,EAGC,EAHDA,gBACAC,EAEC,EAFDA,WACAC,EACC,EADDA,gBAMIC,EAAiBC,KAAKC,MAAM3E,MAC5B4E,EAAUF,KAAKG,KALP,IAKoBJ,GAC5B1E,EAAe,EAAP6E,EAIRE,EAAS9B,MAEVC,MAAM,CAAC,EAAG8B,IACV7B,OAAO,CAAC,EAAG,IACV8B,EAAShC,MAAiBC,MAAM,CAAC,EAbxB,KAaoCC,OAAO,CAAC,EAAGuB,IAExDQ,EAAsBb,EAAIc,kBAAkBxR,KAAI,SAACyR,GAAD,OAAOA,EAAE3P,iBACzD4P,EAAsB,GAGxBA,EADEb,EACoBA,EAAWW,kBAAkBxR,KACjD,SAACyR,GAAD,OAAOA,EAAE3P,iBAGW6O,EAClBA,EAAWa,kBAAkBxR,KAAI,SAACyR,GAAD,OAAOA,EAAE3P,iBAC1C,GASN,IAAI6P,EAAeJ,EAAoB3I,QAAO,SAAC2D,GAAD,OAC5CmF,EAAoBE,SAASrF,MAK/B,OACE,yBAAKF,MAAOA,EAAQwF,IAAevF,OAzCxB,IA0CRwF,MAAMC,KAAKD,MA3CJ,KA2CiBpR,QAAQV,KAAI,SAAC2N,GACpC,OACE,0BACEA,IAAKA,EACLpB,EAAG6E,EAAOJ,KAAKC,MAAMtD,EAAMoD,IAC3BvE,EAAG8E,EAAO3D,EAAMoD,GA7CZ,EA8CJ1E,MA/CM,EAgDNC,OAhDM,EAiDNgB,MAAO,CAELZ,KACEiB,EAAMgE,EAAalH,OACfmG,GAAmB,qBACnBjD,EAAM+C,EAAI5E,MACR6E,GAAcE,EACZC,EACA,qBACF,2BAKhB,0BACEvE,EAAG6E,EAAOF,GA/DF,EAgER1E,EAAG8E,EAAOP,EAAiB,GAC3BzD,MAAO,CACL0E,WAAY,OACZC,kBAAmB,SACnBC,WAAY,QACZxF,KAAM,uBAEPgE,EAAI5E,OAGN6E,EACC,0BACEpE,EAAG6E,EAAOF,GA5EJ,EA4EyB,GAC/B1E,EAAG8E,EAAOP,EAAiB,GAC3BzD,MAAO,CACL0E,WAAY,OACZC,kBAAmB,SACnBC,WAAY,QACZxF,KAAMkE,IAEP,MAAQe,EAAalH,QAGtB,qCAGHoG,GAAcF,EACb,0BACEpE,EAAG6E,EAAOF,GA5FJ,EA4FyB,GAC/B1E,EAAG8E,EAAOP,EAAiB,GAC3BzD,MAAO,CACL0E,WAAY,OACZC,kBAAmB,SACnBC,WAAY,QACZxF,KAAMoE,IAEP,MAAQJ,EAAI5E,MAAQ6F,EAAalH,SAGlC,sCA6BV,SAAS0H,GAAT,GAAiD,IAApBtD,EAAmB,EAAnBA,OAAQe,EAAW,EAAXA,QAEnC,OACE,yBAAKvD,MAFI,GAESC,OAFT,GAEuBgB,MAAO,CAAE8E,WAAY,QACnD,kBAAC,IAAD,CACEjF,UAAW0B,EAASe,EAAQf,OAAS,GACrCvB,MAAO,CAAE/B,UAAW,mBACpBc,MANK,GAOLC,OAPK,MAcb,SAAS+F,GAAT,GAQI,IAPFC,EAOC,EAPDA,KACA1B,EAMC,EANDA,gBAMC,IALDD,kBAKC,WALYpN,EAKZ,MAJDgP,qBAIC,WAJehP,EAIf,EAHDuN,EAGC,EAHDA,gBAGC,IAFDD,kBAEC,WAFYtN,EAEZ,MADDiP,qBACC,WADejP,EACf,EAIKqM,EAAUvB,KAJf,EAMqBpJ,mBAAS,CAC7BwD,MAAO,QACPgK,KAAM,CAAEC,OAAO,EAAMC,SAAS,KAR/B,mBAMIC,EANJ,KAMUC,EANV,KAqBD,OATAP,EAAKM,MAAK,SAAC5R,EAAG8R,GACZ,IAAIC,EAAuB,SAAdH,EAAKnK,MAAmBzH,EAAE8K,MAAQ9K,EAAEgS,IAAIvI,OACjDwI,EAAuB,SAAdL,EAAKnK,MAAmBqK,EAAEhH,MAAQgH,EAAEE,IAAIvI,OACjDyI,EAASN,EAAKH,KAAKG,EAAKnK,QAAU,EAAI,EAC1C,OAAOsK,EAASE,EAASC,GAAUA,KAMnC,kBAAC,IAAD,CAAkBnF,MAAOA,IACvB,kBAACoF,EAAA,EAAD,CAAgB7F,MAAO,CAAE8F,UAAW,UAClC,kBAAC,IAAD,CAAOC,cAAY,EAACC,aAAW,gBAC7B,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACG,CACC,CAAE7F,IAAK,UAAW9B,MAAO,uBACzB,CAAE8B,IAAK,QAAS9B,MAAO,sBACvB7L,KAAI,SAACyT,GACL,OACE,kBAACC,EAAA,EAAD,CACE/F,IAAK8F,EAAM,IACX3F,QAAS,WAEP,IAAI6F,GADJf,EAAI,eAAQA,IACOnK,OAASgL,EAAO9F,IACnCiF,EAAKnK,MAAQgL,EAAO9F,IACpBiF,EAAKH,KAAKgB,EAAO9F,MAAOgG,IACnBf,EAAKH,KAAKgB,EAAO9F,KAEtBkF,EAAQD,IAEVzF,UAAWyC,EAAQlB,UAClB,IACA+E,EAAO5H,MACR,kBAACsG,GAAD,CACEvC,QAASA,EACTf,OAAQ+D,EAAKnK,OAASgL,EAAO9F,YAMzC,kBAACiG,EAAA,EAAD,KACGtB,EAAKtS,KAAI,SAAC0Q,EAAKhG,GAEd,OACE,kBAAC8I,EAAA,EAAD,CACE7F,IAAK+C,EAAIvQ,GACT0T,YAAa,WACXhD,GAAcH,EAAM8B,IAAkBA,EAAc9B,IAEtD9C,aAAc,WACZ2E,EAAc7B,IAEhB7C,aAAc,kBAAM0E,KACpBjF,MAAO,CACLwG,WACEjD,GAAcH,EACV,mBACAC,GAAcD,EACZ,mBACA,UAEV,kBAACgD,EAAA,EAAD,CACErD,UAAU,KACV0D,MAAM,MACNzG,MAAO,CAAEjB,MAAO,QAAS+B,QAAS,SACjCsC,EAAIsC,IACH,kBAAC,GAAD,CAEElG,MAAO4D,EAAIsD,OACXjH,oBAAgBxJ,EAChB2J,0BAA2B,eAE3BwD,EAAIuD,QAGTvD,EAAIsC,IACH,kBAACU,EAAA,EAAD,CAAWQ,MAAM,QACf,kBAACzD,GAAD,CACEC,IAAKA,EACLC,WAAYA,EACZC,gBAAiBA,EACjBC,WAAYA,EACZC,gBAAiBA,KAGnB,6CAgBtB,SAASqD,GAAT,GAOI,IANF/Q,EAMC,EANDA,KACAuN,EAKC,EALDA,WACAyD,EAIC,EAJDA,OACAxD,EAGC,EAHDA,gBACAC,EAEC,EAFDA,WACAC,EACC,EADDA,gBAIIrI,EAAQrF,EAAKiR,MAAK,SAACC,GAAD,OAAOA,EAAEF,QAAUA,KACzC,GAAkB,OAAd3L,EAAM5F,MAA+B,SAAd4F,EAAM5F,KAAiB,CAChD,IAAI0R,EAEJ,GAAI1D,GAAcF,GAAcE,GAAcF,EAC5C4D,EAAe5D,EACXA,EAAW6D,MAAMH,MAAK,SAACC,GAAD,OAAOA,EAAEF,QAAUA,UACzC7Q,EACJ/B,QAAQC,IAAI,uBAAwBkP,EAAWa,kBAAkB/G,aAC5D,GAAIoG,EAAY,CACrB,IAAI4D,EAAkB9D,EAClBE,EAAW6D,cAAcL,MAAK,SAACM,GAAD,OAAOA,EAAExU,IAAMwQ,EAAWxQ,WACxDoD,EACJgR,EAAeE,EACXA,EAAgBD,MAAMH,MAAK,SAACC,GAAD,OAAOA,EAAEF,QAAUA,UAC9C7Q,EACAkR,GACFjT,QAAQC,IACN,uBACAgT,EAAgBjD,kBAAkB/G,aAItC8J,EAAe5D,EACXA,EAAW6D,MAAMH,MAAK,SAACC,GAAD,OAAOA,EAAEF,QAAUA,UACzC7Q,EAGN,IAAIqR,EAAYL,EAAeA,EAAaM,QAAKtR,EAC7CuR,EACFjE,GAAcA,IAAeF,EACzBG,EACAF,EACN,OACE,kBAACmE,GAAA,EAAD,CAAMpH,IAAKyG,EAAS,QAASpM,MAAI,GAE7B,kBAAC,GAAD,CACE4I,gBAAiBkE,EACjB1R,KAAMmR,GAAgB9L,EACtBoM,GAAID,GAAanM,EAAMoM,KAG3B,kBAACtE,EAAA,EAAD,CACEjD,MAAO,CAAEC,QAAS,SAClBhL,MAAM,UACNiO,QAAQ,YACP4D,IAkBT,OAAO,qCAGF,IAAMY,GAAgB,SAACC,GAAW,IAErC7R,EAIE6R,EAJF7R,KACAwN,EAGEqE,EAHFrE,gBACAiE,EAEEI,EAFFJ,GAJoC,EAMlCI,EADFC,YALoC,MAK7B,CAAE7I,MAAO,IAAKC,OAAQ,IALO,IAQVrH,oBAAS,GARC,mBAQjCkQ,EARiC,KAQxBC,EARwB,KAgClCC,EAAUR,EAAG,GACbS,EAAaT,EAAG,GAChBU,EAAaV,EAAG,GAEhBxI,EAAQ6I,EAAK7I,MACbC,EAAS4I,EAAK5I,OAKdkJ,EAAUlG,IAAUlM,EAAKqS,MACzBC,EAAUpG,IAAUlM,EAAKuS,MAEzBvE,EAAS9B,MAEVE,OAAOgG,GACPjG,MAAM,CAAC,GAAIlD,EAAQ,KAElBiF,EAAShC,MAAiBE,OAAOkG,GAASnG,MAAM,CAAC,EAXrC,KAaZqG,EAAWxE,EAAOhO,EAAKqS,KAAK,IAAMrE,EAAOhO,EAAKqS,KAAK,IAZtC,EAcbI,EAAY7E,KAAK8E,MAAgB,GAAVT,GAAgB,GAE3C,OACE,oCACE,yBACE/H,MAAO,CAAE/B,UAAW,wBACpBc,MAAOA,EACPC,OAAQA,EACRsB,aAAc,kBAAMwH,GAAW,IAC/BvH,aAAc,kBAAMuH,GAAW,KAC/B,uBAAG7J,UAAW,mBACZ,0BACEwK,GAAI,EACJC,GAAI1E,EAAO/B,QAAQ,GACnB0G,GAAI7E,EAAO7B,QAAQ,GACnB2G,GAAI5E,EAAO/B,QAAQ,GACnBjC,MAAO,CAAE6I,OAAQ,kBAAmBC,YAAa,KAClDhT,EAAKuS,KAAK3V,KAAI,SAACqW,EAAG3L,GAAJ,OACb,0BACEyC,UAAU,QACVQ,IAAK,KAAOvK,EAAKqS,KAAK/K,GACtB4C,MAAO,CAAEZ,KAAMkE,GAAmB,oBAClCrE,EAAG6E,EAAOhO,EAAKqS,KAAK/K,IAAM4L,EAC1B9J,EAtCI,GAsCW8E,EAAO+E,GACtBhK,MAAOuJ,EACPtJ,OAAQgF,EAAO+E,QAEnB,4BACElJ,UAAU,QACVG,MAAO,CAAEZ,KAAM,UAAWC,QAAS,GACnC4J,GAAInF,EAAOiE,GACXmB,GAAIlF,EAAO/B,QAAQ,GAAK,EACxBoF,EAAG,IAEL,0BACExH,UAAU,QACVG,MAAO,CAAE6I,OAAQ,QAASC,YAAa,EAAGzJ,QAAS,IACnDoJ,GAAI3E,EAAOkE,GACXW,GAAI7E,EAAOmE,GACXS,GAAI1E,EAAO/B,QAAQ,GAAK,EACxB2G,GAAI5E,EAAO/B,QAAQ,GAAK,IAE1B,0BACEjC,MAAO,CAAE0B,SAAU,MAAOkD,WAAY,UACtC3F,EAAG6E,EAAOiE,GACV7I,EAAG,IACF,IACAqJ,EAAW,KAGbV,EACC,oCACE,0BACE7H,MAAO,CACLZ,KAAM,kBACNsC,SAAU,MACVkD,WAAY,OAEd3F,GAAI,EACJC,EAAG,IACF,IACAwE,KAAKC,MAAMG,EAAO5B,SAAS,IAAK,KAEnC,0BACElC,MAAO,CACLZ,KAAM,kBACNsC,SAAU,MACVkD,WAAY,SAEd3F,EAAG6E,EAAO7B,QAAQ,GAAK,EACvB/C,EAAG,IACF,IACAwE,KAAKG,KAAKC,EAAO5B,SAAS,IAAK,MAGlC,SAQd,SAASiH,GAAT,GAAuE,IAQjEC,EAAatT,EAAMuT,EARA5H,EAA6C,EAA7CA,UAAWY,EAAkC,EAAlCA,cAAeC,EAAmB,EAAnBA,QAAStM,EAAU,EAAVA,OAAU,EAEhC2B,qBAFgC,mBAE7D0L,EAF6D,KAEjD4B,EAFiD,OAGhCtN,qBAHgC,mBAG7D4L,EAH6D,KAGjD2B,EAHiD,OAI1CvN,oBAAS,GAJiC,mBAI/DrC,EAJ+D,KAIvDgU,EAJuD,KA+BpE,OAlBAF,EAAc3H,EAAU8H,SAAS,GAAGC,KACpC1T,EAAO2L,EAAUyF,MAEjBmC,EAAY,YAAO,IAAII,IAAI3T,EAAKpD,KAAI,SAACsU,GAAD,OAAOA,EAAEF,YAE7CsC,EAAY1W,KAAI,SAACgX,EAAQtM,GAOvB,OANAsM,EAAO7W,GAAKuK,EACZsM,EAAOhD,OAASgD,EAAOhE,IAAIhT,KAAI,SAACgB,GAAD,MAAQ,CACrCwB,KAAMxB,EACNb,GAAIa,EACJ8K,MAAOkL,EAAOlL,UAETkL,KAMDL,EAGJ,kBAAC,IAAMM,SAAP,CAAgBtJ,IAAK,iBAAmBgC,GACtC,kBAACY,EAAA,EAAD,CACEzC,QAAS,WACP8I,GAAWhU,IAEb0K,MAAO,CAAEqB,OAAQ,WACjBxB,UAAWyC,EAAQb,UACnByB,QAAQ,YACPb,GAEF/M,EACC,qCAEE,kBAACmS,GAAA,EAAD,CAAMmC,WAAS,EAAC/J,UAAWyC,EAAQzB,KAAMgJ,QAAS,GAChD,kBAACpC,GAAA,EAAD,CAAM/M,MAAI,EAACoP,GAAI,IACb,kBAACrC,GAAA,EAAD,CAAMmC,WAAS,EAACG,QAAQ,aAAaF,QAAS,GAC5C,kBAACpC,GAAA,EAAD,CAAMpH,IAAK,MAAO3F,MAAI,GACpB,kBAACyH,GAAD,CACEnM,OAAQA,EACRsM,QAASA,EACTD,cAAeA,KAEnB,kBAACoF,GAAA,EAAD,CAAMpH,IAAK,OAAQ3F,MAAI,GACrB,kBAAC+H,EAAA,EAAD,CACEzD,OAx2BN,IAy2BMD,MAAO,IACP2D,GAAI,MACJC,GAAI,MACJC,GAAI,OACJC,UAAW,EACX7C,MAAO,CAAEgK,SAAU,WAEjB,kBAACjF,GAAD,CACEC,KAAMoE,EACN/F,WAAYA,EACZC,gBAAiBD,EA/DnB,eA+DkDpN,EAChDgP,cAAeA,EACf1B,WAAYA,EACZC,gBAAiBD,EAjEnB,eAiEkDtN,EAChDiP,cAAeA,KAGrB,kBAACjC,EAAA,EAAD,CACEpD,UAAWyC,EAAQT,IACnBqB,QAAQ,WACRjO,MAAM,WAHR,YAOF,kBAACwS,GAAA,EAAD,CAAMpH,IAAK,qBAAsB3F,MAAI,EAACoP,IAAE,GACtC,kBAACrC,GAAA,EAAD,CACEpH,IAAK,qBACL3F,MAAI,EACJsF,MAAO,CAAEC,QAAS,UAClB,kBAACwC,EAAA,EAAD,CACEzD,OAAQiL,IACRC,EAAG,OACHxH,GAAI,MACJC,GAAI,MACJC,GAAI,OACJ5C,MAAO,CAAEgK,SAAU,SAAU/J,QAAS,eACtC4C,UAAW,GACVwG,EAAa3W,KAAI,SAACoU,GACjB,OACE,kBAAC,GAAD,CACEzG,IAAKyG,EACLhR,KAAMA,EACNuN,WAAYA,EACZC,gBACED,EAjGR,eAiGuCpN,EAEjCsN,WAAYA,EACZC,gBACED,EApGR,eAoGuCtN,EAEjC6Q,OAAQA,QAIhB,kBAAC7D,EAAA,EAAD,CACEpD,UAAWyC,EAAQT,IACnBqB,QAAQ,WACRjO,MAAM,UACN+K,MAAO,CAAEC,QAAS,UAJpB,wBAQD,OAiDb,kBAACkK,EAAA,EAAD,OA1IJ,qCA+IJ,SAASC,GAAT,GAAsC,IAAlBC,EAAiB,EAAjBA,KAAM/H,EAAW,EAAXA,QAAW,EACT3K,oBAAS,GADA,mBAC9BrC,EAD8B,KACtBgU,EADsB,KAGnC,OACE,kBAAC7G,EAAA,EAAD,CACEuE,EAAG,EACH3G,IAAK,OAASgK,EAAKrU,QAInB,kBAACsU,EAAA,EAAD,CAAMzK,UAAWyC,EAAQzB,KAAMR,IAAKgK,EAAKrU,QACvC,kBAACuU,EAAA,EAAD,KACE,kBAACtH,EAAA,EAAD,CACEC,QAAQ,KACRH,UAAU,KACVvC,QAAS,WACP8I,GAAWhU,IAEb0K,MAAO,CAAEqB,OAAQ,UAAWpB,QAAS,iBACpCoK,EAAKnV,MAGR,kBAAC+N,EAAA,EAAD,CACEpD,UAAWyC,EAAQT,IACnB5M,MAAM,gBACN+K,MAAO,CAAEC,QAAS,eAAgBuK,WAAY,SAC7CH,EAAKI,OAAS,MAAQJ,EAAK1D,OAAS,KAEvC,kBAACwD,EAAA,EAAD,MAEC7U,EACC,qCAEEjC,OAAOD,KAAKiX,EAAK1O,YAAYjJ,KAAI,SAACgY,GAChC,IAAIjJ,EAAY4I,EAAK1O,WAAW+O,GAChC,OACE,kBAACvB,GAAD,CACE9I,IAAKgK,EAAKrU,OAAS0U,EACnBjJ,UAAWA,EACXY,cAAeqI,EACf1U,OAAQqU,EAAKrU,OACbsM,QAASA,QAKpBhN,EACC,qCAEE,kBAACqV,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQhD,KAAK,SAAb,cAQC,SAASiD,KACtB,IAAMvI,EAAUvB,KADsB,GAERuB,EAAQX,OAEC9D,qBAAW1D,KAA1C0B,EAJ8B,EAI9BA,aAAcM,EAJgB,EAIhBA,aAMtB,SAAS2O,EAAUT,EAAMU,EAAiBC,GACxC,IAAIrP,EAAatI,OAAOD,KAAKiX,EAAK1O,YAC9BsP,EAAS,GASb,OARAtP,EAAWjJ,KAAI,SAACwY,GACd,GAAIH,EAAgBG,GAAI,CACtB,IAAI7B,EAAegB,EAAK1O,WAAWuP,GAAGhE,MAAMH,MAC1C,SAAC5C,GAAD,OAAOA,EAAE2C,QAAUkE,KAErBC,EAAOE,KAAK9B,EAAa9B,GAAG,QAGzB0D,EAET,GAAIpP,GAGEM,EAAc,CAChBjI,QAAQC,IAAI,eAAgBgI,GAC5B,IAAI6O,EAAU7O,EAAa2K,OACvB3B,EAAOhJ,EAAagJ,KACpB4F,EAAkB5O,EAAaR,WAEnCE,EAAauP,MAAM9F,MAAK,SAAC5R,EAAG8R,GAC1B,IAAIC,EAAQE,EACZ,GAAe,QAAXqF,EACFvF,EAAS/R,EAAEsX,GACXrF,EAASH,EAAEwF,OACN,CACL,IAAIK,EAAUP,EAAUpX,EAAGqX,EAAiBC,GACxCM,EAAUR,EAAUtF,EAAGuF,EAAiBC,GAC5CvF,EAASN,EAAOzB,KAAK6H,IAAL,MAAA7H,KAAI,YAAQ2H,IAAW3H,KAAK8H,IAAL,MAAA9H,KAAI,YAAQ2H,IACnD1F,EAASR,EAAOzB,KAAK6H,IAAL,MAAA7H,KAAI,YAAQ4H,IAAW5H,KAAK8H,IAAL,MAAA9H,KAAI,YAAQ4H,IAGrD,IAAI1F,EAAST,GAAQ,EAAI,EACzB,OAAOM,EAASE,EAASC,GAAUA,KAGrC/J,EAAaI,SAASqJ,MAAK,SAAC5R,EAAG8R,GAC7B,IAAIiG,EAAQ5P,EAAauP,MAAMrE,MAAK,SAAC2E,GAAD,OAAOA,EAAE1V,QAAUtC,KACnDiY,EAAQ9P,EAAauP,MAAMrE,MAAK,SAAC2E,GAAD,OAAOA,EAAE1V,QAAUwP,KAEvD,OAAKiG,GAAUE,GAGF9P,EAAauP,MAAMQ,QAAQH,GAC3B5P,EAAauP,MAAMQ,QAAQD,GAEf,GALf,KAQZzX,QAAQC,IAAI,gBAKC6N,MAGdE,OAAO,CAAC,EAAG,MACXD,MAAM,CAAC,GAAK,IAKf,YAAgBhM,GAFJ4F,EAGV,qCAEE,oCACGA,EAAaI,SAASvJ,KAAI,SAACsD,GAC1B,IAAIqU,EAAOxO,EAAauP,MAAMrE,MAAK,SAAC2E,GAAD,OAAOA,EAAE1V,QAAUA,KACtD,OAAOqU,EACL,kBAACD,GAAD,CAAU/J,IAAKgK,EAAKnV,KAAMmV,KAAMA,EAAM/H,QAASA,IAE7C,kBAACuJ,EAAA,EAAD,CACExL,IAAKrK,EACLkN,QAAQ,OACRnE,MAAO,MACPC,OAAQ,IACRgB,MAAO,CAAE4B,OAAQ,OAAQd,QAAS,SALpC,WAMW9K,O,IC7lCrBkS,GAASE,GAAS0D,G,oBAjChB/K,GAAYC,YAAW,CACzBH,KAAM,CACFI,SAAU,IACVC,SAAU,GAEdS,OAAQ,CACJ1B,QAAS,eACT2B,OAAQ,QACR3D,UAAW,cAEfM,MAAO,CACHmD,SAAU,IAEdG,IAAK,CACDC,aAAc,MAoBtB,IAkBeiK,GAlBM,SAACpE,GAAU,MAEwCnQ,GAAe,sBAAC,sBAAA9D,EAAA,6DAChFQ,QAAQC,IAAI,yCADoE,SAEnEkC,KAFmE,mFAGjF,IALyB,mBAEvB2V,EAFuB,KAEFC,EAFE,KAEwBC,EAFxB,KAQ5B,OAAQ,6BACHF,GAAuB,kBAACH,EAAA,EAAD,CAAU9M,MAAO,IAAMC,OAAQ,KAA/B,uBACvBiN,GAA4B,kBAACE,GAAA,EAAD,CAAOC,SAAS,SACzC,kBAACC,GAAA,EAAD,cADyB,6CAEkBJ,GAE9CC,GAAgB,kBAACI,GAAD,CAAWJ,aAAcA,MAM3C,SAASI,GAAU3E,GACtB,IAAMrF,EAAUvB,KAEZmL,GAD0B5J,EAAQX,OACnBgG,EAAMuE,cACnBrQ,EAAiBgC,qBAAW1D,IAA5B0B,aAwTN,SAASgM,EAAQkB,GACTwD,IAAmBxD,EAAEyD,UACrB1E,EAAWiB,EAAEyD,UAzTrBtY,QAAQC,IAAI,iBAAkB0H,EAAcqQ,GAC5C7Y,OAAOuH,OAAOiB,EAAcqQ,GA6T5B9T,qBAAU,WACFyD,IACAzH,EAAeyH,EAAazH,cACf1B,KAAI,SAAAwX,GACbA,EAAEuC,MAAM/Z,KAAI,SAAAqW,GACRA,EAAEyD,SAAWzD,EAAE2D,QAAU,IAAMhJ,KAAKiJ,iBAKjD,CAAC9Q,IA7UyB,IAiVzBzH,EAAcwY,EArXMvM,EAoCK,EA+UM1I,qBA/UN,mBA+UxB4U,EA/UwB,KA+URzE,EA/UQ,KAkV7B,GAAIjM,EAAc,CAId,IAAIgR,GAHJzY,EAAeyH,EAAazH,cAGC1B,KAAI,SAAAwX,GAAC,OAAIA,EAAEuC,MAAM/Z,KAAI,SAAAyR,GAAC,OAAIA,EAAE2I,YAAQC,OAEjEjB,GAAU,YAAQ,IAAIrC,IAAIrV,EAAa1B,KAAI,SAAAwX,GAAC,OAAIA,EAAEuC,MAAM/Z,KAAI,SAAAyR,GAAC,OAAIA,EAAE6I,eAAWD,SAC9E7E,GAAUlG,IAAU5N,GAAc,SAAA2U,GAAC,OAAIA,EAAEkE,qBACzC7E,GAAUpG,IAAU6K,GA9XAxM,EAgYoB,YAAxCuM,EAA0BxY,EA/XpB8Y,QAAO,SAAUC,EAAIlO,GAE3B,OADCkO,EAAGlO,EAAEoB,IAAQ8M,EAAGlO,EAAEoB,KAAS,IAAI8K,KAAKlM,GAC9BkO,IACR,IAiYcnL,MAEZE,OAAO,CAAC,EAAG,MACXD,MAAM,CAAC,GAAK,IAQjB,YAAiBhM,GALL4F,EAKiB,qCAAQ,kBAAC,IAAM8N,SAAP,CAAgBtJ,IAAK,UACtD,kBAACoC,EAAA,EAAD,CAAKuE,EAAG,EAAGhH,MAAO,CAAEC,QAAS,iBACzB,kBAACqK,EAAA,EAAD,CAAMzK,UAAWyC,EAAQzB,KAAMR,IAAK,uBAChC,kBAACkK,EAAA,EAAD,KACI,kBAACtH,EAAA,EAAD,CAAYC,QAAQ,KAAKH,UAAU,MAAnC,wBAMA,kBAACoH,EAAA,EAAD,MACA,kBAAC1H,EAAA,EAAD,CAAKC,GAAI,GACL,kBAAC+E,GAAA,EAAD,CAAMmC,WAAS,EAAC/J,UAAWyC,EAAQzB,KAAMgJ,QAAS,GAC7CxW,OAAOD,KAAKwZ,GAAiBla,KAAI,SAAA0a,GAAI,OAClC,kBAAC3F,GAAA,EAAD,CAAM/M,MAAI,EAACoP,GAAI,GAAIzJ,IAAK+M,GACpB,kBAAC3F,GAAA,EAAD,CAAMmC,WAAS,EAACG,QAAQ,aAAaF,QAAS,GAO1C,kBAACM,EAAA,EAAD,MAECyC,EAAgBQ,GAAMC,MAAM,EAAG,GAAG3a,KAAI,SAAA4a,GACnC,OAAO,oCACH,kBAAC7F,GAAA,EAAD,CAAMpH,IAAKiN,EAAY9Y,cAAekG,MAAI,GACtC,kBAAC+H,EAAA,EAAD,CAAK8K,aAAc,EAAG1K,UAAW,EAAGqH,EAAG,EAAGlK,MAAO,CAAEwN,YAAa,6BAG5D,kBAACvK,EAAA,EAAD,CAAYjD,MAAO,CAAEC,QAAS,SAAWhL,MAAM,UAAUiO,QAAQ,YAC5D,kBAAoBoK,EAAY9Y,eAErC,kBAACyO,EAAA,EAAD,CAAYjD,MAAO,CAAEC,QAAS,SAAWhL,MAAM,UAAUiO,QAAQ,YAC5D,mBAAqBQ,KAAK8E,MAAoC,IAA9B8E,EAAYG,iBAAyB,UAAOxX,IArYrI,SAAkByX,GAA+C,IAApC9F,EAAmC,uDAA5B,CAAE7I,MAAO,IAAKC,OAAQ,IAElDD,EAAQ6I,EAAK7I,MACbC,EAAS4I,EAAK5I,OAEd8E,EAAS9B,MAAiBE,OAAO,CAAC,EAAGgG,GAAQ,KAAKjG,MAAM,CAAC,EAAGlD,EAAQ,KACpEiF,EAAShC,MAAiBE,OAAOkG,IAASnG,MAAM,CAACjD,EAAQ,IAGzDpD,EAAU,CAAC,YAIXoN,EAAa,EACb2E,EAAe,EACfC,EAAY,GACZC,EAAc,GACdtJ,EAAY,GACZuJ,EAAavJ,EACbwJ,EAAa/J,EAAO/B,QAAQ,GAAK2L,EAAY,EAM7C9T,EAAS,CAAC,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,oBAG9GkU,EAAahM,IAAgBlI,GAAQoI,OAAO4J,IAE5C7W,EAAQ,SAAU8T,GAClB,MAAqB,QAAbA,EAAE2D,QAAoB,wBAAuC,eAAb3D,EAAE2D,QAA2B,QAAUsB,EAAWjF,EAAEiE,WAO5GiB,EAAUvK,KAAK6H,IAAL,MAAA7H,KAAI,YAAQgK,EAAUhb,KAAI,SAAAqW,GAAC,OAAIA,EAAEmF,YAAcnF,EAAEoF,cAC3DC,EAASV,EAAUpS,QAAO,SAAAyN,GAAC,OAAe,GAAXA,EAAE+D,SAEjCuB,EAAeX,EAAUpS,QAAO,SAAAyN,GAAC,MAAiB,QAAbA,EAAE2D,SAAqB3D,EAAE/S,QAAU+S,EAAE/S,UAAQsP,MAAK,SAAC5R,EAAG8R,GAAJ,OAAU9R,EAAEwa,YAAc1I,EAAE0I,YAAc,GAAM,KAGvIhP,EAAI,EACJoP,EAAW,GAEX9O,EAAQ6O,EAAa3b,KAAI,SAAAqW,GACzB,IAAIwF,EAAazK,EAAOiF,EAAEmF,aACtBM,EAAc1K,EAAOiF,EAAEmF,aAAeJ,EAAa,EACnDhB,EAAQwB,EAASvH,MAAK,SAAAmD,GAAC,OAAIA,EAAEjL,EAAIsP,KACjCE,EAAI,GAaR,OAZAA,EAAC,KAAW1F,EACP+D,GAKD2B,EAAC,EAAQ3B,EAAM5N,GACfoP,EAAWA,EAAShT,QAAO,SAAA4O,GAAC,OAAIA,EAAEhL,IAAM4N,EAAM5N,MACrCiM,KAAK,CAAEjM,EAAG4N,EAAM5N,EAAGD,EAAGuP,EAAarZ,MAAO4T,EAAE2F,YACrDJ,EAAShJ,MAAK,SAAC5R,EAAG8R,GAAJ,OAAU9R,EAAEwL,EAAIsG,EAAEtG,GAAK,EAAI,OAPzCA,GAAQ,EACRoP,EAASnD,KAAK,CAAEjM,IAAGD,EAAGuP,EAAarZ,MAAO4T,EAAE2F,YAC5CD,EAAC,EAAQvP,GAObuP,EAAC,WAAiBX,EACXW,KAGPE,EAAoB,GACpBC,EAAgB,GAChBC,EAAiB,GAEjBC,EAAa,CAAC,UAAW,WACzBC,EAAc,CAAC/F,EAAY6E,EAAc7E,GACzCgG,EAAiB,CAAChG,EAAYzE,EAAY,EAAIyE,GAG9CiG,EAAW,SAAUjZ,EAAQyL,EAAWqF,GACxC,IAAIoI,EAAWrT,EAAauP,MAAMrE,MAAK,SAAAoI,GAAE,OAAIA,EAAGnZ,QAAUA,KACtDoZ,EAAM,GACV,GAAIF,EAAU,CACV,IAAIhI,EAAQgI,EAASvT,WAAW8F,EAAU4N,QAAQnI,MAAMH,MAAK,SAAA2E,GAAC,OAAIA,EAAE5E,QAAUA,KAC1EI,IACAkI,EAAG,QAAclI,EAAMK,GAAG,GAC1B6H,EAAG,WAAiBlI,EAAMK,GAAG,GAC7B6H,EAAG,WAAiBlI,EAAMK,GAAG,GAC7B6H,EAAG,IAAUlI,EAAMsE,IACnB4D,EAAG,IAAUlI,EAAMqE,KAK3B,OAAO6D,GA8BX,OA1BA5P,EAAM9M,KAAI,SAAA+b,GACNA,EAAE3Y,KAAKoR,MAAQ,GACftL,EAAQlJ,KAAI,SAAAoU,GACR2H,EAAE3Y,KAAKoR,MAAMJ,GAAUmI,EAASR,EAAE3Y,KAAKE,OAAQyY,EAAE3Y,KAAK2L,UAAWqF,MAErE2H,EAAE3Y,KAAKoR,MAAP,KAAuB+H,EAASR,EAAE3Y,KAAKE,OAAQyY,EAAE3Y,KAAK2L,UAAW,WAGrE7F,EAAQlJ,KAAI,SAAAoU,GAER6H,EAAkB7H,GAAU9E,MAAiBC,MAAM6M,GAAY5M,OAAOrG,EAAaD,QAAQkL,IAC3F8H,EAAc9H,GAAU9E,MAAiBC,MAAM8M,GAAa7M,OAAOrG,EAAaD,QAAQkL,OAG5FjL,EAAaI,SAASvJ,KAAI,SAAA2X,GACtBxO,EAAaF,WAAWjJ,KAAI,SAAA+O,GACxB,IAAIyF,EAAQ+H,EAAS5E,EAAM5I,EAAW,QAEtCoN,EAAexE,GAAQrI,MAAiBC,MAAM+M,GAAgB9M,OAAO,CAACgF,EAAK,IAASA,EAAK,YAS7F,yBAAKnI,MAAOA,EAAOC,OAAQ,KAGvB,uBAAGgB,MAAO,CAAE,UAAa,0BAEpB0N,EAAUhb,KAAI,SAACqW,EAAG3L,GACf,IAAIkS,EAAaxL,EAAOiF,EAAEoF,UAAY,EAAKrK,EAAOiF,EAAEoF,UAAYnF,EAAalF,EAAOiF,EAAEoF,UAiBtF,OAfmB,kBAAC,IAAMxE,SAAP,CAAgBtJ,IAAK0I,EAAEvU,cAAgB,IAAMkP,KAAKiJ,UAEjE,0BAAM9M,UAAU,QAAQQ,IAAK,KAAO0I,EAAE2D,QAAU,IAAM3D,EAAEmF,YAAaqB,YAAa,kBAAM1H,EAAQkB,IAAIyG,WAAY,kBAAM1H,OAAW7R,IAAY+J,MAAO,CAAEZ,KAAMnK,EAAM8T,GAAI1J,QAAuB,QAAb0J,EAAE2D,QAAoB,GAAK,IACvMzN,EAAG6E,EAAOiF,EAAEmF,aAAelF,EAC3B9J,EAAG8E,EAAO+E,EAAE+D,OACZ/N,MAAOuQ,EACPtQ,OAAqB,QAAb+J,EAAE2D,QAAoBkB,EAAYA,EAAY,QAcjEpO,EAAM9M,KAAI,SAAA+b,GAAC,OAAI,0BAAMhG,GAAI3E,EAAO2K,EAAE3Y,KAAKoY,aAAelF,EAAYN,GAAI1E,EAAOyK,EAAE3Y,KAAKgX,OAAS,GAAInE,GAAI7E,EAAO2K,EAAE3Y,KAAKoY,aAAelF,EAAYJ,GAAI5E,EAAOyK,EAAEvP,GAAK2O,EAAa7N,MAAO,CAAE6I,OAAQ,mBAAoBC,YAAa,aAE/NtJ,EAAM9M,KAAI,SAAA+b,GACP,IAEIgB,EAAYZ,EAAeJ,EAAE3Y,KAAKE,QAElCb,EAAQ,uBAAG6K,MAAO,CAAE,UAAa,cAAgB8D,EAAO2K,EAAE3Y,KAAKoY,aAAelF,GAAc,OAAUhF,EAAOyK,EAAEvP,GAAM,QACrH,0BAAMW,UAAU,QAAQQ,IAAK,cAAgBoO,EAAE3Y,KAAK4W,QAAS1M,MAAO,CAAEZ,KAAM,oBACxEH,EAAG,EACHC,EAAG,EACHH,MAAO+O,EACP9O,OAAQ6O,IAEZ,0BAAMpF,GAAI,EAAGC,GAAImF,EAAalF,GAAI8F,EAAEX,WAAYlF,GAAIiF,EAAa7N,MAAO,CAAE6I,OAAQ,mBAAoBC,YAAa,UAEnH,0BACI9I,MAAO,CAAE0B,SAAU,QAASgD,WAAY,OAAQE,WAAY,QAASxF,KAAM,gBAAiBuF,kBAAmB,WAC/G1F,EAAgB,EAAb+J,EACH9J,EAAG8J,GACF,IACAyF,EAAE3Y,KAAK4Y,UAAW,MAI3B,GAAIrb,OAAOD,KAAKqb,EAAE3Y,KAAKoR,OAAO5C,SAAS,QAAS,CAC3BN,EAAOyK,EAAEvP,GACXwE,KAAK6H,IAAIzH,EAAO2K,EAAE3Y,KAAKqY,UAAYnF,EAAYlF,EAAO2K,EAAE3Y,KAAKmS,aAD5E,IAGIyH,EAAMjB,EAAE3Y,KAAKoR,MAAP,KAAqBa,QAC3B4H,EAASD,EAAMjB,EAAE3Y,KAAKqY,SACtByB,EAAUlM,KAAK8H,IAAIkE,EAAKjB,EAAE3Y,KAAKqY,UAC/B0B,EAAOnM,KAAKoM,IAAIJ,EAAMjB,EAAE3Y,KAAKqY,UAMxB,uBAAGnO,MAAO,CAAE,UAAa,cAAgB8D,EAAO2K,EAAE3Y,KAAKoY,cAAgBJ,EAAavJ,GAAayE,GAAc,OAAUhF,EAAOyK,EAAEvP,GAAM,QAE7I,0BAAMuJ,GAAIgH,EAAUxN,QAAQ,GAAIyG,GAAImF,EAAc,EAAIkC,EAAgBpH,GAAI8G,EAAUxN,QAAQ,GAAI2G,GAAIiF,EAAc,EAAIkC,EAAgB/P,MAAO,CAAE6I,OAAQ,mBAAoBC,YAAa,UAaxL,0BAAM7J,EAAGwQ,EAAUG,GAAU1Q,EAnBf,EAmB+BH,MAAO2E,KAAKoM,IAAIL,EAAUC,GAAOD,EAAUhB,EAAE3Y,KAAKqY,WAAYnP,OAAQ6O,EAAc,EAAiB7N,MAAO,CAAEZ,KAAMuQ,EAAS,UAAY,kBAAmBtQ,QAAS,QAElN,0BAAMJ,EAAGwQ,EAAUG,GAAU1Q,EAAG2O,EAAc,EAAG9O,MAAO0Q,EAAUI,GAAO7Q,OAnB5D,EAmBgFgB,MAAO,CAAEZ,KAAMuQ,EAAS,UAAY,kBAAmBtQ,QAAS,QAI7J,0BAAMJ,EAAG,EAAGC,EAAG,EAAGH,MAxBN,EAwBwBC,OAxBxB,EAwB2CgB,MAAO,CAAEZ,KAAM,QAASC,QAAS,IAAKpB,UAAW,aAAewR,EAAUC,GAAO,OAAS7B,EAAc,EAAImC,GAAiB,uBAEpL,0BAAM/Q,EAAG,EAAGC,EAAG,EAAGH,MA1BN,EA0BwBC,OA1BxB,EA0B2CgB,MAAO,CAAEZ,KAAM,MAAOC,QAAS,IAAKpB,UAAW,aAAewR,EAAUhB,EAAE3Y,KAAKqY,UAAY,OAASN,EAAc,EAAImC,GAAiB,wBAiBtM,OAAO,6CA3EKxJ,EA2EL,IAAiBrR,EAAjB,UAKVqK,EAAM9M,KAAI,SAAA+b,GAEU,aACZ7S,EAAQlJ,KAAI,SAACsU,EAAG5J,GAEb,IAAIsS,EAAMjB,EAAE3Y,KAAKoR,MAAMF,GAAGe,QACtB5M,EAAQsT,EAAE3Y,KAAKkR,GACfiJ,EAAYrB,EAAc5H,GAC1BgH,EAAaW,EAAkB3H,GAE/BjF,EAAW2B,KAAK6H,IAAImE,EAAKvU,GAClBuI,KAAKoM,IAAIJ,EAAMvU,GAG1B,OAAO,uBAAG6E,MAAO,CAAE,UAAa,cAAgB8D,EAAO2K,EAAE3Y,KAAKoY,aAAe3J,EAAYyE,EAAa5L,GAAKuQ,EAAe3E,IAAe,OAAShF,EAAOyK,EAAEvP,GAAK,QAO5J,0BAAMW,UAAU,QAAQQ,IAAK,KAAOoO,EAAE3Y,KAAK4W,QAAUhJ,KAAKiJ,SAAU3M,MAAO,CAAEZ,KAAM,QAASC,QAAS,GACjGJ,EAAG,EACHC,EAAG2O,EAAcoC,EAAUP,GAC3B3Q,MAAyB,QAAlB0P,EAAE3Y,KAAK4W,QAAoBiB,EAAe,EACjD3O,OAAQ,IASZ,0BAAMa,UAAU,QAAQQ,IAAK,KAAOoO,EAAE3Y,KAAK4W,QAAUhJ,KAAKiJ,SAAU3M,MAAO,CAAEZ,KAAM4O,EAAW7S,GAAQkE,QAAS,IAC3GJ,EAAG,EACHC,EAAG2O,EAAcoC,EAAUlO,GAC3BhD,MAAyB,QAAlB0P,EAAE3Y,KAAK4W,QAAoBiB,EAAe,EACjD3O,OAAQ0E,KAAKoM,IAAIG,EAAUP,GAAOO,EAAU9U,UAS5D,OAAO,wCAKViT,EAAO1b,KAAI,SAAAwX,GAAC,OACT,0BACIlK,MAAO,CAAE0B,SAAU,MAAOkD,WAAY,QAASxF,KAAM,iBACrDH,EAAG6E,EAAOoG,EAAEgE,aACZhP,EAAG6O,EAAa,GACf,IACA7D,EAAE/U,MAAO,QAGlB,0BACI6K,MAAO,CAAE0B,SAAU,MAAOkD,WAAY,QAASxF,KAAM,iBACrDH,EAAG6E,EAAOmK,GAAW,EACrB/O,EAAG6O,EAAa,GACf,IACArK,KAAK8E,MAAMyF,GAAW,OAAQ,OAiGElQ,CAASuP,EAAYb,MAAO,CAAE1N,MAAO,KAAMC,OAAQ,sBCxd5G,IAAM+B,GAAYC,YAAW,CAC3BH,KAAM,CACJI,SAAU,IACVC,SAAU,GAEZS,OAAQ,CACN1B,QAAS,eACT2B,OAAQ,QACR3D,UAAW,cAEbM,MAAO,CACLmD,SAAU,IAEZG,IAAK,CACHC,aAAc,MAWH,SAASoO,KAEtB,IAAM5N,EAAUvB,KAGRjL,GAFsBwM,EAAQX,OAErB9D,qBACf1D,IADMrE,MAKSkM,MAGdE,OAAO,CAAC,EAAG,MACXD,MAAM,CAAC,GAAK,IAKf,YAAgBhM,GAFJH,EAGV,qCAEE,oCAEGA,EAAKsV,MAAM1Y,KAAI,SAAA2X,GACd,IAAI8F,EAAc,kBAAClN,EAAA,EAAD,KAAaoH,EAAKI,QACpC,OACE,kBAAChI,EAAA,EAAD,CACEuE,EAAG,EACH3G,IAAK,OAASgK,EAAKrU,OACnBgK,MAAO,CAAEC,QAAS,iBAElB,kBAACqK,EAAA,EAAD,CAAMzK,UAAWyC,EAAQzB,KAAMR,IAAKgK,EAAKrU,QACvC,kBAACuU,EAAA,EAAD,KACE,kBAACtH,EAAA,EAAD,CAAYC,QAAQ,KAAKH,UAAU,MAChCsH,EAAKnV,MAER,kBAACgJ,EAAA,EAAD,CAASK,MAAO4R,GACd,kBAAClN,EAAA,EAAD,CAAYpD,UAAWyC,EAAQT,IAAK5M,MAAM,iBACvCoV,EAAKI,OAAO4C,MAAM,EAAG,MAG1B,kBAAClD,EAAA,EAAD,MAEC9W,OAAOD,KAAKiX,EAAK1O,YAAYjJ,KAAI,SAAA2N,GAChC,IAAIoB,EAAY4I,EAAK1O,WAAW0E,GAC5B+I,EAAc3H,EAAU8H,SAAS,GAAGC,KAGpC4G,EAAkB3O,EAAUyF,MAS5BpD,GAPY,YACX,IAAI2F,IAAI2G,EAAgB1d,KAAI,SAACsU,GAAD,OAAOA,EAAEF,YAM7B9E,MAAiBE,OAAO,CAAC,EAAG,IAAID,MAAM,CAAC,EAAGoO,MACnDrM,EAAShC,MAAiBE,OAAO,CAAC,EAAG,IAAID,MAAM,CAAC,EAAG,KACnD+L,EAAahM,IAAgBA,KAAoBE,OAAOpM,EAAKwa,SA8CjE,OACE,kBAAC,IAAM3G,SAAP,CAAgBtJ,IAAK,YAAcA,GACjC,kBAAC4C,EAAA,EAAD,CAAYC,QAAQ,YAAY7C,GAEhC,kBAACoH,GAAA,EAAD,CAAMmC,WAAS,EAAC/J,UAAWyC,EAAQzB,KAAMgJ,QAAS,GAChD,kBAACpC,GAAA,EAAD,CAAM/M,MAAI,EAACoP,GAAI,IACb,kBAACrC,GAAA,EAAD,CAAMmC,WAAS,EAACG,QAAQ,aAAaF,QAAS,GAC5C,kBAACpC,GAAA,EAAD,CAAMpH,IAAK,OAAQ3F,MAAI,GACrB,oCAAG,CAAC,EAAG,EAAG,GAAGhI,KAAI,SAAA0K,GACf,IAAImT,EAAkBnH,EAAYhM,GAAGsI,IAAIhT,KAAI,SAAAgB,GAAC,MAAK,CAAEkJ,MAAOlJ,EAAGb,GAAIa,EAAG8K,MAAO4K,EAAYhM,GAAGoB,MAAOc,MAAO0O,EAAW5E,EAAYhM,GAAGoB,WAEhIgS,EAAe,GACfC,EAAQ,EACRnC,EAAW,GACXpP,EAAI,GACJM,EAAQ+Q,EAAgB7d,KAAI,SAACqW,EAAG3L,GAElC,IAII0P,EAJAyB,EAAazK,EAAO1G,GACpBoR,EApEC,EAoEazF,EAAEnM,MAAMO,OAA0B,GAChDsR,EAAI,GAsCR,OArCAA,EAAC,KAAW1F,GAGT+D,EADC1P,EAAE,GAAK,EACAoT,EAAazJ,MAAK,SAAAmD,GAAC,OAAIA,EAAEjL,EAAIsP,KAE9BD,EAASvH,MAAK,SAAAmD,GAAC,OAAIA,EAAEjL,EAAIsP,OAiB/BE,EAAC,EAAQ3B,EAAM5N,GACfoP,EAAWA,EAAShT,QAAO,SAAA4O,GAAC,OAAIA,EAAEhL,IAAM4N,EAAM5N,MACrCiM,KAAK,CAAEjM,EAAG4N,EAAM5N,EAAGD,EAAGuP,EAAarZ,MAAO4T,EAAE2F,YACrDJ,EAAShJ,MAAK,SAAC5R,EAAG8R,GAAJ,OAAU9R,EAAEwL,EAAIsG,EAAEtG,GAAK,EAAI,MAhBvC9B,EAAE,GAAK,GACTqT,GAAgB,EAChBD,EAAarF,KAAK,CAAEjM,EAAEuR,EAAOxR,EAAGuP,EAAarZ,MAAO4T,EAAE2F,YACtDD,EAAC,EAAQgC,IAETvR,GAAQ,EACRoP,EAASnD,KAAK,CAAEjM,IAAGD,EAAGuP,EAAarZ,MAAO4T,EAAE2F,YAC5CD,EAAC,EAAQvP,GAmBbuP,EAAC,EAAQF,EACTE,EAAC,YAAkBD,EACZC,KAGT,OAAO,kBAAChM,EAAA,EAAD,CAAKC,GAAI,MAAOC,GAAI,OAxGrB,SAAUnD,GAC5B,IAAIgH,EAAahH,EAAM9M,KAAI,SAAC+b,GAC1B,OAAO,oCAEL,0BAAMhG,GAAIgG,EAAExP,EAAIoR,KAAe3H,GAAI1E,EAAOyK,EAAEvP,GAAIyJ,GAAI8F,EAAExP,EAAIoR,KAAezH,GAAI5E,EAAO,GAX1E,GAW0FhE,MAAO,CAAE6I,OAAQ,mBAAoBC,YAAa,QAAS,cAAgB,WAC/K,0BAAML,GAAIgG,EAAExP,EAAIoR,KAAe3H,GAAI1E,EAAOyK,EAAEvP,GAAIyJ,GAAI8F,EAAExP,EAAIoR,KAAgB,EAAGzH,GAAI5E,EAAOyK,EAAEvP,GAAIc,MAAO,CAAE6I,OAAQ,mBAAoBC,YAAa,WAChJ,0BAAMjJ,UAAU,QAAQQ,IAAK,cAAgBoO,EAAE7R,MAAOoD,MAAO,CAAEZ,KAAM4O,EAAWS,EAAE3Y,KAAK8G,OAAQiM,OAAQ,QAASC,YAAa,MAAO,GAAM,GACxI7J,EAAGwP,EAAExP,EACLC,EAAG8E,EAAO,GACVjF,MAhBQ,GAiBRC,OAjBQ,SAsBV0R,EAASlR,EAAM9M,KAAI,SAAC+b,GACtB,OAAO,oCACL,0BAAM5O,UAAU,QAAQQ,IAAK,cAAgBoO,EAAE7R,MAAOoD,MAAO,CAAEZ,KAAM,QAASyJ,OAAQ,QAASC,YAAa,OAC1G7J,EAAGwP,EAAExP,EAAIoR,KAAc,EACvBnR,EAAG8E,EAAOyK,EAAEvP,GAAG,EACfH,MAAO0P,EAAED,YACTxP,OA1BS,IA4BX,0BACEgB,MAAO,CAAE0B,SAAU,QAASkD,WAAY,QAASxF,KAAM,iBACvDH,EAAGwP,EAAExP,EAAIoR,KAAgB,EACzBnR,EAAG8E,EAAOyK,EAAEvP,GAAKyR,GAChB,IACAlC,EAAE3Y,KAAK8G,MAAO,SAMrB,OAAO,yBAAKmC,MAAO,IAAKC,OAAQgF,EAAON,KAAK6H,IAAL,MAAA7H,KAAI,YAAQlE,EAAM9M,KAAI,SAAA+b,GAAC,OAAIA,EAAEvP,QAAO,IACzE,uBAAGc,MAAO,CAAE,UAAa,0BAEtBwG,EAFH,IAEgBkK,IAoEHE,CAAcpR,YAS3B,kBAAC2K,EAAA,EAAD,UAIN,+BAEF,kBAACQ,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQhD,KAAK,SAAb,kB,sjBChNlB,IAAMiJ,GAAOC,IAAOC,IAAV,MAUM,SAACpJ,GAAD,OAAYA,EAAMqJ,WAAa,cAAgB,gBAGjDF,YAAOD,GAAPC,CAAH,MAsBX,IAAMG,GAA4B,SAACtJ,GAAU,IAMzClM,EAMEkM,EANFlM,qBACAqB,EAKE6K,EALF7K,4BACAoU,EAIEvJ,EAJFuJ,UACAC,EAGExJ,EAHFwJ,qBACAC,EAEEzJ,EAFFyJ,sBACAC,EACE1J,EADF0J,cAEIC,EAAUC,iBAAO,MAqGvB,SAASC,EAAgC9W,GAEvC,IAAMyF,EAAQ1E,EAAqBgW,WACjC,SAAC9c,GAAD,OAAYA,EAAO9B,KAAO6H,EAAK7H,MAE7B6e,EAAI,YAAOjW,GACfiW,EAAKvR,GAASzF,EACdoC,EAA4B4U,GAI9B,IAAIC,EAAa,GAcjB,OAbAlW,EAAqBhB,SAAQ,SAAC9F,GAC5Bgd,EAAWhd,EAAO9B,IAAM8B,KAaxB,kBAAC,KAAD,CAAiBid,UAlHnB,SAAmBtZ,GAAS,IAOtBuZ,EAAcC,EANVC,EAAwBzZ,EAAxByZ,OAAQC,EAAgB1Z,EAAhB0Z,YAGhB,GAAKA,EAIL,OAAQD,EAAOE,aACb,KAAKD,EAAYC,YACfH,EAAc,eAAQH,GAEtBE,EAAe/c,KAAKC,MAClBD,KAAKY,UAAUoc,EAAeE,EAAYC,eAS5CT,EAPAK,EAAexe,OAAOuH,OAAOiX,EAAc,CACzCjd,SAAUsd,GACRP,EAAWI,EAAOE,aAAard,SAC/Bmd,EAAO5R,MACP6R,EAAY7R,UAKhB2R,EAAeE,EAAYC,aAAeJ,EAG1C,MACF,IAAK,QAiBH,GAhBAC,EAAc,eAAQH,GAEtBE,EAAe/c,KAAKC,MAClBD,KAAKY,UAAUoc,EAAeE,EAAYC,eAE5CJ,EAAexe,OAAOuH,OAAOiX,EAAc,CACzCjd,SAAU8c,GACRjW,EACAkW,EAAWK,EAAYC,aAAard,SACpCmd,EACAC,KAGJF,EAAeE,EAAYC,aAAeJ,EApFlD,SAAgCM,GAC9B,IAAMC,EAAsB,GACxBC,GAAiB,EAYrB,OAXAhf,OAAOif,QAAQH,GAAezf,KAAI,YAAmB,IAAD,mBAAXyI,GAAW,WAC/B,UAAfA,EAAM5F,MACR4F,EAAMvG,SAAS6F,SAAQ,SAAC8X,GAClBH,EAAoBG,EAAQ1f,IAC9Bwf,GAAiB,EAGnBD,EAAoBG,EAAQ1f,KAAM,QAIjCwf,EAyEGG,CAAuBV,GAEzB,YADA5d,QAAQiE,MAAM,uCAGhBqZ,EAAgCK,GAEhC,MACF,QAEEC,EAAc,eAAQH,GAEtB,IAAIc,EAAe3d,KAAKC,MACtBD,KAAKY,UAAUoc,EAAeC,EAAOE,eAEnCS,EAAoB5d,KAAKC,MAC3BD,KAAKY,UAAUoc,EAAeE,EAAYC,eAGtCU,EAAeC,GACnBjB,EAAWI,EAAOE,aAAard,SAC/B+c,EAAWK,EAAYC,aAAard,SACpCmd,EACAC,GAGFS,EAAepf,OAAOuH,OAAO6X,EAAc,CACzC7d,SAAU+d,EAAaZ,EAAOE,eAEhCS,EAAoBrf,OAAOuH,OAAO8X,EAAmB,CACnD9d,SAAU+d,EAAaX,EAAYC,eAErCT,EAAgCiB,GAChCjB,EAAgCkB,GAEhCZ,EAAeC,EAAOE,aAAeQ,EACrCX,EAAeE,EAAYC,aAAeS,KAmC5C,kBAAC,GAAD,iBACM/K,EADN,CAEE2J,QAASA,KACVA,EAAQuB,SAAWzB,GAClB,kBAAC,GAAD,CACEC,cAAeA,EACf7V,yBAA0BC,EAC1BqX,6BArIR,SAAsCpY,GACpC,IAAMgX,EAAI,YAAOjW,GACjBiW,EAAKvG,KAAKzQ,GACVoC,EAA4B4U,IAmItBqB,UAAWzB,EAAQuB,QACnBG,MAAO9B,EACPC,qBAAsBA,MAczB,IAAM8B,GAAe,SAACtL,GAAW,IAAD,EACqBhQ,mBAAS,MAD9B,mBAC9Bub,EAD8B,KACPC,EADO,OAEqBxb,oBAAS,GAF9B,mBAE9ByZ,EAF8B,KAEPgC,EAFO,OAG6BvV,qBAChE1D,IADMqB,EAH6B,EAG7BA,yBAA0BsB,EAHG,EAGHA,4BAGlC1E,qBAAU,WACRib,EAAmC7X,KAClC,CAACA,IARiC,MAYjC7D,mBAAS6D,GAZwB,mBAUnC8X,EAVmC,KAWnCD,EAXmC,KAc/BhC,EAAgBkC,mBAAQ,WAS5B,OAhCJ,SAAsChZ,GACpC,IAAIC,EAAkB,GAMtB,OALAD,EAAKE,SAAQ,SAACC,GACZ,IAAIC,EAAY,GAChBA,EAAUD,EAAK7H,IAAM6H,EACrBrH,OAAOuH,OAAOJ,EAAiBG,MAE1BH,EAiBcF,CACjBgZ,KAQD,CAACA,IAyBJ,OACE,6BACI3L,EAAMuJ,UAiBJ,KAhBFE,EACE,6BACE,kBAACxG,EAAA,EAAD,CAAQ1H,QAAS,UAAW1C,QATtC,WACE1D,EAA4BwW,GAC5BF,GAAyB,KAOjB,iBAGA,kBAACxI,EAAA,EAAD,CAAQ1H,QAAQ,YAAY1C,QAhCtC,WAEE6S,EAAmC7X,GACnC4X,GAAyB,KA6BjB,WAKF,kBAACxI,EAAA,EAAD,CACE1H,QAAS,UACT1C,QAAS,kBAAM4S,GAAyB,KAF1C,oBAOJ,kBAAC,GAAD,CACE/B,cAAeA,EACfD,sBAAuBA,EACvBtU,4BAA6BuW,EAC7B5X,qBAAsB6X,EACtBnC,qBACEC,EAAwB+B,EAA2B,KAErDjC,UAAWvJ,EAAMuJ,YAClBgC,GACC,kBAACM,GAAA,EAAD,CACER,OAAQE,EACRO,QAAS,kBAAMN,EAAyB,OACxCnT,MAAO,CACLC,QAAS,OACTyT,WAAY,SACZC,eAAgB,UAElBC,kBAAgB,qBAChBC,mBAAiB,4BACjB,kBAAC,GAAD,CACEC,oBAAqBZ,EACrBa,gCAAiC,kBAC/BZ,EAAyB,OAE3B3B,gCAhEV,SAAuCwC,GACrC,IAAMC,EAAqBX,EAAgC7B,WACzD,SAAC9c,GAAD,OAAYA,EAAO9B,KAAOmhB,EAAiBnhB,MAEzCqhB,EAAU,YAAOZ,GACrBY,EAAWD,GAAsBD,EAOjCX,EAAmCa,GACnCf,EAAyB,YA+FvBgB,GAAiB,SAAC,GAIjB,IAHLL,EAGI,EAHJA,oBACAtC,EAEI,EAFJA,gCACAuC,EACI,EADJA,gCACI,EAGsDpc,mBACxDmc,GAJE,mBAGGM,EAHH,KAG0BC,EAH1B,KAOJ,IAAKP,EAAoBjhB,GAEvB,OAAO,8BAET,SAASyhB,EAAkCjU,EAAKkU,GAE9C,IAAIC,EAAsB1f,KAAKC,MAAMD,KAAKY,UAAU0e,IAChDJ,EAAmB,GACvBA,EAAiB3T,GAAOkU,EAExBC,EAAsBnhB,OAAOuH,OAAO4Z,EAAqBR,GACzDK,EAAyBG,GAG3B,OACE,yBACExU,MAAO,CACLjB,MAAO,QACPC,OAAQ,QACRiB,QAAS,OACTC,cAAe,SACfoB,gBAAiB,UAEnB,yBAAKtB,MAAO,CAAEyU,MAAO,EAAG7S,OAAQ,SAC9B,kBAAC8S,GAAA,EAAD,CACEvZ,MAAOiZ,EAAqB,GAC5BO,SAAU,SAACJ,GAAD,OACRD,EAAkC,KAAMC,EAAS1X,OAAO1B,QAE1DyZ,UAAQ,EACR/hB,GAAG,iBACHsC,MAAO,QAGX,yBAAK6K,MAAO,CAAEyU,MAAO,EAAG7S,OAAQ,SAC9B,kBAAC8S,GAAA,EAAD,CACEvZ,MAAOiZ,EAAqB,KAC5BO,SAAU,SAACJ,GAAD,OACRD,EAAkC,OAAQC,EAAS1X,OAAO1B,QAE5DtI,GAAG,iBACHsC,MAAO,UAGX,yBAAK6K,MAAO,CAAEyU,MAAO,EAAG7S,OAAQ,SAC9B,2BACEiT,IAAK,cACLhV,UACE,wGAHJ,gBAOA,kBAAC,KAAD,CACE3K,KAAM,cACNrC,GAAI,cACJiiB,aAAcV,EAAqB,MACnCjZ,MAAOiZ,EAAqB,MAC5BO,SAAU,SAACJ,GACTD,EAAkC,QAASC,OAIjD,yBAAKvU,MAAO,CAAEyU,MAAO,EAAG7S,OAAQ,SAC9B,2BACEiT,IAAK,eACLhV,UACE,wGAE8B,QAA/BuU,EAAsB7e,KACnB,eACA,kBAEN,kBAACwf,GAAA,EAAD,CACEliB,GAAI,eACJmiB,QAASZ,EAAsB9e,OAC/Bqf,SAAU,SAAC/X,GAAD,OACR0X,EACE,UACCF,EAAsB9e,SAG3BJ,KAAK,WACL+f,WAAY,CAAE,aAAc,yBAGhC,yBAAKjV,MAAO,CAAEyU,MAAO,KACrB,yBAAKzU,MAAO,CAAEyU,MAAO,EAAG7S,OAAQ,SAC9B,kBAACgJ,EAAA,EAAD,CACE3V,MAAM,UACNuL,QAAS,kBACPgR,EAAgC4C,KAHpC,UAOA,kBAACxJ,EAAA,EAAD,CAAQpK,QAASuT,GAAjB,aAKR,SAASmB,KACP,MAAO,uCAAuCrgB,QAAQ,SAAS,SAAUqW,GACvE,IAAI7D,EAAqB,GAAhB3D,KAAKiJ,SAAiB,EAE/B,OADW,KAALzB,EAAW7D,EAAS,EAAJA,EAAW,GACxB8N,SAAS,OAItB,IAAMjD,GAAU,SAAC3X,EAAM6a,EAAYC,GACjC,IAAM/c,EAASkM,MAAMC,KAAKlK,GADoB,EAE5BjC,EAAOgd,OAAOF,EAAY,GAArCG,EAFuC,oBAK9C,OAFAjd,EAAOgd,OAAOD,EAAU,EAAGE,GAEpBjd,GAKHoZ,GAAO,SAACK,EAAQC,EAAawD,EAAiBC,GAClD,IAAMC,EAAclR,MAAMC,KAAKsN,GACzB4D,EAAYnR,MAAMC,KAAKuN,GACvBtX,EAAOgb,EAAYF,EAAgBrV,OAGzC,OADAwV,EAAUL,OAAOG,EAAqBtV,MAAO,EAA7C,2BAAqDzF,GAArD,IAA2Dkb,OAAQV,QAC5DS,GAGH/C,GAAO,SAACb,EAAQC,EAAawD,EAAiBC,GAClD,IAAMC,EAAclR,MAAMC,KAAKsN,GACzB4D,EAAYnR,MAAMC,KAAKuN,GAF8C,EAGzD0D,EAAYJ,OAAOE,EAAgBrV,MAAO,GAArDoV,EAHoE,oBAK3EI,EAAUL,OAAOG,EAAqBtV,MAAO,EAAGoV,GAEhD,IAAMjd,EAAS,GAIf,OAHAA,EAAOkd,EAAgBvD,aAAeyD,EACtCpd,EAAOmd,EAAqBxD,aAAe0D,EAEpCrd,GAEHud,GAAM,SAAC,GAON,IANL7C,EAMI,EANJA,KACA7B,EAKI,EALJA,qBACA4B,EAII,EAJJA,UACAD,EAGI,EAHJA,6BACAtX,EAEI,EAFJA,yBACA6V,EACI,EADJA,cAGA,OACE,6BAEI,kBAACyE,GAAA,EAAD,CACE9C,KAAMA,EACNngB,GAAI,YACJkjB,SAAUhD,EACViD,UAAW,eACX,yBACEhW,MAAO,CACLsB,gBAAiB,QACjBvC,MAAO,QACPC,OAAQ,OACR8B,QAAS,MACTb,QAAS,OACT+J,SAAU,OACViM,OAAQ,wBAGR,kBAAC,GAAD,CACE5E,cAAeA,EACf7V,yBAA0BA,EAC1BsX,6BAA8BA,EAC9BoD,8BACE/E,QASZgF,GAA6B,SAAC,GAM7B,IALL1a,EAKI,EALJA,qBACA0V,EAII,EAJJA,qBACAD,EAGI,EAHJA,UACAI,EAEI,EAFJA,QACAD,EACI,EADJA,cAEM+E,EAAgBhc,IAAMmZ,SAAQ,WAClC,OAAO9X,EAAqB/I,KAAI,SAACiC,GAAD,OAC9BtB,OAAOuH,OAAOjG,EAAQ,CAAEihB,OAAQV,YAEjC,CAACzZ,IAeJ,OACE,kBAAC,IAAMkO,SAAP,KACE,yBAAK0M,IAAK/E,GACR,kBAAC,KAAD,CAAWW,YAAY,QAAQqE,gBAAgB,IAC5C,SAACC,EAAUC,GAAX,OACC,yBACEH,IAAKE,EAASE,SACdC,eAAgBF,EAASE,gBACxBN,EAAc1jB,KAAI,SAACgI,EAAMyF,GAAP,OACjB,kBAAC,KAAD,CACEwW,eAAgBzF,EAChB7Q,IAAK3F,EAAKkb,OACVgB,YAAalc,EAAKkb,OAClBzV,MAAOA,IACN,SAACoW,EAAUC,GAAX,OACC,kBAAC,IAAM7M,SAAP,KACE,uCACE0M,IAAKE,EAASE,UACVF,EAASM,eACTN,EAASO,gBAHf,CAIE9F,WAAYwF,EAASxF,WACrBhR,MAAOuW,EAASM,eAAe7W,QAE7B,kBAAC,GAAD,CACEqR,cAAeA,EACfH,UAAWA,EACXC,qBAAsBA,EACtB2C,oBAAqBpZ,KAG1B8b,EAASxF,YACR,6BACE,kBAAC,GAAD,CACEE,UAAWA,EACXG,cAAeA,EACfF,qBAAsBA,EACtB2C,oBAAqBpZ,YAOlC6b,EAASQ,mBASXC,GAAiB,SAAC,GAKxB,IAJLlD,EAII,EAJJA,oBACA3C,EAGI,EAHJA,qBACAD,EAEI,EAFJA,UACAG,EACI,EADJA,cAGA,OACE,kBAAC4F,GAAA,EAAD,KACE,kBAAC,GAAD,CACEtZ,KAAM,CAAEzI,KAAM4e,EAAoBjhB,IAClC+K,YAAayT,KACbH,GACA,kBAAC,IAAMvH,SAAP,KACE,kBAACuN,GAAA,EAAD,CACElX,MAAO,CACLmX,SAAU,QACVnN,SAAU,SACVoN,aAAc,aAEftD,EAAoB5e,MAEtBic,GACC,kBAAC,KAAD,CACEnR,MAAO,CAAEqB,OAAQ,UAAW,cAAe,QAC3Cb,QAAS,kBACP2Q,EAAqB2C,S,ogEC3oBrC,IAqCeuD,GArCM,SAAC,GAKf,IAJLvE,EAII,EAJJA,6BACAoD,EAGI,EAHJA,8BACA1a,EAEI,EAFJA,yBACA6V,EACI,EADJA,cAIA,OACE,yBAAKrR,MAAO,CAAEC,QAAS,SACpB,CAAC,WAAY,SAASvN,KAAI,SAAC6C,GAC1BrB,QAAQC,MACR,IAGMmjB,EAHe9b,EAAyBF,QAC5C,SAAC3G,GAAD,OAAYA,EAAOY,OAASA,KAEQ+F,QAAO,SAAC3G,GAE5C,OADAT,QAAQC,IAAIQ,GACa,IAAlBA,EAAOW,SAAkC,IAAlBX,EAAOW,UAEnCqc,EAAa,GAIjB,OAHA2F,EAAiB7c,SAAQ,SAAC9F,GACxBgd,EAAWhd,EAAO9B,IAAM8B,KAGxB,kBAAC,GAAD,CACE0c,cAAeA,EACfM,WAAYA,EACZ4F,eAAgBzE,EAChB0E,aAAchc,EACd0a,8BAA+BA,EAC/B3gB,KAAMA,SAWZkiB,GAAU3G,IAAOC,IAAV,MAIPF,GAAOC,IAAOC,IAAV,MAUM,SAACpJ,GAAD,OAAYA,EAAMqJ,WAAa,cAAgB,gBAuBzD0G,IApBQ5G,YAAOD,GAAPC,CAAH,MAMIA,IAAOC,IAAV,MAcCD,IAAOC,IAAV,MAEJ,SAACpJ,GAAD,OAAYA,EAAM+O,eAAiB,cAAgB,iBAgBnDiB,IARQ7G,YAAO4G,GAAP5G,CAAH,MAQOA,YAAO4G,GAAP5G,CAAH,OAIT8G,GAAS9G,IAAOC,IAAV,MAYNnG,GAASkG,IAAO+G,OAAV,MAeNC,GAAahH,IAAOC,IAAV,MAUT,IAAMgH,GAAc,SAAC,GAOrB,IANLP,EAMI,EANJA,aACAjiB,EAKI,EALJA,KACAgiB,EAII,EAJJA,eACArB,EAGI,EAHJA,8BACAvE,EAEI,EAFJA,WACAN,EACI,EADJA,cAoCA,OAlCAnd,QAAQC,IAAIqjB,GAEZpf,qBAAU,WACRlE,QAAQC,IAAI,sCACX,IA6BHD,QAAQC,IAAIwd,GAEV,6BAGE,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAQnR,QAhCd,SAAiBvN,GAEf,IAAI+kB,EAvBC,uCAAuCnjB,QAAQ,SAAS,SAAUqW,GACvE,IAAI7D,EAAqB,GAAhB3D,KAAKiJ,SAAiB,EAE/B,OADW,KAALzB,EAAW7D,EAAS,EAAJA,EAAW,GACxB8N,SAAS,OAsBd8C,EAAa,gBACdD,EAAc,CACbnlB,GAAImlB,EACJ9iB,KAAK,GAAD,OAAKK,EAAL,YAAayiB,GACjBziB,KAAMA,EACND,QAAQ,EACRD,KAAM,OACNJ,MAAO,OACPL,SAAU,KAGd2iB,EAAeU,EAAcD,MAkBvB,yBAAKjZ,MAAM,KAAKC,OAAO,KAAKkZ,QAAQ,aAClC,0BACE9Y,KAAK,eACL2J,EAAE,+CAGN,kBAAC+O,GAAD,YAAiBviB,IAMlBlC,OAAOD,KAAKue,GAAYjf,KAAI,SAAC6H,EAAM6C,GAAP,OAC3B,kBAAC,IAAMuM,SAAP,KACE,kBAAC,KAAD,CAAWtJ,IAAK9F,EAAM0X,YAAa1X,IAChC,SAACgc,EAAUC,GAAX,OACC,kBAACmB,GAAD,CACEtB,IAAKE,EAASE,SACdC,eAAgBF,EAASE,gBACzB,6BACE,kBAAC,GAAD,CACErF,cAAeA,EACfF,qBAAsB,SAACgH,GACrBjkB,QAAQC,IAAI,8BAA+BgkB,GAC3CjC,EAA8BiC,IAEhCrE,oBAAqBnC,EAAWpX,MAEnCoX,EAAWpX,GAAM3F,SAASuI,OACvBwU,EAAWpX,GAAM3F,SAASlC,KAAI,SAACgI,EAAMyF,GAAP,OAC5B,kBAAC,KAAD,CACEE,IAAK3F,EAAKkb,OACVgB,YAAalc,EAAKkb,OAClBzV,MAAOA,IACN,SAACoW,EAAUC,GACV,IAAI4B,EAAW/kB,OAAOuH,OAAO,GAAIF,GAIjC,OACE,kBAAC,GAAD,eACE2b,IAAKE,EAASE,UACVF,EAASM,eAFf,CAGE7F,WAAYwF,EAASxF,WACrBhR,MAAOuW,EAASM,eAAe7W,QAC/B,wBAASuW,EAASO,gBAEd,kBAAC,GAAD,CACEzF,cAAeA,EACfyC,oBACEsE,aASjB7B,EAASQ,aAAe,kBAACa,GAAD,wBAC5BrB,EAASQ,oBAMgB,IAAnC1jB,OAAOD,KAAKue,GAAYxU,QACvB,oCACM5H,EADN,kCAC2CA,EAD3C,sC,UCrPFwD,GAAWsf,KAAXtf,OA8COuf,GA5CE,SAAC,GAAiB,EAAfC,SACO1a,qBAAW1D,IAA5B0B,aAD0B,IAAD,EAGLzB,IAAMzC,SAAS,IAHV,6BAajC,OACE,yBAAKqI,MAAO,CAAEc,QAAS,SACrB,kBAAC,GAAD,CACEiW,YAAY,oBACZyB,YAAa,kBAACC,GAAA,EAAD,MACb7Q,KAAK,QAGL5H,MAAO,CAAEjB,MAAO,OAGlB,yBAAKiB,MAAO,CAAE8E,WAAY,SAUtB,kBAAC,GAAD,CACEoR,8BAA+B,SAAClf,GAAD,OAC7B9C,QAAQC,IAAI6C,SC5CX0hB,GAJA,WACb,OAAO,iD,6GCaF,IAuEM7R,GAAY,SAAC,GAOnB,IANLgB,EAMI,EANJA,QACA/R,EAKI,EALJA,KACAgO,EAII,EAJJA,OACA6U,EAGI,EAHJA,QACA3U,EAEI,EAFJA,OACAhF,EACI,EADJA,OACI,EAEe8E,EAAO5B,SAFtB,mBAEGsJ,EAFH,KAEQD,EAFR,KAQEqN,EALoB5W,MAEvBE,OAAO,CAACsJ,EAAM,KAAOD,EAAM,OAC3BsN,WAAWF,EAAQjmB,KAAI,SAAComB,GAAD,OAAYA,EAAOrQ,MAEzBsQ,CAAkBjjB,GAChCiS,EAAU/F,IAAQlM,GAClBkjB,EACJ,uBAAG/a,UAAS,oBAAgB,EAAI,EAVjB,GAUH,QACT0a,EAAQjmB,KAAI,SAAComB,EAAQ3Y,GACpB,OACE,uBAAGE,IAAKF,GACN,0BACEE,IAAG,aAAQF,GACXlB,EAAG6E,EAAOgV,EAAOG,IAAM,EACvB/Z,EAAG8E,EAAO8U,EAAO3b,QACjB4B,MAlBK,GAmBLK,KAAM,OACNC,QAAS,GACTL,OAAQA,EAASgF,EAAO8U,EAAO3b,UACjC,0BACEkD,IAAKF,EACLlB,EAAG6E,EAAOgV,EAAOG,IAAM,EACvB/Z,EAAG8E,EAAO4U,EAAYzY,GAAOhD,QAC7B4B,MA1BK,GA2BLK,KAAM,QACNJ,OAAQA,EAASgF,EAAO4U,EAAYzY,GAAOhD,eAOvD,OACE,2BAEI,0BACE4B,MAAO+E,EAAO7B,QAAQ,GAAK6B,EAAO7B,QAAQ,GAC1C7C,KAAM,YACNH,EAAG,EACHC,EAAGF,EAAS,EACZA,OAAQ,IAGXga,EACD,2BACe,OAAZjR,GACC,2BACE,0BACE9I,EAAG6E,EAAOiE,GACV7I,EAAG,EACHF,OAAQA,EACRD,MAAO,EACPK,KAAM,sBACR,0BACEY,MAAO,CACLZ,KAAM,oBACNsC,SAAU,MACVkD,WAAY,SACZiE,OAAQ,OACR,cAAe,SACf,eAAgB,OAElB5J,EAAG6E,EAAOiE,GACV7I,EAAGF,EAAS,IACX+I,EAAQmR,QAAQ,MAKzB,uBAAGrZ,UAAW,0BACbgI,GACC,oCACE,0BACE7H,MAAO,CACLZ,KAAM,kBACNsC,SAAU,MACVkD,WAAY,MACZiE,OAAQ,OACR,cAAe,SAEf,eAAgB,OAElB5J,EAAG,GACHC,EAAG,IACF,IACAwE,KAAK8E,MAAM1E,EAAO5B,SAAS,IAAK,KAGnC,0BACElC,MAAO,CACLZ,KAAM,kBACNsC,SAAU,MACVkD,WAAY,MACZiE,OAAQ,OACR,cAAe,SAEf,eAAgB,OAElB5J,EAAG6E,EAAO7B,QAAQ,GAClB/C,EAAG,IACF,IACAwE,KAAK8E,MAAM1E,EAAO5B,SAAS,IAAK,QAQvCtI,GAAQ,SAAC+N,GAAW,IAChB5I,EAA4B4I,EAA5B5I,MAAOC,EAAqB2I,EAArB3I,OAAQ2V,EAAahN,EAAbgN,SACjBwE,EAAW5H,iBAAO,MAqCxB,OAnCAnZ,qBAAU,WACR,IAAMuF,EAAOwb,EAAStG,QAEhBuG,EAAWC,eACdC,OAAO,CACN,CAAC,EAAG,GACJ,CAACva,EAAOC,KAGTua,GAAG,OAiBN,WAEO3c,KAAM4c,YACT5c,KAAM4c,UAAY,CAAC,EAAGza,IAExB7K,QAAQulB,KAAK,QAAS7c,MACtB+X,EAAS/X,KAAM4c,cArBjBE,aAAO/b,GACJgc,UAAU,WACV7jB,KAAK,CAAC,IACN8jB,QACAC,OAAO,KACPC,KAAK,QAAS,SAEjBJ,aAAO/b,GAAM+b,OAAO,WAAWK,KAAKX,MAkBpC,yBAAK/C,IAAK8C,EAAUna,OAAQA,EAAS,GAAID,MAAOA,EAAQ,IACtD,uBAAGd,UAAW,kBAAmB0J,EAAM7M,YAKvCkf,GAAqB,SAAC,GAQrB,IAPLlkB,EAOI,EAPJA,KACAgO,EAMI,EANJA,OACA6U,EAKI,EALJA,QACA3U,EAII,EAJJA,OACAhF,EAGI,EAHJA,OACAib,EAEI,EAFJA,WACAC,EACI,EADJA,WAEMnb,EAAQ+E,EAAO7B,QAAQ,GADzB,EAE0B7H,IAAMzC,UAAS,GAFzC,mBAEGkQ,EAFH,KAEYC,EAFZ,KAcJ,OACE,yBACExH,aAAc,kBAAMwH,GAAW,IAC/BvH,aAAc,kBAAMuH,GAAW,KAC/B,kBAAC,GAAD,CAAO/I,MAAOA,EAAOC,OAAQA,EAAQ2V,SAdzC,SAAyBwF,GAAS,IAAD,EACR,KAAb,QAAN,EAAAA,SAAA,eAAQhd,UACVgd,EAASrW,EAAO5B,UAGlB+X,EAAWnW,EAAOsW,OAAOD,EAAO,KAEhCD,EAAWpW,EAAOsW,OAAOD,EAAO,OAQ5B,kBAAC,GAAD,CACEtS,QAASA,EACT/R,KAAMA,EACNiJ,MAAOA,EACPC,OAAQA,EACRgF,OAAQA,EACRF,OAAQA,EACR6U,QAASA,OAMN0B,GAAqB,SAAC,GAO5B,IANLvkB,EAMI,EANJA,KACAgO,EAKI,EALJA,OACA6U,EAII,EAJJA,QACA3Z,EAGI,EAHJA,OACAgF,EAEI,EAFJA,OAEI,IADJsW,gBACI,MADO,SAACtjB,KACR,IAC0BW,mBAASqK,IAAOlM,IAD1C,mBACGykB,EADH,KACYN,EADZ,OAE0BtiB,mBAASqK,IAAOlM,IAF1C,mBAEG0kB,EAFH,KAEYN,EAFZ,KAGEO,EAAeC,GAAYH,EAAS,KACpCI,EAAeD,GAAYF,EAAS,KAI1C,OAHApiB,qBAAU,WACRkiB,EAAS,CAAEM,UAAWH,EAAcI,UAAWF,MAC9C,CAACF,EAAcE,IAEhB,kBAAC,GAAD,CACE3W,OAAQA,EACRF,OAAQA,EACR6U,QAASA,EACT3Z,OAAQA,EACRlJ,KAAMA,EACNmkB,WAAYA,EACZC,WAAYA,KAGlB,SAASQ,GAAYvf,EAAO2f,GAAO,MAEWnjB,mBAASwD,GAFpB,mBAE1B4f,EAF0B,KAEVC,EAFU,KAqBjC,OAjBA5iB,qBACE,WAEE,IAAM6iB,EAAUC,YAAW,WACzBF,EAAkB7f,KACjB2f,GAKH,OAAO,WACLK,aAAaF,MAGjB,CAAC9f,EAAO2f,IAGHC,E,wDC1TMK,I,OAvBI,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,KAAMC,EAAgC,EAAhCA,YAAuBzoB,GAAS,EAAnB0oB,SAAmB,EAAT1oB,IAWjD,OADAqB,QAAQC,IAAI,WAAYtB,GAEtB,yBAAKA,GAAIA,GACP,kBAAC,KAAD,CACE2oB,WAAW,EACXH,KAAMA,EACNI,UAAU,EACVC,aAZN,SAAyBte,GACvB,IACMue,EADUN,EAAKhO,MAAM,GACPiI,OAAOlY,EAAG,GAC9Bke,EAAY,SAAUK,IAUlBC,eAjBN,SAAsBD,GACpBL,EAAY,MAAOK,S,kFCKvB,SAASE,KACP,MAAO,uCAAuChnB,QAAQ,SAAS,SAAUqW,GACvE,IAAI7D,EAAqB,GAAhB3D,KAAKiJ,SAAiB,EAE/B,OADW,KAALzB,EAAW7D,EAAS,EAAJA,EAAW,GACxB8N,SAAS,OAIN,CACd,gBACA,cACA,oBACA,eACA,gBACA,SACA,WACA,OACA,UACA,YACA,OACA,WACA,6BACA,QACA,yBACA,wBAEyBziB,KAAI,SAACopB,GAC9B,MAAO,CAAEjpB,GAAIgpB,KAAU1mB,MAAO2mB,MAoBhC,SAASC,GAAWpU,GAClB,OACE,yBACE3H,MAAO,CAAEjB,MAAO,OAAQC,OAAQ,OAAQsC,gBAAiB,eACzD,kBAAC,KAAD,CACE0a,aArBeC,EAqBYtU,EAAMsU,MAAOtU,EAAM9H,UArBV,SAAC0W,EAAUC,EAAU0F,GAC/D,IAAMxhB,EAAOuhB,EAAMC,EAAOnK,OAAO5R,OACjC,OACE,kBAAC,IAAMwJ,SAAP,KACE,yCACM4M,EAASM,eACTN,EAASO,gBAFf,CAGET,IAAKE,EAASE,SACdzW,MAAOuW,EAASM,eAAe7W,MAC/BH,UAAW2W,EAASxF,WAAa,WAAa,KAC9C,kBAAC,GAAD,CAAcrT,KAAM,CAAEzI,KAAMwF,EAAK7H,UAYjCof,YAAatK,EAAMsK,YACnBqE,gBAAgB,IACf,SAACC,EAAUC,GAAX,OACC,yBAAKH,IAAKE,EAASE,SAAU5W,UAAW8H,EAAM9H,WAC3C8H,EAAMsU,MAAMvpB,KAAI,SAACgI,EAAMyF,GACtB,IAAMgc,EACJzhB,EAAK7H,KAAO2jB,EAAS4F,qBACvB,OACE,kBAAC,IAAMzS,SAAP,CAAgBtJ,IAAK3F,EAAK7H,IACvBspB,EACC,yBAAKtc,UAAU,2BACZ,IACD,kBAAC,GAAD,CAAclC,KAAM,CAAEzI,KAAMwF,EAAK7H,OAGnC,kBAAC,KAAD,CAAW+jB,YAAalc,EAAK7H,GAAIsN,MAAOA,IACrC,SAACoW,EAAUC,GACV,OACE,kBAAC,IAAM7M,SAAP,KACE,uCACE0M,IAAKE,EAASE,UACVF,EAASM,eACTN,EAASO,gBAHf,CAIEjX,UAAW2W,EAASxF,WAAa,WAAa,KAC9C,kBAAC,GAAD,CACE3Q,IAAG,eAAU3F,EAAK7H,IAClB8K,KAAM,CAAEzI,KAAMwF,EAAK7H,eAWtC0jB,EAASQ,iBA3DA,IAACkF,EAmEvB,SAASI,GAAK1U,GAAQ,IAAD,EACavN,IAAMzC,SAAS,MAD5B,mBACZoe,EADY,KACFuG,EADE,KAWbtJ,EAAOuJ,QAAQxG,GACfljB,EAAKmgB,EAAO,sBAAmB/c,EAErC,OACE,kBAAC,IAAM0T,SAAP,KACE,kBAAC6S,GAAA,EAAD,CAAYxW,aAAW,kBAAkBxF,QAbzB,SAAC5D,GACnB0f,EAAY1f,EAAM6f,iBAad,kBAAC,KAAD,OAGF,kBAACC,GAAA,EAAD,CACE7pB,GAAIA,EACJmgB,KAAMA,EACN+C,SAAUA,EACVtC,QAjBc,WAClB6I,EAAY,OAiBRK,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAEd,yBAAK7c,MAAO,CAAEgK,SAAU,OAAQjL,MAAO,QAASC,OAAQ,UACtD,kBAAC+c,GAAD,CACE9J,YAAY,OACZpS,UAAWC,KAAOid,cAClBd,MAAOtU,EAAMsU,WAQzB,SAASe,GAAYrV,GACnB,OACE,yBAAK3H,MAAO,CAAEjB,MAAO,OAAQC,OAAQ,SACnC,kBAAC,KAAD,CAAWiT,YAAY,MAAMgL,UAAW,eACrC,SAAC1G,EAAUC,GAAX,OACC,yBAAKH,IAAKE,EAASE,SAAU5W,UAAWC,KAAOod,WAC5CvV,EAAMsU,MAAMvpB,KAAI,SAACgI,EAAMyF,GAAP,OACf,kBAAC,KAAD,CACEE,IAAK3F,EAAKyiB,OACVvG,YAAalc,EAAKyiB,OAClBhd,MAAOA,IACN,SAACoW,EAAUC,GAAX,OACC,uCACEH,IAAKE,EAASE,UACVF,EAASM,eACTN,EAASO,gBAHf,CAIE9W,MAAOuW,EAASM,eAAe7W,QAC/B,kBAAC,GAAD,CAAcrC,KAAM,CAAEzI,KAAMwF,EAAK7H,aAKxC0jB,EAASQ,iBAQtB,IAoFMqG,GAAU,SAACzV,GACf,OACE,kBAAC,KAAD,CAAWsK,YAAa,UAAWqE,gBAAgB,IAChD,SAACC,EAAUC,GAAX,OACC,yBAAKH,IAAKE,EAASE,SAAU5W,UAAW8H,EAAM9H,WAC5C,kBAAC2c,GAAA,EAAD,KACG,IACD,kBAAC,KAAD,YAOGa,GAlFK,SAAC,GAAgC,IAAD,IAA7B/C,gBAA6B,MAAlB,SAACtjB,KAAiB,EAC1CwE,EAA6BqC,qBAAW1D,IAAxCqB,yBACRtH,QAAQC,IAAIqH,GACO+X,mBACjB,kBACE/X,EAAyB9I,KAAI,SAACiC,GAC5B,IAAIwG,EAAQ9H,OAAOuH,OAAO,GAAIjG,GAE9B,OADAwG,EAAQ9H,OAAOuH,OAAOO,EAAO,CAAEgiB,OAAQtB,YAG3C,CAACrgB,IAPH,IAHkD,EAaFpB,IAAMzC,SAAS,IAbb,mBAa3C2lB,EAb2C,KAazBC,EAbyB,KAclDnlB,qBAAU,WACJkiB,GACFA,EAASgD,EAAiBngB,OAAS,EAAImgB,EAAmB,QAE3D,CAACA,IACJ,IAAM1L,EAAYxX,IAAMojB,aACtB,SAACllB,GAAY,IACHyZ,EAAwBzZ,EAAxByZ,OAAQC,EAAgB1Z,EAAhB0Z,YAGhB,GAAKA,EAUL,OAAQD,EAAOE,aACb,KAAKD,EAAYC,YACfsL,GAAoB,SAACE,GAAD,OApDd,SAACljB,EAAM6a,EAAYC,GAAc,IAAD,EAC5B9a,EAAK+a,OAAOF,EAAY,GAAnCG,EADuC,oBAI9C,OAFAhb,EAAK+a,OAAOD,EAAU,EAAGE,GAElB,YAAIhb,GAiDD2X,CAAQuL,EAAO1L,EAAO5R,MAAO6R,EAAY7R,UAE3C,MACF,IAAK,OACHod,GAAoB,SAACE,GAAD,OAlDjB,SAAC1L,EAAQC,EAAawD,EAAiBC,GAClD,IAAM/a,EAAOqX,EAAOyD,EAAgBrV,OAKpC,OAJA6R,EAAYsD,OAAOG,EAAqBtV,MAAO,EAA/C,2BACKzF,GADL,IAEEyiB,OAAO,OAAD,OAAStB,SAEV,YAAI7J,GA6CDN,CAAKlW,EAA0BiiB,EAAO1L,EAAQC,WAjBlDuL,GAAoB,SAACE,GACnB,IAAM/L,EAAI,YAAO+L,GAGjB,OAFA/L,EAAK4D,OAAOvD,EAAO5R,MAAO,GAEnBuR,OAoBb,CAAC4L,IAGH,OACE,yBAAKzd,UAAWC,KAAO4d,iBACrB,kBAAC,KAAD,CAAiB9L,UAAWA,GAC1B,yBAAK/R,UAAWC,KAAO6d,gBACrB,kBAACX,GAAD,CAAaf,MAAOqB,KAEtB,yBAAKzd,UAAWC,KAAO8d,oBACrB,kBAACvB,GAAD,CAAMJ,MAAOzgB,KAEf,yBAAKqE,UAAWC,KAAO+d,oBACrB,kBAAC,GAAD,U,oBChQJC,GAAe,CACnBC,OAAQ,KACRC,OAAQ,MAGK,SAASC,GAAT,GAA0D,IAAD,IAAvCC,YAAuC,WAAhCjoB,EAAgC,EAArBkoB,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,QAAW,EAC5ChkB,IAAMzC,SAG7BmmB,IAJmE,mBAC/DL,EAD+D,KACxDY,EADwD,OAM9C1mB,mBAAS,IANqC,mBAM/D0jB,EAN+D,KAMzDiD,EANyD,OAO1C3mB,qBAP0C,mBAO/D4mB,EAP+D,KAOvDC,EAPuD,KAQtEtqB,QAAQC,IAAI+pB,EAAM7C,GAMlB,IAcMoD,EAAc,WAAO,IAAD,EACpB9C,EAAM+C,OAAOC,eAAexJ,WAGhC,GAFAqJ,OAAUvoB,GAEN0lB,EAAIxe,OAAS,EAAG,CAClB,IAAIyhB,EAAW,YAAOvD,GACtBuD,EAAYzT,KAAKwQ,GACjB2C,EAAQM,IAEV,UAAIC,SAASC,eAAeX,UAA5B,aAAI,EAAmCY,iBAAiB,WACtD7D,YAAW,WACT2D,SAASC,eAAeX,GAAUY,iBAAiB,SAAS,GAAGC,UAC9D,KAGLX,EAASP,KAaPmB,EA/CJf,EACEA,GACA,6kBAuDF,OARA7C,EAAK3oB,KAAI,SAACgZ,GACRxX,QAAQC,IAAI,SAAU8qB,GAEtBA,EAAaA,EAAWpqB,QAAQ6W,EAAG,SAAWA,EAAI,SAClDxX,QAAQC,IAAI,QAAS8qB,MAEvB/qB,QAAQC,IAAI8qB,GAGV,yBAAKC,UArDa,SAACtiB,GACnBA,EAAMuiB,iBACNjrB,QAAQC,IAAIuqB,OAAOC,eAAexJ,aAE9BuJ,OAAOC,eAAexJ,WAAWhY,OAAS,GAAKohB,IACjDF,EAAS,CACPN,OAAQnhB,EAAMwiB,QAAU,EACxBpB,OAAQphB,EAAMyiB,QAAU,MA+CzBhE,EAAKle,OAAS,EACb,kBAAC8F,EAAA,EAAD,KACG,IACAgc,EAAWK,MAAM,SAAS5sB,KAAI,SAACgZ,EAAGtO,GACjC,MAAY,KAARsO,EAAE,IACJA,EAAIA,EAAEjX,UAAU,GAChBP,QAAQC,IAAIiqB,EAAQ/C,KAAMje,GAExB,kBAACc,EAAA,EAAD,CAASK,MAAO,uBACd,0BACEgI,YAAa,kBAAMiY,EAAU9S,IAC7B1L,MAAO,CACLqB,OAAQ,UACRC,gBAAiB,yBAElBoK,KAKA,8BAAOA,OAQpB,kBAACzI,EAAA,EAAD,KAAaib,GAEf,kBAACqB,GAAA,EAAD,CACEC,aAAW,EACXxM,KAAuB,OAAjByK,EAAMO,OACZvK,QAASgL,EACTgB,gBAAgB,iBAChBC,eACmB,OAAjBjC,EAAMO,QAAoC,OAAjBP,EAAMM,OAC3B,CAAE4B,IAAKlC,EAAMO,OAAQ4B,KAAMnC,EAAMM,aACjC9nB,GAELsoB,EACC,kBAACsB,GAAA,EAAD,CAAUrf,QA/DA,WAChB,IAAImb,EAAM4C,EAENuB,EADW,YAAOzE,GACI/f,QAAO,SAACoQ,GAAD,OAAOA,GAAKiQ,KAE7C6C,OAAUvoB,GACVqoB,EAAQwB,GAERzB,EAASP,MAuDH,cAEA,kBAAC+B,GAAA,EAAD,CAAUrf,QAASie,GAAnB,SC5GV,IAGMsB,GAAmB,SAAC,GAAoC,IAAD,EACvDC,EADsB5B,EAAiC,EAAjCA,QAASlpB,EAAwB,EAAxBA,KAAM+qB,EAAkB,EAAlBA,YAezC,MAZa,SAAT/qB,IAAA,OAAmBkpB,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAS8B,YAE9BF,EAAuB5B,EAAQ8B,SAASxtB,KAAI,SAACiL,GAC3C,OACE,0BACEoB,MAAO,EACPE,EAAGghB,EAAYtiB,EAAKwiB,MACpBnhB,OARW,GASXK,QAAS,UAKf,yBAAKN,MAAK,UAAEkhB,EAAYhe,eAAd,aAAE,EAAsB,GAAIjD,OAdrB,IAef,0BACEI,KAAM,OACNL,MAAOkhB,EAAY7B,EAAQlpB,IAC3B8J,OAlBa,KAmBdghB,IAIMI,GAAb,WACE,WAAYC,GAAW,qBACrBC,KAAKvhB,MAAQshB,EAASthB,MACtBuhB,KAAKC,kBAAoBF,EAASE,kBAClCD,KAAKE,kBAAoB,GAJ7B,oEAM0B,IAAD,OACrB,MAAO,CACLjiB,MAAO,QACPrJ,KAAM,OACNurB,UAAW,CACT3f,QAAS,YAEX/B,MAAOuhB,KAAKvhB,MACZ2hB,WAAY,SAAChtB,EAAG8R,GAAJ,OAAUA,EAAE6V,KAAKle,OAASzJ,EAAE2nB,KAAKle,QAC7CwjB,gBAAiB,kBAAM,+BACvBC,OAAQ,SAACxC,GAIP,OAHK5Z,MAAMqc,QAAQzC,EAAQ/C,QACzB+C,EAAQ/C,KAAO,IAGf,kBAAC,GAAD,CACExoB,GAAIiuB,GAAc1C,GAClB/C,KAAM+C,EAAQ/C,KACdC,YAAa,SAAC5R,EAAQiS,GACpB,GAAe,QAAXjS,EACF0U,EAAQ/C,KAAKlQ,KAAKwQ,OACb,CACL,IAAMxb,EAAQie,EAAQ/C,KAAK5J,WAAU,SAACsP,GAAa,IAAD,EAChD,OAAOA,EAAQ7rB,QAAR,UAAiBymB,EAAI,UAArB,aAAiB,EAAQzmB,SAE9BiL,GAAS,GACXie,EAAQ/C,KAAK/F,OAAOnV,EAAO,GAI/B,EAAKogB,kBACHnC,EAAQ5pB,cACR4pB,EAAQpoB,OACR2lB,EACAjS,YAxChB,KAgDA,SAASoX,GAAc1C,GACrB,MAAM,MAAN,OAAaA,EAAO,IAEf,IAAM4C,GAAb,WACE,WAAYlrB,EAAMZ,EAAMmrB,GAAW,qBACjCC,KAAKprB,KAAOA,EACZorB,KAAKxqB,KAAOA,EACZwqB,KAAKvhB,MAAQshB,EAASthB,MAAQshB,EAASthB,MAAQ,IAC/CuhB,KAAK7L,MAAQ4L,EAAS5L,MACtB6L,KAAKW,cAAgBZ,EAASY,cANlC,oEAS0B,IAAD,OACrB,MAAO,CACL1iB,MAAO+hB,KAAKprB,KACZA,KAAMorB,KAAKprB,KACX0rB,OAAQ,SAACxC,GACP,OACE,yBAAKpe,MAAO,CAAE,cAAe,WAC3B,kBAACie,GAAD,CACEC,KAAME,EAAQ,EAAKlpB,MACnBipB,SAAQ,UAAK2C,GAAc1C,IAC3BA,QAASA,MAIjBrf,MAAOuhB,KAAKvhB,MACZkiB,cAAeX,KAAKW,cACpBxM,MAAO6L,KAAK7L,WAzBlB,KA6BayM,GAAb,WACE,WAAYprB,EAAMZ,EAAMmrB,GAAW,qBACjCC,KAAKprB,KAAOA,EACZorB,KAAKxqB,KAAOA,EACZwqB,KAAKvhB,MAAQshB,EAASthB,MAAQshB,EAASthB,MAAQ,IAC/CuhB,KAAK7L,MAAQ4L,EAAS5L,MACtB6L,KAAKW,cAAgBZ,EAASY,cANlC,oEAS0B,IAAD,OACrB,MAAO,CACL1iB,MAAO+hB,KAAKprB,KACZA,KAAMorB,KAAKprB,KACX0rB,OAAQ,SAACxC,GACP,OACE,8BAAOA,EAAQ,EAAKlpB,MAAQkpB,EAAQ,EAAKlpB,MAAQ,EAAKA,OAG1D6J,MAAOuhB,KAAKvhB,MACZkiB,cAAeX,KAAKW,cACpBxM,MAAO6L,KAAK7L,WApBlB,KAwBa0M,GAAb,WACE,WAAYrrB,EAAMZ,EAAMmrB,EAAUe,GAAqB,IAAD,4BACpDd,KAAKprB,KAAOA,EACZorB,KAAKxqB,KAAOA,EACZwqB,KAAK/qB,KAAO,eACZ+qB,KAAKthB,OAAS,KACdshB,KAAKvhB,MAAQshB,EAASthB,MAAQshB,EAASthB,MAAQ,IAC/CuhB,KAAK7L,MAAQ4L,EAAS5L,MACtB6L,KAAKW,cAAgBZ,EAASY,cAC9BX,KAAKI,WAAa,SAAChtB,EAAG8R,GAAJ,OAAU9R,EAAE,EAAKwB,MAAQsQ,EAAE,EAAKtQ,OAClDorB,KAAKc,mBAAqBA,EAC1Bd,KAAKe,sBAAwB,SAAC/lB,EAAQH,GACpC,OAhJ2B,SAACG,EAAQH,GAAT,OAC/BA,GAASG,EAAOsf,WAAazf,GAASG,EAAOuf,UA+IlCyG,CAAyBhmB,EAAOH,MAAOA,IAEhDmlB,KAAKiB,cAAgB,SAACnD,GACpB,OACE,kBAAC,GAAD,CACEA,QAASA,EACTlpB,KAAM,EAAKA,KACX+qB,YAAa,EAAKnc,UAlB4B,MAqBnC9B,IAAUse,KAAKxqB,MAAM,SAAC0rB,GAAD,OAAWA,EAAM,EAAKtsB,SArBR,mBAqB/CsW,EArB+C,KAqB1CD,EArB0C,KAsBhDC,EAAM,IACRA,EAAM,GAGR8U,KAAKxc,OAAS9B,MAEXE,OAAO,CAACsJ,EAAM,KAAOD,EAAM,OAC3BtJ,MAAM,CAAC,GAAIqe,KAAKvhB,MAAQ,KAC3BuhB,KAAKtc,OAAShC,MAAiBC,MAAM,CAACqe,KAAKthB,OAAQ,IAEnD,IAAIyiB,EAAQnB,KAAKxc,OAAO4d,OAElB/I,EADS3W,MAAeE,OAAOuf,EAAMvf,SAC3Byf,CAAO7rB,EAAKpD,KAAI,SAAC8uB,GAAD,OAAWA,EAAM,EAAKtsB,UACtDorB,KAAKtc,OAASsc,KAAKtc,OAAO9B,OAAO,CAC/B,EACAF,IAAO2W,GAAS,SAACG,GAAD,OAAYA,EAAO3b,YAErCmjB,KAAK3H,QAAUA,EAxCnB,oEAoD0B,IAAD,OACrB,MAAO,CACLpa,MAAO+hB,KAAKprB,KACZA,KAAMorB,KAAKprB,KACX6J,MAAOuhB,KAAKvhB,MACZxJ,KAAM+qB,KAAK/qB,KACXmrB,WAAYJ,KAAKI,WACjBE,OAAQN,KAAKiB,cACb9M,MAAO6L,KAAK7L,MACZwM,cAAeX,KAAKW,cACpBI,sBAAuBf,KAAKe,sBAC5BO,wBAAyB,YAAuB,IAApBC,EAAmB,EAAnBA,aAC1B,OACE,yBAAK7hB,MAAO,CAAE8hB,cAAe,MAAOziB,QAAS,KAC3C,kBAAC,GAAD,CAAmBwiB,aAAcA,IAC9B,YAA0B,IAAvBE,EAAsB,EAAtBA,gBACF,OAA+B,IAA3BA,EAAgB5kB,OACX,8BAGP,kBAAC,GAAD,CACE2G,OAAQ,EAAKA,OACbE,OAAQ,EAAKA,OACb2U,QAAS,EAAKA,QACd3Z,OAAQ,EAAKA,OACblJ,KAAMisB,EAAgBrvB,KACpB,SAAC8uB,GAAD,OAAWA,EAAM,EAAKtsB,gBAQtCyrB,gBAAiB,SAAChZ,GAChB,OACE,kBAAC,GAAD,iBACMA,EADN,CAEE7D,OAAQ,EAAKA,OACbE,OAAQ,EAAKA,OACb2U,QAAS,EAAKA,QACd3Z,OAAQ,EAAKA,OACbsb,SAAU,SAAChf,EAAQH,EAAOiI,GACxB,OAAO,EAAKge,mBAAmB,EAAKlsB,KAAMoG,IAE5CxF,KAAM,EAAKA,KAAKpD,KACd,SAAC8uB,GAAD,OAAWA,EAAM,EAAKtsB,gBAlGpC,6BA2Ce8sB,GACX1B,KAAKvhB,MAAQijB,EACb1B,KAAKhhB,MAAM2C,MAAM,CAAC,EAAGqe,KAAKvhB,UA7C9B,8BAgDgBkjB,GACZ3B,KAAKiB,cAAgBU,MAjDzB,KAkHA,IAAMC,GAAgB,SAACva,GAAW,IAAD,EACzBka,EAAiBla,EAAjBka,aAEN,OADAA,EAAY,UAAGA,SAAH,aAAG,EAAcA,eACPA,EAAa,GAI5B,kBAAC,GAAD,CAAavH,SAAU3S,EAAM2S,WAH3B,+BAgBX,IAaa6H,GAAb,WACE,WAAYrsB,EAAMZ,EAAMmrB,EAAUe,GAAqB,qBACrDd,KAAKprB,KAAOA,EACZorB,KAAKvhB,MAAQ,IACbuhB,KAAKxqB,KAAOA,EACZwqB,KAAK1gB,0BAA4BygB,EAASzgB,0BAC1C0gB,KAAKc,mBAAqBA,EAC1Bd,KAAKe,sBAAwB,SAAC/lB,EAAQH,GACpC,OA9BgBinB,EA8BI9mB,EAAOH,MA9BEknB,EA8BKlnB,GA7BjCinB,IAAgBC,GAhBvB,SAA8BC,EAAQC,GACpC,OAAOA,EAAIC,OAAQplB,EAA6C,EAAvC,SAACqlB,GAAD,OAAQrlB,EAAIklB,EAAO1W,QAAQ6W,EAAGrlB,GAAK,KAA1C,IAACA,EAkBZslB,CACLL,EAAS3vB,KAAI,SAACsE,GAAD,OAASA,EAAI9B,QAC1BktB,EAAY1vB,KAAI,SAACsE,GAAD,OAASA,EAAInE,OANjC,IAAsBuvB,EAAaC,GAsBnC,oEAW0B,IAAD,OACrB,MAAO,CACL9jB,MAAO,cACPrJ,KAAMorB,KAAKprB,KACX6J,MAAOuhB,KAAKvhB,MACZ2hB,WAAY,SAAChtB,EAAG8R,GAAJ,OAAU9R,EAAEwsB,SAAS/iB,OAASqI,EAAE0a,SAAS/iB,QACrDkkB,sBAAuBf,KAAKe,sBAC5BT,OAAQ,SAAC+B,GAAD,OAqIoB7sB,EApID6sB,EAoIO/iB,EApIK,EAAKA,0BAsI9C,kBAAC,GAAD,CACEJ,MAAO1J,EAAKoqB,SACZtgB,0BACEA,IALR,IAAkC9J,EAAM8J,GAnIlCgiB,wBAAyB,YAAuB,IAApBC,EAAmB,EAAnBA,aAE1B,OADA3tB,QAAQC,IAAI,6BAEV,kBAAC,GAAD,CAAmB0tB,aAAcA,IAC9B,YAA0B,IAAvBE,EAAsB,EAAtBA,gBACF,OAA+B,IAA3BA,EAAgB5kB,OACX,8BAGP,kBAACylB,GAAD,CACEf,aAAcE,QAO1BxsB,KAAM,aACNorB,gBAAiB,SAAChZ,GAAD,OACf,kBAAC,GAAD,CACEka,aAAc,CAAEA,aAAc,EAAK/rB,MACnCwkB,SAAU,SAAChf,EAAQH,EAAOiI,GACxB,OAAO,EAAKge,mBAAmB,EAAKlsB,KAAMoG,YA1CtD,KA+GMsnB,GAAsBC,cA9DI,SAAC,GAAsB,IAApBhB,EAAmB,EAAnBA,aAC3BiB,EAAevP,mBAAQ,WAC3B,OAAOsO,EAAanvB,KAAI,SAAC0Q,GACvB,MAAO,CACL5O,cAAe4O,EAAI5O,cAEnBiN,UAAW2B,EAAI3B,UACfzL,OAAQoN,EAAIpN,cAPkC,EAgBhDwB,GAAe,sBAAC,4BAAA9D,EAAA,sEACKI,EAAuBgvB,GAD5B,cACZ1rB,EADY,yBAEXA,GAFW,2CAGjB,IAnBiD,mBAalDQ,EAbkD,KAclDmrB,EAdkD,KAelDC,EAfkD,KAsBpD,OACE,6BACGprB,GACC,kBAACiU,EAAA,EAAD,CAAU9M,MAAO,QAASC,OAAQ,OAAQkE,QAAS,SAEpD6f,GAAgB,2BAAIA,GACrB,yBAAK/iB,MAAO,CAAEhB,OAAQ,OAAQgL,SAAU,SACtC,kBAAC/G,EAAA,EAAD,CAAYjD,MAAO,CAAEijB,MAAO,OAAQC,UAAW,SAC5CJ,EAAa3lB,OADhB,iBAGC6lB,GACCA,EAAsB,GAAtB,KAAiCtwB,KAAI,SAACywB,EAAahjB,GACjD,OACE,yBACEE,IAAG,kBAAaF,GAChBH,MAAO,CACLC,QAAS,eACTqB,gBAAiB,aACjB8hB,aAAc,OACdtiB,QAAS,MACTc,OAAQ,SAEV,yBAAK5B,MAAO,CAAEijB,MAAO,SACnB,kBAAC,GAAD,CACEzjB,MAAO2jB,EAAYjD,SAASxtB,KAAI,SAACgT,GAC/B,MAAO,CAAExQ,KAAMwQ,MAEjB9F,0BACE1L,QAAQC,OAId,0BAAM6L,MAAO,CAAEijB,MAAO,UAAtB,IAAmCE,EAAW,WAGhD,SAuDd,IAeME,GAAoBR,cAfI,SAAClb,GAAW,IAChCka,EAA2Bla,EAA3Bka,aAAc/mB,EAAa6M,EAAb7M,SADiB,EAEOnD,mBAAS,IAFhB,mBAEhCoqB,EAFgC,KAEfuB,EAFe,KASvC,OANAlrB,qBAAU,WACRlE,QAAQC,IAAI,6BACR0tB,GAAgBA,EAAa1kB,OAAS,GACxCmmB,EAAmBzB,KAEpB,CAACA,EAAa1kB,SACbomB,EAAEC,WAAW1oB,GACRA,EAAS,CAAEinB,oBAEb,iCC1YT,SAAS0B,GAAaxkB,EAAGwP,GACvB,IAAMgU,GAAkB,kBAANxjB,EAAiBA,EAAIA,EAAEkW,YAAYmK,MAAM,KAC3D,GAAI7Q,GAAK,EAAG,OAAOgU,EAAE,GACrB,IAAIiB,EAAIjB,EAAE,IAAM,GAChB,GAAIiB,EAAEvmB,OAASsR,EAAG,MAAM,GAAN,OAAUgU,EAAE,GAAZ,YAAkBiB,EAAEC,OAAO,EAAGlV,IAChD,KAAOiV,EAAEvmB,OAASsR,GAAGiV,GAAK,IAC1B,MAAM,GAAN,OAAUjB,EAAE,GAAZ,YAAkBiB,GAEpB,IAeME,GAAmBf,cAfI,SAAClb,GACsBA,EAA1Ckc,eAD+B,IACfC,EAA0Bnc,EAA1Bmc,OAClBC,GAD4Cpc,EAAlBvE,IAAkBuE,EAAb7M,SACV6M,MAAMqc,gBAAgB,GAAG7oB,OAEhDsc,EAAU,kBAAM,+BAKpB,OAJIqM,EAAOlC,0BACTnK,EAAUqM,EAAOlC,yBAIjB,kBAAC,KAAgBqC,UAActc,EAC7B,kBAAC8P,EAAD,CAASoK,aAAckC,EAAWhC,gBAAiBgC,QAuBnDG,GAAc,SAAC,GAAmC,EAAjC/oB,MAAiC,EAA1BgpB,MAA2B,IACnDtT,EADkCuT,EAAgB,kCAElDC,EAAYhxB,OAAOuH,OAAO,GAAIwpB,GAQlC,OAPIA,EAAUN,OAAOnD,iBACnB0D,EAAS,SAAeD,EAAU9J,SAClCzJ,EAAOuT,EAAUN,OAAOnD,iBAGxB9P,EAAO,SAAClJ,GAAD,OAAW,kBAAC,KAAe2c,KAAS3c,IAG3C,kBAAC,KAAa2c,KAAd,CAAmBtkB,MAAO,CAAEjB,MAAO,SACjC,kBAAC8R,EAASwT,KAIVE,GAAkB,SAAC,GAAmC,EAAjCppB,MAAiC,EAA1B6E,MAA2B,IACvDtF,EADsC0pB,EAAgB,kCAK1D,OAHIA,EAAUN,OAAOlD,SACnBlmB,EAAO0pB,EAAUN,OAAOlD,OAAOwD,EAAUhhB,MAGzC,kBAAC,KAAakhB,KAAd,iBAAuBF,EAAvB,CAAkCpkB,MAAO,CAAE4B,OAAQ,UAChDlH,IAIP,SAAS8pB,GAAOC,GACdA,EAASC,KAAKC,cAActsB,MAAK,SAACusB,GAChCC,KACE,IAAIC,KAAK,CAACF,GAAS,CAAErvB,KAAM,6BAC3B,oBAwBN,SAASwvB,GACPC,EACAlvB,EACAmvB,EACA7D,GAEA,IAAI8D,EACEC,EAfR,SAA2BC,EAAWD,GACpC,OAAIA,EAAeC,GACVD,EAAeC,GAEf,CAAEnE,eAAe,GAWHoE,CACrBL,EAAaM,YACbL,GA6CF,MA3C+B,QAA3BD,EAAaO,WAAkD,UAA3BP,EAAaO,UACnDL,EAA0B,IAAI/D,GAC5BrrB,EACAkvB,EAAaM,YACbH,EACA/D,GAEkC,SAA3B4D,EAAaO,UACtBL,EAA0B,IAAIhE,GAC5BprB,EACAkvB,EAAaM,YACbH,EACA/D,GAEkC,aAA3B4D,EAAaO,UACtBL,EAA0B,IAAIlE,GAC5BlrB,EACAkvB,EAAaM,YACbH,EACA/D,GAEkC,eAA3B4D,EAAaO,UACtBL,EAA0B,IAAI/C,GAC5BrsB,EACA,WACAqvB,EACA/D,GAEkC,QAA3B4D,EAAaO,UACtBL,EAA0B,IAAI9E,GAAY+E,GAS1CjxB,QAAQiE,MAAR,iFAC4E6sB,EAAaO,UADzF,MAKKL,EAmjBMM,OAjjBS,SAAC,GAKlB,IAJL3B,EAII,EAJJA,eACAjkB,EAGI,EAHJA,0BACA6lB,EAEI,EAFJA,YACAlF,EACI,EADJA,kBAEMmF,EAAcnU,iBAAO,MADvB,EAG0BnX,IAAMzC,SAAS,IAHzC,mBAGGguB,EAHH,KAGYC,EAHZ,KAIEC,EAAe,SAACC,EAAY3qB,GAChC,IAAM4qB,EAAqBJ,EAAQlU,WACjC,SAACnW,GAAD,OAAYA,EAAOwqB,aAAeA,KAEhCE,EAAa,YAAOL,GACpBI,GAAsB,EACxBC,EAAcD,GAAsB,CAClCD,WAAYA,EACZ3qB,MAAOA,GAGT6qB,EAAc7a,KAAK,CAAE2a,WAAYA,EAAY3qB,MAAOA,IAEtDyqB,EAAWI,IAETb,EAAiB,CACnB3wB,cAAe,CAAEigB,MAAO,GACxBhT,UAAW,CAAEgT,MAAO,GACpBwR,SAAU,CAAElnB,MAAO,IAAK0V,MAAO,GAC/B0L,KAAM,CAAEphB,MAAO,IAAK0V,MAAO,GAC3ByL,SAAU,CACRnhB,MAAO,IACP0V,MAAO,EACP7U,0BAA2BA,GAE7BsmB,MAAO,CAAEnnB,MAAO,IAAK0V,MAAO,EAAG8L,kBAAmBA,IAGpDnmB,IAAMhC,WAAU,WAQd+tB,EACEV,EACG/yB,KAAI,SAACsyB,GAAD,OACHD,GACEC,EACAnB,EACAsB,EACAU,GACAO,0BAEH9gB,MAAK,SAAC5R,EAAG8R,GACR,OAAK9R,EAAE+gB,MAGFjP,EAAEiP,OAGA/gB,EAAE+gB,MAAQjP,EAAEiP,MAAQ,GAFjB,EAHD,QAQd,CAACoP,IA5DA,MA8D0BlsB,mBAC5B8tB,EACG/yB,KAAI,SAACsyB,GAAD,OACHD,GACEC,EACAnB,EACAsB,GACAiB,0BAEH9gB,MAAK,SAAC5R,EAAG8R,GACR,OAAK9R,EAAE+gB,MAGFjP,EAAEiP,OAGA/gB,EAAE+gB,MAAQjP,EAAEiP,MAAQ,GAFjB,EAHD,MAzEX,mBA8DG4R,EA9DH,KA8DYF,EA9DZ,OAiFsCxuB,mBAAS,IAjF/C,mBAiFG6hB,EAjFH,KAiFc8M,EAjFd,OAuFoB3uB,mBAASksB,GAvF7B,mBAuFG7e,EAvFH,KAuFSuhB,EAvFT,KAwFEC,EAAchJ,uBAClB,SAACiJ,GACCf,EAAY7S,QAAQ6T,WAAWD,KAEjC,CAACf,IAGHttB,qBAAU,WACRmuB,EAAQ1C,KACP,CAACA,IAjGA,MAkGoClsB,mBAAS,IAlG7C,mBAkGGgvB,EAlGH,KAkGaC,EAlGb,KAyHEC,EAAoB,SAAC1rB,EAAO2oB,EAAQ1B,GAExC,IAAM0E,EAAmBhD,EAAOzC,sBAC9B,CAAElmB,MAAOinB,GACTjnB,GAEF,MAAO,CACLA,MAAO2rB,EACPzmB,IAAI,GAAD,OAAKyjB,EAAO5uB,KAAZ,YAAoB4xB,KAGrBC,EAAqCxT,mBACzC,WACE,OAAO8S,EAAQ3zB,KAAI,SAACoxB,GAElB,GAAoB,iBAAhBA,EAAOvuB,KAAyB,CAClC,IAAMjB,EAAQqyB,EAAS5f,MACrB,SAACzS,GAAD,OAAWA,EAAMwxB,aAAehC,EAAO5uB,QAErC8xB,EAAgB1yB,EAChBA,EAAM2yB,cACN,CAAErM,UAAW,GAAKC,UAAW,KAEjC,MAAO,CACLiL,WAAYhC,EAAO5uB,KACnBgyB,SAAU,SAAC/rB,GAAD,OACR0rB,EAAkB1rB,EAAO2oB,EAAQkD,KAEhC,GAAoB,eAAhBlD,EAAOvuB,KAAuB,CACvC,IAAMjB,EAAQqyB,EAAS5f,MACrB,SAACzS,GAAD,OAAWA,EAAMwxB,aAAehC,EAAO5uB,QAErC8xB,EAAgB1yB,EAAQA,EAAM2yB,cAAgB,KAElD,MAAO,CACLnB,WAAYhC,EAAO5uB,KACnBgyB,SAAU,SAAC/rB,GAAD,OACR0rB,EAAkB1rB,EAAO2oB,EAAQkD,KAGvC,MAAO,CAAElB,WAAYhC,EAAO5uB,WAGhC,CAACmxB,EAASM,IApKR,EAyKgChvB,mBAAS,CAC3C0uB,EAAQ3zB,KAAI,SAACoxB,GAAD,MAAa,CACvBgC,WAAYhC,EAAO5uB,KACnBiyB,iBAAiB,QAHdC,EAzKH,sBAkL0BzvB,mBAC5B0uB,EAAQ3zB,KAAI,SAACoxB,GACX,MAAO,CACLgC,WAAYhC,EAAO5uB,KACnB6J,MAAO+kB,EAAO/kB,MAAQ+kB,EAAO/kB,MAAQ,SAJpCsoB,EAlLH,sBA2LgC1vB,mBAClC0uB,EAAQ3zB,KAAI,SAACoxB,GACX,MAAO,CACLgC,WAAYhC,EAAO5uB,KACnBoyB,UAAW,SAACnsB,EAAOG,EAAQ8H,GAEzB,OAAI0gB,EAAOzC,sBACFyC,EAAOzC,sBAAsB/lB,EAAQH,EAAOiI,GAE9CmkB,KAAoBC,iBAAiBrsB,EAAOG,EAAQ8H,SAT5DqkB,EA3LH,sBA0MwB9vB,mBAC1B0uB,EAAQ3zB,KAAI,SAACoxB,GACX,MAAO,CACL5uB,KAAM4uB,EAAO5uB,KACb4wB,WAAYhC,EAAO5uB,KACnBK,KAAM,SACNmyB,mBAAmB,EACnBC,eAAe,OAPdC,EA1MH,sBAsN+BjwB,mBACjC0uB,EACG/qB,QAAO,SAACwoB,GAAD,OAAYA,EAAO7C,iBAC1BvuB,KAAI,SAACoxB,GAAD,OAAYA,EAAO5uB,SAHrB2yB,EAtNH,oBAuSJ,OACE,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,CAAM9iB,KAAMA,EAAMqhB,QAASA,GACzB,kBAAC,KAAD,MACA,kBAAC,KAAD,CACEM,SAAUA,EACVoB,iBA1MY,SAACC,GAAiB,IAAD,EA1QDC,EA4Q9BC,EAAgB,QA5QcD,EA4QmBtB,EAAjC,EAAoBqB,EA3QxB1sB,QAChB,SAAC6sB,GAAD,OACGF,EAAYG,MACX,SAACC,GAAD,OACEF,EAAerC,aAAeuC,EAAgBvC,wBAuQhC,aAAG,EAA0C,GACjE,GAAIoC,EAAkB,CACpB,IAAII,EAAgB3C,EAAQ5e,MAC1B,SAACwhB,GAAD,OAAgBL,EAAiBpC,aAAeyC,EAAWzC,cAGxDwC,IACHA,EAAgB,CAAEntB,MAAO,CAAEyf,UAAW,GAAKC,UAAW,OAExD,IAAM2N,EAAgBR,EAAYvW,WAChC,SAACgX,GAAD,OAAcA,EAAS3C,aAAeoC,EAAiBpC,cAEzDkC,EAAYQ,GAAiBn1B,OAAOuH,OAAOotB,EAAYQ,GAAgB,CACrEvB,cAAeqB,EAAcntB,QAIjCyrB,EAAoBoB,IAwLdU,uBAAqB,EACrBC,iBAAkBvB,IAEpB,kBAAC,KAAD,CAAcwB,WAAYhB,IAC1B,kBAAC,KAAD,CACEe,iBAAkB5B,IAEpB,kBAAC,KAAD,CAAmB8B,WA1FC,SAACtzB,EAAMyP,EAAM8jB,GACrC,MAAa,WAATvzB,EACGyP,EAAK7H,OAGH6H,EAFE,KAIJA,KAoFH,kBAAC,KAAD,CAAgB2gB,QAASA,EAASoD,gBAAiBnD,IACnD,kBAAC,KAAD,CACE+C,iBAAkBlB,IACpB,kBAAC,KAAD,CACEjO,UAAWA,EACXwP,kBAxOa,SAACxI,GACpB8F,EAAqB9F,MAyOjB,kBAAC,KAAD,MACA,kBAAC,KAAD,CAAce,cAAegD,GAAiBvlB,OAAQ,MACtD,kBAAC,KAAD,CACE6oB,yBAA0BA,IAE5B,kBAAC,KAAD,CAAqBR,oBAAqBA,IAC1C,kBAAC,KAAD,CAAgB4B,sBAAoB,IACpC,kBAAC,KAAD,CAAgBC,eAAa,IAC7B,kBAAC,KAAD,CAAgB3H,cAAe2C,KAC/B,kBAAC,KAAD,CACEiF,aAnGiB,SAACxhB,GAAW,IAAD,EACNhQ,oBAAS,GADH,mBAC3BrC,EAD2B,KACnBgU,EADmB,KAE9B8f,EAAgB,cACdtD,EAAane,EAAMvE,IAAIimB,UACvBC,EAAajD,EAAQtf,MAAK,SAAC+c,GAAD,OAAYA,EAAO5uB,MAAQ4wB,KAC3D,GAAIwD,EACF,GAAwB,iBAApBA,EAAW/zB,KAAyB,CACtC,IAAMg0B,EAAa5C,EAASlV,WAC1B,SAACnd,GAAD,OAAWA,EAAMwxB,aAAeA,KAE5BxxB,EAAQqyB,EAAS4C,GAIrBH,GAFsB,IAApBzhB,EAAMvE,IAAIjI,MAEI,UAAM,MAAMquB,OAC1BD,GADc,wBAECzD,EAFD,aAEgBrC,GAC9BnvB,EAAM2yB,cAAcrM,UACpB,GAJc,YAKX6I,GAAanvB,EAAM2yB,cAAcpM,UAAW,GALjC,KAOA,UAAM,MAAM2O,OAC1BD,GADc,wBAECzD,EAFD,iCAEoCrC,GAClDnvB,EAAM2yB,cAAcrM,UACpB,GAJc,aAKV6I,GAAanvB,EAAM2yB,cAAcpM,UAAW,GALlC,UAOb,GAAwB,eAApByO,EAAW/zB,KAAuB,CAC3C,IAAMg0B,EAAa5C,EAASlV,WAC1B,SAACnd,GAAD,OAAWA,EAAMwxB,aAAeA,KAE5BxxB,EAAQqyB,EAAS4C,GAIrBH,GAFsB,IAApBzhB,EAAMvE,IAAIjI,MAEI,UAAM,MAAMquB,OAC1BD,GADc,2CAEoBj1B,EAAM2yB,cACvCv0B,KAAI,SAACiL,GAAD,OAAUA,EAAKxI,SACnBs0B,KAAK,MAEQ,UAAM,MAAMD,OAC1BD,GADc,uDAKlBH,EAAgB,UAAMtD,EAAN,eAAuBne,EAAMvE,IAAIjI,OAGrD,OACE,kBAAC,IAAMwO,SAAP,KACE,wBAAI9J,UAAWC,KAAO4pB,gBACpB,wBAAIC,QAAS,GAAInpB,QAAS,kBAAM8I,GAAWhU,KACzC,kBAAC2N,EAAA,EAAD,CACEpD,UAAWC,KAAO8pB,mBAClB1mB,QAAS,YACRkmB,MAIL9zB,GACA,kBAAC,KAAcu0B,IAAQliB,EAAQA,EAAM7M,YAsCrC6tB,iBAAkBvB,EAClB0C,qBAAsB,SAACniB,GAAD,OACpB,kBAACic,GAAD,eACEyC,QAASA,EACTxC,eAAgBA,GACZlc,KAERoiB,iBAAkB,WAChB,OAAO,+BAETC,wBAAsB,EACtBC,kBAAmB,SAACC,GAClB,IAAIC,GAAiB,EAIrB,GAAIxD,EAASxpB,OAAS,EAAG,CACvB,IAAMitB,EAAeF,EAAUG,SAASjnB,IAAIimB,UAC5Cc,EACExD,EAASA,EAASxpB,OAAS,GAAG2oB,aAAesE,EAEjD,OACE,wBAAIpqB,MAAOmqB,EAAiB,CAAElqB,QAAS,QAAW,UAIxD,kBAAC,KAAD,MACA,kBAAC,KAAD,CAAaumB,YAAaA,IAE1B,kBAAC,KAAD,MACA,kBAAC,KAAD,CAAeyC,sBAAoB,KAErC,kBAAC,KAAD,CACE5S,IAAKqP,EACL1gB,KAAMA,EACNqhB,QAASA,EACT7B,OAAQA,GACRhL,UAAWA,M,6HCxkBInmB,OAAOi3B,OAAO,CACnCC,UAAW,KACXC,SAAU,OAQZ,IA2IeC,GA3Ic,SAAC,GAA6B,IAA3BjrB,EAA0B,EAA1BA,MAAOkrB,EAAmB,EAAnBA,aAAmB,EAEhBtwB,IAAMzC,SAAS,MAFC,mBAEjDgzB,EAFiD,KAEnCC,EAFmC,OAGdxwB,IAAMzC,SAAS,MAHD,mBAGjD+H,EAHiD,KAGlCmrB,EAHkC,OAIJzwB,IAAMzC,SACxD+yB,EAAa73B,IALyC,mBAIjD4M,EAJiD,KAIjCqrB,EAJiC,KAOlDn0B,EAAM+zB,EAAa/zB,IAEzByB,qBAAU,WACR,IAAI2yB,EAAevrB,EAAMiS,WAAU,SAAC9T,GAAD,OAAUA,EAAK9K,KAAO4M,KACzD,GAAIsrB,GAAgB,EAAG,CACrB,IAAIC,EAAcxrB,EAAMurB,GACxBlM,SACGoM,cAAc,eACdC,cAAcC,YAAYH,EAAYI,OAAQ,QAElD,CAAC3rB,IAWJ,IAAM4rB,EAAoB,SAACx4B,GAGvBi4B,EADEj4B,IAAO4M,EACiB,KAEA5M,IAI9B,SAASy4B,IAGPD,GAAkB,SAACE,GACZA,GACHF,EAAkB7rB,EAAM,GAAG3M,IAE7B,IAAMk4B,EAAevrB,EAAMiS,WAAU,SAAC9T,GAAD,OAAUA,EAAK9K,KAAO04B,KAG3D,OAAIR,IAAiBvrB,EAAMrC,OAAS,IAAuB,IAAlB4tB,EAChCvrB,EAAM,GAAG3M,GAEX2M,EAAMurB,EAAe,GAAGl4B,MAkBnC,OADAqB,QAAQC,IAAI,qBAAsBwC,GAEhC,yBAAKqJ,MAAO,CAAEsB,gBAAiB,UAC7B,yBAAKtB,MAAO,CAAEhB,OAAQ,SACpB,4BACEnM,GAAI,aACJkM,MAAO,OACPC,OAAQ,OACRwsB,IAAK70B,KAET,yBACEqJ,MAAO,CACL4B,OAAQ,SACR7C,MAAO,cACPkB,QAAS,OACTwrB,iBAAkB,YAClBC,oBAAqB,0BAEvB,yBAAK1rB,MAAO,CAAE2rB,QAAS,EAAG3hB,SAAU,WAClC,kBAAC,GAAD,CACEtK,cAAeA,EACfC,YAAa,SAAC9M,GAAD,OAAQg4B,EAAiBh4B,IACtC4M,eAAgBA,EAChBD,MAAOA,EACPI,0BAA2B,SAACjC,GAAD,OACzB0tB,EAAkB1tB,EAAK9K,OAE3B,kBAAC,KAAD,MACG,cAAGmM,OAAH,IAAWD,EAAX,EAAWA,MAAX,OACC,kBAAC,GAAD,CACEA,MAAOA,EACPW,cAAeA,EACfmrB,iBAAkB,SAACh4B,GAAD,OAAQg4B,EAAiBh4B,IAC3C4M,eAAgBA,EAChBD,MAAOA,EACP6rB,kBAAmB,SAAC1tB,GAAD,OACjB0tB,EAAkB1tB,EAAK9K,WAKjC,yBAAKmN,MAAO,CAAE2rB,QAAS,EAAG5sB,MAAO,OAAQC,OAAQ,SAC/C,yBACEgB,MAAO,CACL4B,OAAQ,SACR3B,QAAS,OACT0T,eAAgB,WAElB,kBAAC6I,GAAA,EAAD,CAAYxW,aAAW,SAASxF,QA7D1C,WACOf,GACH4rB,EAAkB7rB,EAAM,GAAG3M,IAE7B,IAAMk4B,EAAevrB,EAAMiS,WAAU,SAAC9T,GAAD,OAAUA,EAAK9K,KAAO4M,KAGvDsrB,EAAe,GAGnBM,EAAkB7rB,EAAMurB,EAAe,GAAGl4B,MAoDhC,kBAAC,KAAD,OAED83B,GACC,kBAACnO,GAAA,EAAD,CAAYxW,aAAW,SAASxF,QAhG5C,WACEorB,cAAcjB,GACdC,EAAgB,QA+FJ,kBAAC,KAAD,QAGFD,GACA,kBAACnO,GAAA,EAAD,CAAYxW,aAAW,SAASxF,QAzG5C,WAEEoqB,EAAgBiB,YAAYP,EAAe,QAwG/B,kBAAC,KAAD,OAIJ,kBAAC9O,GAAA,EAAD,CAAYxW,aAAW,SAASxF,QAAS8qB,GACvC,kBAAC,KAAD,YAWRQ,GAAW,SAACnkB,GAAW,IAEzB5I,EAME4I,EANF5I,MACAS,EAKEmI,EALFnI,MACA6rB,EAIE1jB,EAJF0jB,kBACAR,EAGEljB,EAHFkjB,iBACAprB,EAEEkI,EAFFlI,eACAC,EACEiI,EADFjI,cAeF,IAAMugB,EAAc1M,mBAAQ,WAC1B,OAAOvR,MAEJE,OAAOF,IAAUxC,GAAO,SAAC7B,GAAD,OAAUA,EAAKwiB,SACvCle,MAAM,CAAC,EAAGlD,EAAQ,MACpB,CAACS,EAAOT,IAEX,OACE,yBAAKA,MAAOA,EAAOC,OAAQ,IACxBQ,EAAM9M,KAAI,SAACiL,EAAMwC,GAChB,IAAMd,EAvBZ,SAA8B1B,EAAM8B,EAAgBC,GAClD,IAAIL,EASJ,OARII,GAAkB9B,EAAK9K,KAAO4M,GAEvBC,GAAiB/B,EAAK9K,KAAO6M,KADtCL,EAAU,IAIR1B,EAAK9K,KAAO6M,GAAiB/B,EAAK9K,KAAO4M,IAC3CJ,EAAU,GAELA,EAaae,CACdzC,EACA8B,EACAC,GAGF,OACE,0BACEW,IAAG,eAAUF,GACbG,aAAc,kBAAMuqB,EAAiBltB,EAAK9K,KAC1C0N,aAAc,kBAAMsqB,EAAiB,OACrCrqB,QAAS,kBAAM6qB,EAAkB1tB,IACjCoB,MAAO,IACPE,EAAGghB,EAAYtiB,EAAKwiB,MACpBnhB,OAAQ,GACRK,QAASA,SC/LrB,SAASf,GAAQytB,GACf,OAAO,IAAIC,SAAQ,SAAC14B,GAAD,OAAa4nB,WAAW5nB,EAASy4B,M,SAgKvCxL,G,uFAAf,WAAiC/rB,EAAewB,EAAQ2lB,EAAKjS,GAA7D,SAAAhW,EAAA,sEACQ4K,GAAQ,KADhB,gCAGSqd,GAHT,4C,sBAMesQ,OAlKS,SAACtkB,GAAW,IAAD,EACLhQ,mBAAS,KADJ,mBAC1BqH,EAD0B,KAClBktB,EADkB,OAEyBv0B,mBAAS,MAFlC,mBAE1Bw0B,EAF0B,KAEHC,EAFG,OAM7BvuB,qBAAW1D,IADbY,EAL+B,EAK/BA,eAAgBE,EALe,EAKfA,WALe,4CAQjC,WAAyC0C,GAAzC,iBAAAjK,EAAA,6DACEQ,QAAQC,IAAI,wCAAyCwJ,GAG/B,2BAJxB,SAKsBnK,EAA4BmK,EAAK9K,IALvD,QAKMw5B,EALN,QAMc/0B,UACJg1B,EAAiBD,EAAQv2B,KAAKpD,KAAI,SAACiL,GACvC,MAAO,CACL9K,GAAI8K,EAAK9K,GACTqC,KAAMyI,EAAK4uB,SACXpM,KAAMxiB,EAAKuQ,YACXkd,OAAQztB,EAAKytB,OACbz0B,IAAKgH,EAAKhH,IACV61B,cAAe7uB,EAAKnJ,cACpBi4B,SAAU9uB,EAAK6O,aAGnB4f,EAAyBE,IAlB7B,4CARiC,4BA8C7B90B,GAAe,sBAAC,4BAAA9D,EAAA,sEACK0C,GAAsB2E,GAD3B,cACZ3D,EADY,QAETtB,KAAOsB,EAAStB,KAAKpD,KAAI,SAAC8uB,GAIjC,IACEA,EAAMtB,SAAWprB,KAAKC,MAAL,WAAeysB,EAAMtB,SAArB,MACjB,MAAOlrB,GACPd,QAAQiE,MAAR,kDAC6CqpB,EAAMhtB,cADnD,qFAGAgtB,EAAMtB,SAAW,GAEnB,OAAOsB,KAdS,kBAgBXpqB,GAhBW,2CAiBjB,CAAC2D,EAAgBE,IA/Da,mBA2C/ByxB,EA3C+B,KA4C/BC,EA5C+B,KA6C/BC,EA7C+B,OAiEKj1B,mBAAS,MAjEd,mBAiE1B8tB,EAjE0B,KAiEboH,EAjEa,OAmE8Cr1B,GAAe,sBAAC,sBAAA9D,EAAA,sEAChFwC,GAAU,eADsE,mFAE5F,IArE8B,mBAmE5B42B,EAnE4B,KAmEAC,EAnEA,KAmE0BC,EAnE1B,KA6GjC,OArCA50B,qBAAU,WACR,IAAIqtB,EAAcuH,EAEZC,EAAgB,CAAC,MAEjBC,EAAgB,CAAC,gBAAiB,UAEpCzH,IAoBFA,GALAA,GANAA,GANAA,EAAcA,EAAY0H,OAAO,CAC/B7H,YAAa,WACbC,UAAW,aACX6H,iBAAkBJ,EAAiB7vB,UAGXgwB,OAAO,CAC/B7H,YAAa,QACbC,UAAW,MACX6H,iBAAkBJ,EAAiB7vB,OAAS,KAGpBzK,KAAI,SAACoxB,GAE7B,OADAA,EAAOoJ,cAAgBA,EAAc5oB,SAASwf,GACvCA,MAGiBxoB,QACxB,SAACwoB,GAAD,OAAamJ,EAAc3oB,SAASwf,EAAOwB,iBAI/CuH,EAAepH,KACd,CAACuH,IACJ94B,QAAQC,IAAI,cAAesxB,GAIzB,6BACGiH,GAAqBI,GACpB,6BACE,kBAAC,KAAD,CACEO,QAAM,EACNC,SAAU,SAACC,GACTrB,EAAUqB,EAAYF,OAAOruB,WAE9B,SAACwuB,GAEA,OADAt5B,QAAQC,IAAI,SAAU6K,GAEpB,yBAAKqX,IAAKmX,EAAY3tB,UAAW4tB,KAAaC,QAC5C,kBAAC7hB,EAAA,EAAD,CAAU7M,OAAQA,EAAQkE,QAAQ,OAAOyqB,UAAU,cAM9DhB,GAAmBI,GAA4B,kBAAC5gB,GAAA,EAAD,CAAOC,SAAS,SAC9D,kBAACC,GAAA,EAAD,cAD8C,iCAErB,kDAE1BugB,GAAmBnH,GAAe,6BACjC,kBAAC,GAAD,CACE5B,eAAgB+I,EAChBnH,YAAaA,EACb7lB,0BAxIyB,4CAyIzB2gB,kBAAmBA,KACpB4L,GACC,kBAAC3Y,GAAA,EAAD,CACER,MAAM,EACNS,QAAS,kBAAM2Y,EAAyB,OACxCpsB,MAAO,CAAEsB,gBAAiB,cAC1BsS,kBAAgB,qBAChBC,mBAAiB,4BACjB,kBAAC,GAAD,CACErU,MAAO2sB,EACPzB,aAAcyB,EAAsB,SC7JnCyB,GAVD,SAAC,GAAiB,EAAfrV,SAEf,OACE,kBAAC,IAAM5O,SAAP,KACE,kBAAC,GAAD,Q,ogBCSN,IAqBMkkB,GAAU/c,IAAOC,IAAV,MA8BE+c,gBAnDF,SAAC,GAAkB,IAAhBvV,EAAe,EAAfA,SACd,OACE,kBAACsV,GAAD,KACE,kBAACE,EAAA,EAAD,CAAiBluB,UAAU,oBACzB,kBAACmuB,EAAA,EAAD,CAAe3tB,IAAKkY,EAASlY,IAAK/B,QAAS,IAAK2vB,WAAW,QACzD,6BAASpuB,UAAU,iBACjB,kBAAC,IAAD,CAAQ0Y,SAAUA,GAChB,kBAAC,IAAD,CAAO2V,KAAK,QAAQnrB,UAAWorB,KAC/B,kBAAC,IAAD,CAAOD,KAAK,SAASnrB,UAAWqrB,KAChC,kBAAC,IAAD,CAAOF,KAAK,UAAUnrB,UAAWmN,KACjC,kBAAC,IAAD,CAAOge,KAAK,YAAYnrB,UAAWuV,KACnC,kBAAC,IAAD,CAAO4V,KAAK,SAASnrB,UAAW6qB,KAChC,kBAAC,IAAD,CAAOM,KAAK,UAAUnrB,UAAW2V,a,2RCvBhC,SAAS2V,GAAT,GAAyD,IAAtC5sB,EAAqC,EAArCA,UAAU6sB,EAA2B,EAA3BA,QAAQC,EAAmB,EAAnBA,iBAAmB,EACvCn0B,IAAMzC,UAAS,GADwB,mBAC9Dqd,EAD8D,KACrDwZ,EADqD,KASrE,OAAQ/sB,GAAa6sB,EAAU,oCAC3B,kBAACG,GAAA,EAAD,CACEzZ,QAASA,EACTL,SATe,SAAC+Z,GAEpBA,EAAIC,kBACJJ,EAAiB9sB,EAAUitB,EAAI7xB,OAAOmY,SACtCwZ,EAAWE,EAAI7xB,OAAOmY,UAMlB/f,MAAM,UACNggB,WAAY,CAAE,aAAc,iCAE9B,kBAAChS,EAAA,EAAD,CAEsBhO,MAAM,UACNiO,QAAQ,YACPzB,IAElB,KCIX,IAAMV,GAAYC,YAAW,CACzBH,KAAM,CACFI,SAAU,IACVC,SAAU,EACVJ,QAAQ,OAEZK,MAAO,CACHL,QAAS,QAEbW,UAAW,CACPC,SAAU,MACVzM,MAAM,QACN6P,WAAW,OACXzD,OAAO,WAEXiE,KAAK,CACDjE,OAAO,UACP6hB,UAAU,OACV1Y,WAAW,OAEf7I,OAAQ,CACJ1B,QAAS,eACT2B,OAAQ,QACR3D,UAAW,cAEfM,MAAO,CACHmD,SAAU,IAEdG,IAAK,CACDC,aAAc,MAItB,SAAS8sB,GAAT,GAA2H,IAArGC,EAAoG,EAApGA,OAAO1uB,EAA6F,EAA7FA,MAAM2uB,EAAuF,EAAvFA,4BAA4BC,EAA2D,EAA3DA,sBAAsB1rB,EAAqC,EAArCA,WAAW2rB,EAA0B,EAA1BA,cAAcrzB,EAAY,EAAZA,WAEtGmiB,EAAe,GACnBniB,EAAWjJ,KAAI,SAAAwY,GAAC,OAAE4S,EAAa5S,IAAK,KAHkF,MAI7EvT,mBAASmmB,GAJoE,mBAI/GmR,EAJ+G,KAI9FC,EAJ8F,KAMtH,SAASX,EAAiB9sB,EAAUuT,GAChC,IAAIma,EAAY,eAAQF,GACxBE,EAAa1tB,GAAWuT,EACxBka,EAAcC,GAIlB,IAAIC,EAAazzB,EAAWjJ,KAAI,SAAAwY,GAAC,OAAE,kBAACmjB,GAAD,CAAUhuB,IAAO6K,EAAGojB,SAAYnuB,GAASkD,GAAclD,GAAS6uB,IAAmC,WAAhBH,EAAOt5B,KAAmBkM,UAAYyJ,EAAGqjB,iBAAkBA,OAEjL,OAAQ,kBAAC1O,GAAA,EAAD,CACRxf,IAAKwuB,EAAOpkB,OAEZ4kB,SAAUlvB,IAAU6uB,EACpBxuB,QAAS,SAAC5D,GAAD,OAAWkyB,EAA4BlyB,EAAOuD,EAAM,CAACgF,MAAK,EAAM2B,OAAO+nB,EAAM,IAAQlzB,WAAWszB,KACzG3uB,aAAc,kBAAIyuB,EAAsB5uB,IACxCI,aAAc,kBAAIwuB,EAAsBC,KAEvC,yBAAKhvB,MAAO,CAAE,MAAS,UAAvB,IAAoC,kBAACiD,EAAA,EAAD,CAEjChO,MAAM,UACNiO,QAAQ,YACP2rB,EAAOpkB,SAEZ,yBAAKjK,QAAS,SAACkuB,GAAD,OAAOA,EAAIC,oBACxBS,IAOU,SAASE,KAAY,IAAD,EAGiBzxB,qBAAW1D,IAAnDyB,EAHuB,EAGvBA,QAASD,EAHc,EAGdA,WAAWS,EAHG,EAGHA,gBAGxBqqB,EAAU,CAAC,CAAEhc,OAAQ,eAAgBpK,IAAK,OAAS9K,KAAK,WAExDqG,GACAvI,OAAOD,KAAKwI,GAASlJ,KAAI,SAAAsU,GAAC,OAAEyf,EAAQtb,KAAK,CAAEV,OAAQ,MAAQzD,EAAG3G,IAAK2G,EAAIzR,KAAK,cAchF,IAAM+M,EAAUvB,KAvBe,EAwBC3G,IAAMzC,SAA6B,MAxBpC,mBAwBxBoe,EAxBwB,KAwBduG,EAxBc,OAyBWliB,IAAMzC,SAAS,GAzB1B,mBAyBxBq3B,EAzBwB,KAyBTO,EAzBS,KAiCzBC,EAAsB,SAAC5yB,EAAsCuD,EAAesvB,GAC9EF,EAAiBpvB,GACjB/D,EAAgBqzB,GAIhBnT,EAAY,OAvCe,EA2CE3kB,mBAASq3B,GA3CX,mBA2C1B3rB,EA3C0B,KA2Cf4B,EA3Ce,KA6C3B8pB,EAAwB,SAAC5zB,GACzB8J,EAAe9J,IAQnB,OAAUQ,EACN,yBAAKkE,UAAWyC,EAAQzB,KAAMb,MAAO,CAAEC,QAAS,OAAQC,cAAe,gBACnE,kBAAC,KAAD,CAAM6C,UAAU,MAAMiD,aAAW,aAAanG,UAAWyC,EAAQzB,MAC7D,kBAACoW,GAAA,EAAD,CACIY,QAAM,EACN6X,gBAAc,OACdC,gBAAc,YACd3pB,aAAW,aACXxF,QAlCY,SAAC5D,GAEzB0f,EAAY1f,EAAM6f,iBAkCN,kBAACvF,GAAA,EAAD,CAAc0Y,QAAQ,aAAaC,UAAWpJ,EAAQuI,GAAevkB,WAG7E,kBAAC8U,GAAA,EAAD,CACI1sB,GAAG,YACHkjB,SAAUA,EACVyJ,aAAW,EACXxM,KAAMuJ,QAAQxG,GACdtC,QAvBQ,WAChB6I,EAAY,QAwBHmK,EAAQ/zB,KAAI,SAACm8B,EAAQ1uB,GAAT,OACX,kBAACyuB,GAAD,CAAavuB,IAAKwuB,EAAOpkB,OAAQpH,WAAYA,EAAY2rB,cAAgBA,EAAerzB,WAAaA,EAAYozB,sBAAuBA,EAAuBD,4BAA+BU,EAAqBX,OAAQA,EAAQ1uB,MAAOA,SArBjO,qCCjH3B,IAEMY,GAAYC,aAAW,SAACP,GAAD,OAC3BqvB,aAAa,CACXjvB,KAAM,CACJZ,QAAS,QAEX8vB,WAAY,CAGVruB,SAAU,IAEZsuB,OAAQ,CACN,mBAAoB,UACpBC,OAAQxvB,EAAMwvB,OAAOC,OAAS,EAC9BC,WAAY1vB,EAAM2vB,YAAYC,OAAO,CAAC,QAAS,UAAW,CACxDC,OAAQ7vB,EAAM2vB,YAAYE,OAAOC,MACjCpiB,SAAU1N,EAAM2vB,YAAYjiB,SAASqiB,iBAGzCC,YAAa,CACXjmB,WArBc,IAsBdzL,MAAM,eAAD,OAtBS,IAsBT,OACLoxB,WAAY1vB,EAAM2vB,YAAYC,OAAO,CAAC,QAAS,UAAW,CACxDC,OAAQ7vB,EAAM2vB,YAAYE,OAAOC,MACjCpiB,SAAU1N,EAAM2vB,YAAYjiB,SAASuiB,kBAGzCC,WAAY,CACVC,YAAa,IAEfC,KAAM,CACJ5wB,QAAS,QAGXiwB,OAAQ,CACNnxB,MApCc,IAqCd+xB,WAAY,EACZC,WAAY,UAEdC,WAAY,CACVjyB,MAzCc,IA0CdoxB,WAAY1vB,EAAM2vB,YAAYC,OAAO,QAAS,CAC5CC,OAAQ7vB,EAAM2vB,YAAYE,OAAOC,MACjCpiB,SAAU1N,EAAM2vB,YAAYjiB,SAASuiB,kBAGzCO,YAAY,cACVd,WAAY1vB,EAAM2vB,YAAYC,OAAO,QAAS,CAC5CC,OAAQ7vB,EAAM2vB,YAAYE,OAAOC,MACjCpiB,SAAU1N,EAAM2vB,YAAYjiB,SAASqiB,gBAEvCU,UAAW,SACXnyB,MAAO0B,EAAMoJ,QAAQ,GAAK,GACzBpJ,EAAM0wB,YAAYC,GAAG,MAAQ,CAC5BryB,MAAO0B,EAAMoJ,QAAQ,GAAK,IAG9BwnB,QAAQ,aACNpxB,QAAS,OACTyT,WAAY,SACZC,eAAgB,WAChB7S,QAASL,EAAMoJ,QAAQ,EAAG,IAEvBpJ,EAAM6wB,OAAOD,SAElBE,QAAS,CACPrwB,SAAU,EACVJ,QAASL,EAAMoJ,QAAQ,SAmNd2nB,GA9ME,SAAC,GAAQ,IAAD,0BAMnBp3B,IAAMyD,WAAW1D,IAJnB8B,EAFqB,EAErBA,SACAI,EAHqB,EAGrBA,gBACAM,EAJqB,EAIrBA,2BACA5B,EALqB,EAKrBA,eAGE02B,EACFx1B,GAAYlB,EACRkB,EAAS8K,MAAK,SAACmD,GAAD,OAAOA,EAAElU,QAAU+E,KAAgB0P,OACjD,GACAnI,EAAUvB,KACVN,EAAQixB,eAbS,EAcCt3B,IAAMzC,UAAS,GAdhB,mBAchBqb,EAdgB,KAcV2e,EAdU,KAwBjBC,EAAWx3B,IAAMy3B,YAGrB,SAAClqB,EAAO0O,GAAR,OAAgB,kBAAC,KAAD,eAAMI,SAAUJ,EAAYyb,GAAG,SAAYnqB,OACvDoqB,EAAY33B,IAAMy3B,YAGtB,SAAClqB,EAAO0O,GAAR,OAAgB,kBAAC,KAAD,eAAMI,SAAUJ,EAAYyb,GAAG,UAAanqB,OASxDimB,GARSxzB,IAAMy3B,YAGnB,SAAClqB,EAAO0O,GAAR,OAAgB,kBAAC,KAAD,eAAMI,SAAUJ,EAAYyb,GAAG,WAAcnqB,OAC9CvN,IAAMy3B,YAGrB,SAAClqB,EAAO0O,GAAR,OAAgB,kBAAC,KAAD,eAAMI,SAAUJ,EAAYyb,GAAG,aAAgBnqB,OACnDvN,IAAMy3B,YAGlB,SAAClqB,EAAO0O,GAAR,OAAgB,kBAAC,KAAD,eAAMI,SAAUJ,EAAYyb,GAAG,UAAanqB,QAe1D4Q,GAdWne,IAAMy3B,YAGnB,SAAClqB,EAAO0O,GAAR,OAAgB,kBAAC,KAAD,eAAMI,SAAUJ,EAAYyb,GAAG,WAAcnqB,OAWhDqqB,eAsDf,OACE,yBAAKnyB,UAAWyC,EAAQzB,MACtB,kBAACoxB,GAAA,EAAD,MACA,kBAACC,GAAA,EAAD,CACEC,SAAS,QACTtyB,UAAWuyB,aAAK9vB,EAAQ0tB,OAAT,gBACZ1tB,EAAQmuB,YAAczd,KAEzB,kBAACqf,GAAA,EAAD,KACE,kBAAC7V,GAAA,EAAD,CACEvnB,MAAM,UACN+Q,aAAW,cACXxF,QA5Ge,WACvBmxB,GAAQ,IA4GAW,KAAK,QACLzyB,UAAWuyB,aAAK9vB,EAAQquB,WAAT,gBACZruB,EAAQuuB,KAAO7d,KAElB,kBAAC,KAAD,OArEJuF,EAASga,SAASjuB,SAAS,QACtB,kBAACgrB,GAAD,MAGL,oCACE,kBAACkD,GAAA,EAAD,CAAa3yB,UAAWC,KAAO2yB,mBAC7B,kBAACC,GAAA,EAAD,CACEC,QAAQ,2BACR9/B,GAAG,qBACHsI,MAAOJ,EACP4Z,SAAUhY,EACVxH,MAAM,SACJkH,GACAJ,GACAA,EAASvJ,KAAI,SAACyI,GACZ,OACE,kBAAC0kB,GAAA,EAAD,CAAUxf,IAAKlF,EAAMnF,OAAQmF,MAAOA,EAAMnF,QACvCmF,EAAMnF,WAIdqG,GACC,kBAACwP,EAAA,EAAD,CACE3I,QAAQ,OACRnE,MAAO,MACPC,OAAQ,GACRgB,MAAO,CAAE4B,OAAQ,OAAQd,QAAS,SAJpC,2BAUN,kBAAC2B,EAAA,EAAD,CAAKmwB,GAAI,GACP,kBAAC3vB,EAAA,EAAD,CAAYC,QAAQ,SAAS2vB,QAAM,GAChCpB,OA0CT,kBAACqB,GAAA,EAAD,CACE5vB,QAAQ,YACRrD,UAAWuyB,aAAK9vB,EAAQ4tB,QAAT,oBACZ5tB,EAAQ0uB,WAAahe,GADT,eAEZ1Q,EAAQ2uB,aAAeje,GAFX,IAIf1Q,QAAS,CACPywB,MAAOX,cAAI,oBACR9vB,EAAQ0uB,WAAahe,GADb,eAER1Q,EAAQ2uB,aAAeje,GAFf,MAKb,yBAAKnT,UAAWyC,EAAQ+uB,SACtB,kBAAC7U,GAAA,EAAD,CAAYhc,QAjIM,WACxBmxB,GAAQ,KAiIqB,QAApBlxB,EAAMwc,UACL,kBAAC,KAAD,MAEA,kBAAC,KAAD,QAIN,kBAAC9S,EAAA,EAAD,MACA,kBAAC,KAAD,KACG,CACC,CACE+T,KAAM,gBACNrrB,GAAI,OACJmgC,KAAMpB,EACNv8B,KAAM49B,MAER,CACE/U,KAAM,uBACNrrB,GAAI,QACJmgC,KAAMjB,EACN18B,KAAM69B,MASR,CACEhV,KAAM,gBACN8U,KAAMpF,EACN/6B,GAAI,QACJwC,KAAM89B,OAGRzgC,KAAI,SAACgI,EAAMyF,GACX,OAEE,kBAAC,IAAMwJ,SAAP,CAAgBtJ,IAAKF,GACnB,kBAAC8W,GAAA,EAAD,CAAUY,QAAM,EAAC9U,UAAWrI,EAAKs4B,MAC/B,kBAACI,GAAA,EAAD,KAzFhB,SAAkB14B,GAChB,IAAI24B,EAAY9a,EAASga,SAASjuB,SAAS5J,EAAK7H,IAC1CygC,EAAO54B,EAAKrF,KAClB,OAAOg+B,EACL,kBAACC,EAAD,CAAMtzB,MAAO,CAAE/K,MAAO,sBAAtB,KAEA,kBAACq+B,EAAD,MAmF2BC,CAAS74B,IACxB,kBAACwc,GAAA,EAAD,CAAc0Y,QAASl1B,EAAKwjB,aAOtC,kBAAC/T,EAAA,EAAD,MACA,kBAAC,GAAD,CAAc+G,WAAY8B,O,OCvRnBwgB,OA1Bf,WACE,OACE,yBAAK3zB,UAAU,OAEX,kBAAC,GAAD,KACE,kBAAC,IAAD,CAAc4zB,eAAgB,CAAC,SAAUC,aAAc,GACrD,yBAAK7zB,UAAWC,IAAO8J,WACrB,yBAAK/J,UAAWC,IAAO6zB,UACrB,kBAAC,GAAD,OAEF,yBAAK9zB,UAAWC,IAAO8zB,MACrB,kBAAC,GAAD,YCTIrX,QACW,cAA7BmC,OAAOnG,SAASsb,UAEe,UAA7BnV,OAAOnG,SAASsb,UAEhBnV,OAAOnG,SAASsb,SAASC,MACvB,2DCZNC,IAASnT,OACP,kBAAC,IAAMoT,WAAP,KACE,kBAAC,GAAD,OAEFnV,SAASC,eAAe,SDiIpB,kBAAmBmV,WACrBA,UAAUC,cAAcC,MACrB97B,MAAK,SAAA+7B,GACJA,EAAaC,gBAEd77B,OAAM,SAAAL,GACLjE,QAAQiE,MAAMA,EAAMI,a,mBEhJ5B/F,EAAOC,QAAU,CAAC,gBAAkB,qCAAqC,UAAY,+BAA+B,cAAgB,mCAAmC,eAAiB,oCAAoC,mBAAqB,wCAAwC,mBAAqB,2C","file":"static/js/main.0700daa1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\",\"header\":\"App_header__3ZZ1n\",\"logo\":\"App_logo__1ItuU\",\"sidePane\":\"App_sidePane__3RleR\",\"main\":\"App_main__3ZkGI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spin\":\"ProvenanceTable_spin__3Jw--\",\"groupHeaderRow\":\"ProvenanceTable_groupHeaderRow__pwvw-\",\"groupHeaderContent\":\"ProvenanceTable_groupHeaderContent__1Zlne\",\"rotate\":\"ProvenanceTable_rotate__XaLA9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProvenanceIsolatedNodes_wrapper__3cJfW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"TableDataLoader_loader__1QxY3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"SidePane_logo__3vZO1\",\"SelectedTaskInput\":\"SidePane_SelectedTaskInput__1nreK\"};","var map = {\n\t\"./1_manual.png\": 438,\n\t\"./1_supported.png\": 439,\n\t\"./23_manual.png\": 440,\n\t\"./2_supported.png\": 441,\n\t\"./41_manual.png\": 442,\n\t\"./44_manual.png\": 443,\n\t\"./47_manual.png\": 444,\n\t\"./4_manual.png\": 445,\n\t\"./54_manual.png\": 446,\n\t\"./5_supported.png\": 447,\n\t\"./60_manual.png\": 448,\n\t\"./63_manual.png\": 449,\n\t\"./66_manual.png\": 450,\n\t\"./8_manual.png\": 451,\n\t\"./8_supported.png\": 452,\n\t\"./S-task01_adjMatrix.png\": 453,\n\t\"./S-task01_nodeLink.png\": 454,\n\t\"./S-task02_adjMatrix.png\": 455,\n\t\"./S-task02_nodeLink.png\": 456,\n\t\"./S-task03_adjMatrix.png\": 457,\n\t\"./S-task03_nodeLink.png\": 458,\n\t\"./S-task04_adjMatrix.png\": 459,\n\t\"./S-task04_nodeLink.png\": 460,\n\t\"./S-task05_adjMatrix.png\": 461,\n\t\"./S-task05_nodeLink.png\": 462,\n\t\"./S-task06_adjMatrix.png\": 463,\n\t\"./S-task06_nodeLink.png\": 464,\n\t\"./S-task07_adjMatrix.png\": 465,\n\t\"./S-task07_nodeLink.png\": 466,\n\t\"./S-task08_adjMatrix.png\": 467,\n\t\"./S-task08_nodeLink.png\": 468,\n\t\"./S-task09_adjMatrix.png\": 469,\n\t\"./S-task09_nodeLink.png\": 470,\n\t\"./S-task10_adjMatrix.png\": 471,\n\t\"./S-task10_nodeLink.png\": 472,\n\t\"./S-task11_adjMatrix.png\": 473,\n\t\"./S-task11_nodeLink.png\": 474,\n\t\"./S-task12_adjMatrix.png\": 475,\n\t\"./S-task12_nodeLink.png\": 476,\n\t\"./S-task13_adjMatrix.png\": 477,\n\t\"./S-task13_nodeLink.png\": 478,\n\t\"./S-task14_adjMatrix.png\": 479,\n\t\"./S-task14_nodeLink.png\": 480,\n\t\"./S-task15_adjMatrix.png\": 481,\n\t\"./S-task15_nodeLink.png\": 482,\n\t\"./S-task16_adjMatrix.png\": 483,\n\t\"./S-task16_nodeLink.png\": 484,\n\t\"./Screen Shot 2020-09-07 at 3.25.40 PM.png\": 485,\n\t\"./Screen Shot 2020-09-07 at 3.25.55 PM.png\": 486,\n\t\"./Screen Shot 2020-09-07 at 3.28.22 PM.png\": 487,\n\t\"./Screen Shot 2020-09-07 at 3.28.59 PM.png\": 488,\n\t\"./Screen Shot 2020-09-07 at 3.29.22 PM.png\": 489,\n\t\"./Screen Shot 2020-09-07 at 3.29.36 PM.png\": 490,\n\t\"./Screen Shot 2020-09-07 at 3.31.26 PM.png\": 491,\n\t\"./Screen Shot 2020-09-07 at 3.32.07 PM.png\": 492,\n\t\"./Screen Shot 2020-09-07 at 3.32.24 PM.png\": 493,\n\t\"./Screen Shot 2020-09-07 at 3.32.44 PM.png\": 494,\n\t\"./Screen Shot 2020-09-07 at 3.33.05 PM.png\": 495,\n\t\"./Screen Shot 2020-09-07 at 3.33.39 PM.png\": 496,\n\t\"./Screen Shot 2020-09-07 at 3.33.53 PM.png\": 497,\n\t\"./Screen Shot 2020-09-07 at 3.34.49 PM.png\": 498,\n\t\"./Screen Shot 2020-09-07 at 3.35.08 PM.png\": 499,\n\t\"./Screen Shot 2020-09-07 at 3.35.48 PM.png\": 500,\n\t\"./linear regression_supported.png\": 501,\n\t\"./outlier.png\": 502,\n\t\"./outlier_supported.png\": 503,\n\t\"./placeholder.png\": 504,\n\t\"./quadratic regression_supported.png\": 505,\n\t\"./quadratic_regression_supported.png\": 506,\n\t\"./skyline_supported.png\": 507\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 437;","module.exports = __webpack_public_path__ + \"static/media/1_manual.f6623c55.png\";","module.exports = __webpack_public_path__ + \"static/media/1_supported.1cf5a4a3.png\";","module.exports = __webpack_public_path__ + \"static/media/23_manual.7897333e.png\";","module.exports = __webpack_public_path__ + \"static/media/2_supported.1cf5a4a3.png\";","module.exports = __webpack_public_path__ + \"static/media/41_manual.0d1c762a.png\";","module.exports = __webpack_public_path__ + \"static/media/44_manual.4d5eb690.png\";","module.exports = __webpack_public_path__ + \"static/media/47_manual.76bbe7b6.png\";","module.exports = __webpack_public_path__ + \"static/media/4_manual.90daaa28.png\";","module.exports = __webpack_public_path__ + \"static/media/54_manual.14f9d17f.png\";","module.exports = __webpack_public_path__ + \"static/media/5_supported.8d122eba.png\";","module.exports = __webpack_public_path__ + \"static/media/60_manual.41c7e45f.png\";","module.exports = __webpack_public_path__ + \"static/media/63_manual.37f69dd8.png\";","module.exports = __webpack_public_path__ + \"static/media/66_manual.a3c1afce.png\";","module.exports = __webpack_public_path__ + \"static/media/8_manual.76272bc9.png\";","module.exports = __webpack_public_path__ + \"static/media/8_supported.79186644.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task01_adjMatrix.66aa102e.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task01_nodeLink.9aabba82.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task02_adjMatrix.17795797.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task02_nodeLink.0f658255.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task03_adjMatrix.3efe1333.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task03_nodeLink.cabb8101.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task04_adjMatrix.f05a898c.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task04_nodeLink.921a839d.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task05_adjMatrix.dca03e38.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task05_nodeLink.a6bb33b2.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task06_adjMatrix.4c2ded02.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task06_nodeLink.814fb4ef.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task07_adjMatrix.ce25fd21.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task07_nodeLink.69f0ecbd.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task08_adjMatrix.04417e64.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task08_nodeLink.f3b42a5e.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task09_adjMatrix.7bf60f59.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task09_nodeLink.4204dd3a.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task10_adjMatrix.9ddb2123.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task10_nodeLink.a860a4f6.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task11_adjMatrix.54e888d9.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task11_nodeLink.0ae4a7e8.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task12_adjMatrix.f17a7ce4.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task12_nodeLink.85a12057.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task13_adjMatrix.c32867ee.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task13_nodeLink.53d318fb.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task14_adjMatrix.e408facf.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task14_nodeLink.dadf2a19.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task15_adjMatrix.a494df59.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task15_nodeLink.6aa0bedb.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task16_adjMatrix.7362fb6e.png\";","module.exports = __webpack_public_path__ + \"static/media/S-task16_nodeLink.8290467a.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.25.40 PM.d8d82f24.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.25.55 PM.633b223d.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.28.22 PM.44e4fff7.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.28.59 PM.96a54c50.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.29.22 PM.004f7648.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.29.36 PM.94bee4af.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.31.26 PM.51c70f97.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.32.07 PM.063664fd.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.32.24 PM.02e24dee.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.32.44 PM.c2a61fba.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.33.05 PM.5a50933e.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.33.39 PM.b6387344.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.33.53 PM.b5379912.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.34.49 PM.d1040b8a.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.35.08 PM.174eddc3.png\";","module.exports = __webpack_public_path__ + \"static/media/Screen Shot 2020-09-07 at 3.35.48 PM.2dea7c64.png\";","module.exports = __webpack_public_path__ + \"static/media/linear regression_supported.b509637c.png\";","module.exports = __webpack_public_path__ + \"static/media/outlier.c7ab0c77.png\";","module.exports = __webpack_public_path__ + \"static/media/outlier_supported.36a11827.png\";","module.exports = __webpack_public_path__ + \"static/media/placeholder.cc568d38.png\";","module.exports = __webpack_public_path__ + \"static/media/quadratic regression_supported.16ab53a9.png\";","module.exports = __webpack_public_path__ + \"static/media/quadratic_regression_supported.9d74bf64.png\";","module.exports = __webpack_public_path__ + \"static/media/skyline_supported.a61efb24.png\";","import mockAllData from \"./mockData.json\";\nlet local = true;\nlet host = local ? \"http://127.0.0.1:5000\" : \"https://apps.vdl.sci.utah.edu/revisitServer\";\n\nexport async function fetchProvenanceDataByNodeId(nodeId) {\n  let res = await postData(host + \"/actions/\" + nodeId);\n  return res;\n}\nlet patternCache = {};\nexport async function getTopPatternsForGroup(groups) {\n  let cached = readFromCache(groups);\n  if (cached) {\n    console.log(\"[CACHE]: Read from cache!\");\n    return cached;\n  }\n  let res = await postData(`${host}/groupPatterns`, {\n    groups: [{ id: \"group1\", participants: groups }],\n  });\n  storeInCache(groups, res);\n\n  return res;\n}\nfunction readFromCache(group) {\n  let idsShortened = group.map((group) => group.participantID.substring(0, 3));\n  return patternCache[idsShortened];\n}\nfunction storeInCache(group, res) {\n  let idsShortened = group.map((group) => group.participantID.substring(0, 3));\n  patternCache[idsShortened] = res;\n  return;\n}\n\nexport async function performPrefixSpan(data) {\n  let res = await postData(host + \"/prefix\", data);\n  return res;\n}\nfunction parseActionConfiguration(config) {\n  if (config.elements) {\n    console.log(config.elements);\n    config.elements = config.elements.replace(/FALSE/g, '\"false\"');\n    config.elements = config.elements.replace(/TRUE/g, '\"true\"');\n    config.elements = config.elements.replace(/(\\r\\n|\\n|\\r)/gm, \" \");\n\n    //config.elements = config.elements.replace(/\"/g, \"'\");\n\n    console.log(\"past replaces\", config.elements, typeof config.elements);\n    try {\n      config.elements = JSON.parse(config.elements);\n    } catch (err) {\n      console.log(\"ERROR\", err);\n    }\n    console.log(\"past parse\", config.elements);\n  }\n\n  config.color = config.color.replace(\"/r\", \"\");\n  console.log(\"past color\", config.color);\n\n  return {\n    color: config.color,\n    name: config.label,\n    id: config._id,\n    elements: config.elements,\n    icon: config.icon,\n    hidden: config.hidden,\n    type: config.type,\n  };\n}\nfunction storeActionConfiguration(configList) {\n  return configList.map((config) => {\n    return {\n      _id: config.id,\n      label: config.name,\n      elements: config.elements ? JSON.stringify(config.elements) : null,\n      icon: config.icon,\n      type: config.type,\n      color: config.color,\n      hidden: config.hidden,\n    };\n  });\n}\nexport async function saveActionConfigurationToDB(updateActionConfigurations) {\n  let res = await postData(\n    host + \"/actionConfigurations\",\n    storeActionConfiguration(updateActionConfigurations)\n  );\n  console.log(\"saved actions\", res);\n\n  return res;\n}\nexport async function getActionConfigurations() {\n  // TODO hook this up\n  let res = await getData(host + \"/actionConfigurations\");\n  console.log(\"res from action configs\", res);\n  res.data = res.data.map(parseActionConfiguration);\n  console.log(\"got action configs\", res);\n\n  return res;\n}\nexport async function getTaskOverviewFromServer(taskID = undefined) {\n  //let res = await postData(host + \"/data\");\n  // console.log(\"dywootto\", mockAllData);\n  try {\n    // console.log(mockAPICall(host + \"/data\", mockAllData));\n    // let res = await postData(host + `/data`);\n\n    let res = taskID\n      ? await postData(host + `/overview/${taskID}`)\n      : await postData(host + `/overview/allTasks`);\n\n    // let res = await mockAPICall(host + \"/data\", mockAllData);\n    return res;\n  } catch (err) {\n    console.log(\"dywootto res\", err);\n  }\n}\nexport async function getSchema(tableID) {\n  let res = await getData(`${host}/table/${tableID}/schema`);\n  return res;\n}\nexport async function getTaskDataFromServer(taskID) {\n  let res = await getData(`${host}/data/task/${taskID}`);\n  return res;\n}\n\nexport async function getTimelineFromServer() {\n  // return await setTimeout(async () => {\n  let res = await getData(`${host}/timeline`);\n  //   console.log(\"World!\");\n  return res;\n  //  }, 5000);\n}\n\nexport async function getTaskListFromServer() {\n  let res = await getData(`${host}/taskList`);\n  return res;\n}\n\nexport async function mysql_api(endpoint, body) {\n  let res = await postData(host + endpoint, body);\n  return res;\n}\n\nexport async function postData(uri, postBody, fetchOptions) {\n  // console.log(\"postBody is \", postBody);\n  let defaultHeaders = {\n    url: uri,\n    // mode: \"no-cors\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n    },\n    body: JSON.stringify(postBody),\n  };\n  // console.log(\"post headers\", defaultHeaders);\n  const val = await completePromise(uri, defaultHeaders);\n  // console.log(\"dywootto\", val);\n  return val;\n}\n\nexport async function getData(uri, fetchOptions) {\n  let defaultHeaders = {\n    headers: {\n      Accept: \"application/json\",\n    },\n  };\n  return await completePromise(uri, defaultHeaders);\n}\n\nexport async function completePromise(uri, requestOptions) {\n  let response;\n  try {\n    response = await fetch(uri, requestOptions);\n    // console.log(response.text())\n    // console.log(\"inpromise\", response);\n    // console.log(\"fetched\", response);\n    response.data = await response.json();\n    response.success = response.ok;\n  } catch (err) {\n    // console.log(response.text())\n\n    console.log(\"error\", err);\n    throw err;\n  }\n  return response;\n}\n//let res = await mockAPICall(\"www.example.com\", { work: \"yeah\" }); you can mock out api calls using this\n\nexport async function mockAPICall(\n  url,\n  returnData,\n  options = {\n    shouldError: false,\n    timeout: 2000,\n  }\n) {\n  console.log(\"in mockAPI\");\n\n  const { shouldError, timeout } = options;\n  console.log(\"in mockAPI\");\n  return await new Promise((resolution, rejection) => {\n    setTimeout(() => {\n      if (shouldError) {\n        rejection({\n          url,\n          success: false,\n          error: `mockAPICall error`,\n        });\n      } else {\n        console.log(\"dywootto in res\", returnData, url);\n        resolution({\n          url,\n          success: true,\n          data: returnData,\n        });\n      }\n    }, timeout);\n  });\n}\n","import React, {\n    useState,\n    useEffect\n} from 'react';\n\nexport function useFetchAPIData(fetchingFunc, dependencies) {\n    const [isLoading, setIsLoading] = useState(null);\n    const [errorMessage, setErrorMessage] = useState(null);\n    const [fetchedData, setFetchedData] = useState(null);\n\n    const onLoadingStart = () => {\n        setIsLoading(true);\n        setErrorMessage(\"\");\n    };\n\n    const onError = (error) => {\n        setIsLoading(false);\n        setErrorMessage(error);\n    };\n\n    const onDataFetched = (data) => {\n        setFetchedData(data);\n        setIsLoading(false);\n    };\n\n    useEffect(() => {\n        onLoadingStart();\n        fetchingFunc()\n            .then(\n                (result) => {\n                    const success = result && result.success;\n                    if (success && result.data) {\n                        //const fetchData = result && result.data;\n                        onDataFetched(result.data);\n                    } else {\n                        onError(`Error occured obtaining data from server`);\n                    }\n                },\n                (error) => {\n                    onError(`Error occured during data fetch ${error?.message}`);\n                }\n            )\n            .catch((error) => {\n                onError(`Error occured after data fetched ${error?.message}`);\n            });\n    }, [...dependencies]);\n    return [isLoading, errorMessage, fetchedData];\n}","import React from \"react\";\nimport Add from \"@material-ui/icons/Add\";\nimport PanTool from \"@material-ui/icons/PanTool\";\nimport Sort from \"@material-ui/icons/Sort\";\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\";\nimport RadioButtonUncheckedIcon from \"@material-ui/icons/RadioButtonUnchecked\";\nimport Search from \"@material-ui/icons/Search\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport Start from \"@material-ui/icons/Star\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport StopIcon from \"@material-ui/icons/Stop\";\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport RemoveCircle from \"@material-ui/icons/RemoveCircle\";\nimport TabUnselected from \"@material-ui/icons/TabUnselected\";\nimport Crop75 from \"@material-ui/icons/Crop75\";\nimport AspectRatio from \"@material-ui/icons/AspectRatio\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport SelectAll from \"@material-ui/icons/SelectAll\";\nimport GetApp from \"@material-ui/icons/GetApp\";\nimport Brush from \"@material-ui/icons/Brush\";\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\n\nexport const iconMapping = {\n  Add,\n  PanTool,\n  Sort,\n  FiberManualRecordIcon,\n  RadioButtonUncheckedIcon,\n  Search,\n  Clear,\n  Start,\n  PlayArrowIcon,\n  StopIcon,\n  CheckBoxOutlineBlankIcon,\n  RemoveCircle,\n  TabUnselected,\n  Crop75,\n  AspectRatio,\n  VisibilityOff,\n  SelectAll,\n  GetApp,\n  Brush,\n  DragHandleIcon\n};\nconst colors = [\n  \"#c6e0d6\",\n  \"#8fcab4\",\n  \"#67aca9\",\n  \"#5d83d2\",\n  \"#6b56dd\",\n  \"#9e93a1\",\n];\n// generated  from https://leonardocolor.io/?colorKeys=%235b89d2%2C%235dbb9c%2C%23723ce7%2C%238e18b9&base=ffffff&ratios=1.4%2C1.64%2C2.12%2C2.80%2C3.71%2C4.88%2C6.35%2C9.00&mode=CAM02\nconst answerSelectColor = colors[0];\nconst dragColor = colors[1];\nconst sortColor = colors[2];\nconst selectColor = colors[3];\nconst searchColor = colors[4];\nconst clearColor = colors[5];\n\nexport const eventMappingList = [\n  {\n    icon: \"PlayArrowIcon\",\n    color: \"#d1d1d1\",\n    id: \"startedProvenance\",\n    name: \"Began Task\",\n    type: \"raw\",\n    hidden: false,\n  },\n\n  {\n    icon: \"StopIcon\",\n    color: \"#d1d1d1\",\n    id: \"Finished Task\",\n    name: \"Finished Task\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"Add\",\n    color: answerSelectColor,\n    id: \"Select Answer\",\n    name: \"Select Answer\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"PanTool\",\n    color: dragColor,\n    name: \"Dragged Node\",\n    id: \"Dragged Node\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"Sort\",\n    color: sortColor,\n    id: \"sort\",\n    name: \"Sort\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"FiberManualRecordIcon\",\n    color: selectColor,\n    id: \"attrRow\",\n    name: \"Select Node [Attr Row]\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"RadioButtonUncheckedIcon\",\n    color: answerSelectColor,\n    id: \"Unselect Answer\",\n    name: \"Unselect Answer\",\n  },\n  {\n    icon: \"FiberManualRecordIcon\",\n    color: selectColor,\n    id: \"Select Node\",\n    name: \"Selected Node\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"FiberManualRecordIcon\",\n    color: selectColor,\n    id: \"rowLabel\",\n    name: \"Select Node[rowLabel]\",\n  },\n  {\n    icon: \"FiberManualRecordIcon\",\n    color: selectColor,\n    id: \"colLabel\",\n    name: \"Neighbor Highlight\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"Search\",\n    color: searchColor,\n    id: \"search\",\n    name: \"Search\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"FiberManualRecordIcon\",\n    color: selectColor,\n    id: \"cell\",\n    name: \"Edge Select\",\n    type: \"raw\",\n    hidden: false,\n  },\n\n  {\n    icon: \"RadioButtonUncheckedIcon\",\n    color: selectColor,\n    id: \"Unselect Node\",\n    name: \"Unselect Node\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"Clear\",\n    color: clearColor,\n    id: \"clear\",\n    name: \"Clear Selections\",\n    type: \"raw\",\n    hidden: false,\n  },\n  {\n    icon: \"Clear\",\n    color: clearColor,\n    id: \"clearGroup\",\n    name: \"Cleared Group\",\n    type: \"group\",\n    hidden: false,\n    elements: [\n      {\n        icon: \"Clear\",\n        color: clearColor,\n        id: \"clear\",\n        name: \"Clear Selections\",\n        type: \"raw\",\n        hidden: false,\n      },\n      {\n        icon: \"RadioButtonUncheckedIcon\",\n        color: selectColor,\n        id: \"Unselect Node\",\n        name: \"Unselect Node\",\n        type: \"raw\",\n        hidden: false,\n      },\n    ],\n  },\n];\n","//@ts-nocheck\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport * as d3 from \"d3\";\nimport _ from \"lodash\";\nimport {\n  getTaskOverviewFromServer,\n  getTaskDataFromServer,\n  getActionConfigurations,\n  saveActionConfigurationToDB,\n  getTaskListFromServer,\n  getTimelineFromServer,\n  fetchProvenanceDataByNodeId,\n} from \"../fetchers/fetchMocks.js\";\nimport { useFetchAPIData } from \"../hooks/hooks\";\nimport { eventMappingList } from \"./eventMapping\";\n\nfunction addIdsToNodes(nodes) {\n  return nodes.map((node, index) => {\n    let dataObject;\n    if (index % 10 === 0) {\n      dataObject = { dataID: \"3c9ea11f-2a0b-46ee-9dc0-835d12561281\" };\n    } else if (index % 10 === 1) {\n      dataObject = { dataID: \"e3798172-df56-4124-8326-435b81ccb7a5\" };\n    } else if (index % 10 === 2) {\n      dataObject = { dataID: \"02a5a389-bc6b-4747-a1fb-f722158c66c6\" };\n    } else if (index % 10 === 3) {\n      dataObject = { dataID: \"698c9c66-63d5-4447-a4e6-7ba05e4aa5e9\" };\n    } else if (index % 10 === 4) {\n      dataObject = { dataID: \"74ed9ecf-e77b-4f45-8831-db220f5e2057\" };\n    } else if (index % 10 === 5) {\n      dataObject = { dataID: \"29c7a143-eac6-405e-ae66-e650754bb525\" };\n    } else if (index % 10 === 6) {\n      dataObject = { dataID: \"c78a8578-a5fc-411b-bb20-a6ebf9702273\" };\n    } else if (index % 10 === 7) {\n      dataObject = { dataID: \"f822c69d-1a7f-460a-80d5-58d24082fcfa\" };\n    } else if (index % 10 === 8) {\n      dataObject = { dataID: \"ff77ab34-ace1-498e-9367-beb4b72c9ea6\" };\n    } else {\n      dataObject = { dataID: \"1de36df0-5bf8-48a8-ad37-17641ada498f\" };\n    }\n    return Object.assign(node, dataObject);\n  });\n}\n\nconst ProvenanceDataContext = React.createContext({});\nfunction compileActionListToHashTable(list) {\n  let newActionObject = {};\n  list.forEach((item) => {\n    let newObject = {};\n    newObject[item.id] = item;\n    Object.assign(newActionObject, newObject);\n  });\n  return newActionObject;\n}\nexport const ProvenanceDataContextProvider = ({ children }) => {\n  // console.trace('calling provenanceDataContextProvider')\n  const [selectedTaskId, setSelectedTaskId] = React.useState(null);\n\n  // state variable used to trigger an update of action configuration list\n  const [queryCount, setQueryCount] = useState(0);\n  // console.log(\"queryCount\", queryCount);\n  const [\n    loadingActionConfigurations,\n    errorLoadingActionConfigurations,\n    actionConfigurationsFromServer,\n  ] = useFetchAPIData(async () => {\n    const value = await getActionConfigurations();\n    console.log(\"actionConfgigs from server\", value);\n    return value;\n  }, [queryCount]);\n\n  useEffect(() => {\n    // filter out events like \"browsed away\"\n    if (actionConfigurationsFromServer) {\n      const actionConfigurationsFiltered = actionConfigurationsFromServer.filter(\n        (config) => config.type !== \"event\"\n      );\n      console.log(\"fetched filtered actions\", actionConfigurationsFiltered);\n      setActionConfigurationsListInternal(actionConfigurationsFiltered);\n    }\n  }, [actionConfigurationsFromServer]);\n\n  /**\n   * Determines if a structural change occured when editing action configurations.\n   * A structural change is a change that would impact any event sequence dependent\n   * calculations (like event pattern mining)\n   * @param old\n   * @param */\n\n  function isStructuralActionChange(oldActions, newActions) {\n    // if the number of action configurations, then it is a structural change\n    if (oldActions.length !== newActions.length) {\n      return true;\n    }\n\n    // if elements, hidden, or id's are different for any action, change is structural\n    for (let i = 0; i < oldActions.length; i++) {\n      let difference = Object.keys(oldActions[i]).filter(\n        (k) =>\n          JSON.stringify(oldActions[i][k]) !== JSON.stringify(newActions[i][k])\n      );\n      for (let innerIndex = 0; innerIndex < difference.length; innerIndex++) {\n        if (\n          difference[innerIndex] === \"elements\" ||\n          difference[innerIndex] === \"hidden\" ||\n          difference[innerIndex] === \"id\"\n        ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n  // console.log(\"current query count\", queryCount);\n  function setActionConfigurationsList(newActionConfigurationsList) {\n    // console.log(\n    //   \"in setActionConfgiuration about to save\",\n    //   newActionConfigurationsList\n    // );\n    // clear data\n    saveActionConfigurationToDB(newActionConfigurationsList).then(\n      (response) => {\n        // if a structural change, refetch, else just reset\n        if (\n          isStructuralActionChange(\n            actionConfigurationsList,\n            newActionConfigurationsList\n          )\n        ) {\n          // console.log(\"IN STRUCTURAL\");\n          setQueryCount(queryCount + 1);\n          setOverviewData();\n          setCurrentTaskData();\n        } else {\n          // console.log(\"IN SUPERFICIAL\");\n          setActionConfigurationsListInternal(newActionConfigurationsList);\n        }\n      }\n    );\n  }\n  const [\n    actionConfigurationsList,\n    setActionConfigurationsListInternal,\n  ] = useState([]);\n  // console.log(\"final list\", actionConfigurationsList);\n  const [actionConfigurations, setActionConfigurations] = useState(\n    compileActionListToHashTable(eventMappingList)\n  );\n  useEffect(() => {\n    setActionConfigurations(\n      compileActionListToHashTable(actionConfigurationsList)\n    );\n  }, [actionConfigurationsList]);\n\n  const [overviewData, setOverviewData] = useState();\n  const [fetchedInitialTask, setFetchedInitialTask] = useState(false);\n  const [taskList, setTaskList] = useState();\n\n\n  // const [metrics,setMetrics] = React.useState()\n\n  let conditions;\n  let metrics;\n\n  if (overviewData) {\n    conditions = overviewData.conditions;\n    metrics = overviewData.metrics;\n  }\n\n  let [homeTaskSort, setHomeTaskSort] = useState();\n\n\n\n  // get taskList from server;\n  let [, loadingTaskList, taskListFromServer] = useFetchAPIData(async () => {\n    console.log(\"requesting tasklist from server \");\n    return await getTaskListFromServer();\n  }, []);\n  //\n  useEffect(() => {\n    if (taskListFromServer) {\n      setSelectedTaskId(taskListFromServer[12].taskID);\n    }\n  }, [taskListFromServer]);\n\n  // get task overview data from server for one task;\n  let [isLoading, isError, dataFromServer] = useFetchAPIData(async () => {\n    console.log(\"requesting task overview for \", taskList[0]);\n    return await getTaskOverviewFromServer(taskList[0].taskID);\n  }, [taskList, queryCount]);\n\n\n\n  // console.log(isLoading, isError, dataFromServer);\n  /*[{\"_id\":\"startedProvenance\",\"actionID\":\"startedProvenance\",\"category\":\"Study\\r\",\"condition\":\"nodeLink\",\"elapsedTime\":0,\"id\":1,\"label\":\"Start Task\",\"participantID\":\"545d6768fdf99b7f9fca24e3\",\"target\":null,\"taskID\":\"S-task01\",\"time\":\"Wed, 28 Aug 2019 00:51:18 GMT\",\"type\":\"action\"},{\"_id\":\"Hard Selected A Node\",\"actionID\":\"Hard Selected a Node\",\"category\":\"Answer\\r\",\"condition\":\"nodeLink\",\"elapsedTime\":0.283333,\"id\":2,\"label\":\"Select\",\"participantID\":\"545d6768fdf99b7f9fca24e3\",\"target\":null,\"taskID\":\"S-task01\",\"time\":\"Wed, 28 Aug 2019 00:51:35 GMT\",\"type\":\"action\"},{\"_id\":\"Hard Unselected A Node\",\"actionID\":\"Hard Unselected a Node\",\"category\":\"Answer\\r\",\"condition\":\"nodeLink\",\"elapsedTime\":0.316667,\"id\":3,\"label\":\"Unselect\",\"participantID\":\"545d6768fdf99b7f9fca24e3\",\"target\":null,\"taskID\":\"S-task01\",\"time\":\"Wed, 28 Aug 2019 00:51:37 GMT\",\"type\":\"action\"},{\"_id\":\"Hard Selected A Node\",\"actionID\":\"Hard Selected a Node\",\"category\":\"Answer\\r\",\"condition\":\"nodeLink\",\"elapsedTime\":0.45,\"id\":2,\"label\":\"Select\",\"participantID\":\"545d6768fdf99b7f9fca24e3\",\"target\":null,\"taskID\":\"S-task01\",\"time\":\"Wed, 28 Aug 2019 00:51:45 GMT\",\"type\":\"action\"},{\"_id\":\"Finished Task\",\"actionID\":\"Finished Task\",\"category\":\"Study\\r\",\"condition\":\"nodeLink\",\"elapsedTime\":0.666667,\"id\":4,\"label\":\"Finish Task\",\"participantID\":\"545d6768fdf99b7f9fca24e3\",\"target\":null,\"taskID\":\"S-task01\",\"time\":\"Wed, 28 Aug 2019 00:51:58 GMT\",\"type\":\"action\"}]*/\n\n\n\n  useEffect(() => {\n    if (dataFromServer) {\n      setOverviewData(dataFromServer);\n      setFetchedInitialTask(!fetchedInitialTask);\n    }\n  }, [dataFromServer]);\n\n  //get task overviewdata for all remaining tasks\n  // useFetchAPIData(async () => {\n  //   console.log(\"loop test for task overviews\", fetchedInitialTask, taskList);\n  //   taskList.map((task) => {\n  //     getTaskOverviewFromServer(task).then((newTaskData) => {\n  //       let newData = { ...data };\n  //       // console.log(newData)\n  //       // console.log(newTaskData.data.tasks[0]);\n  //       newData.tasks.push(newTaskData.data.tasks[0]);\n  //       setData(newData);\n  //     });\n  //   });\n  // }, [fetchedInitialTask]);\n\n  // // get task overviewdata for all remaining tasks\n  useFetchAPIData(async () => {\n    if (dataFromServer) {\n      console.log(\"get remaining tasks \");\n      getTaskOverviewFromServer().then((newTaskData) => {\n        console.log(\"newTaskData\", newTaskData.data);\n        setOverviewData(newTaskData.data);\n      });\n    }\n  }, [dataFromServer]);\n\n  useEffect(() => {\n    console.log(\"taskList from server\", taskListFromServer);\n    setTaskList(taskListFromServer);\n  }, [taskListFromServer]);\n\n\n\n\n  let [taskSort, setTaskSort] = useState(\"name\");\n\n  /*const [allProvenanceData, setAllProvenanceData] = useState(() =>\n    processRawProvenanceData(initProvData) \n  );*/\n\n\n  function handleChangeSelectedTaskId(event) {\n    setSelectedTaskId([event.target.value]);\n  }\n\n  return (\n    <ProvenanceDataContext.Provider\n      value={{\n        handleChangeSelectedTaskId,\n        selectedTaskId,\n        overviewData,\n        loadingTaskList,\n        taskList,\n        metrics,\n        queryCount,\n        setTaskSort,\n        homeTaskSort,\n        setHomeTaskSort,\n        conditions,\n        actionConfigurations,\n        setActionConfigurationsList,\n        actionConfigurationsList,\n      }}>\n      {children}\n    </ProvenanceDataContext.Provider>\n  );\n};\n\nfunction calculateRelativeProvGraph(taskPerformance, maxTime) {\n  let totalTime =\n    new Date(taskPerformance.endTime) - new Date(taskPerformance.startTime);\n  let scale = maxTime / totalTime;\n  taskPerformance[\"totalTime\"] = totalTime;\n  taskPerformance[\"relativeStartTime\"] = 0;\n  taskPerformance[\"relativeStopTime\"] = 1 / scale;\n  if (taskPerformance[\"provenance\"]) {\n    taskPerformance[\"provenance\"] = taskPerformance[\"provenance\"].map(\n      (node) => {\n        node[\"percentTime\"] =\n          (new Date(node[\"time\"]) - new Date(taskPerformance[\"startTime\"])) /\n          totalTime;\n        node[\"relativeTime\"] = node[\"percentTime\"] / scale;\n\n        return node;\n      }\n    );\n  } else {\n    taskPerformance[\"provenance\"] = [];\n  }\n\n  return taskPerformance;\n}\nfunction processRawProvenanceData(unrelativeProvenanceData) {\n  //remove element with no data\n  unrelativeProvenanceData = unrelativeProvenanceData.filter(\n    (d) => Object.keys(d.data).length > 0\n  );\n\n  //remove elements with no, or messed up provenance (more than one started prov event)\n  unrelativeProvenanceData = unrelativeProvenanceData.filter((d) => {\n    let tasks = Object.keys(d.data).filter((t) => t.includes(\"task\"));\n\n    return tasks.reduce((acc, task) => {\n      if (!d.data[task].provenance) {\n        //participant has no provenance for a certain task.\n        return false;\n      } else {\n        //element has more than on 'startedProvenance' event in the same task.\n        return (\n          acc &&\n          d.data[task].provenance.filter((p) => p.event == \"startedProvenance\")\n            .length == 1\n        );\n      }\n    }, true);\n  });\n\n  // console.trace('calling process Raw prov data')\n  const taskIds = [\n    \"S-task01\",\n    \"S-task02\",\n    \"S-task03\",\n    \"S-task04\",\n    \"S-task05\",\n    \"S-task06\",\n    \"S-task07\",\n    \"S-task08\",\n    \"S-task09\",\n    \"S-task10\",\n    \"S-task11\",\n    \"S-task12\",\n    \"S-task13\",\n    \"S-task14\",\n    \"S-task15\",\n    \"S-task16\",\n  ];\n\n  const relativeProvenanceData = _.cloneDeep(unrelativeProvenanceData);\n\n  taskIds.forEach((taskId) => {\n    let longestTimeForTask = d3.max(unrelativeProvenanceData, (participant) => {\n      if (\n        participant.data &&\n        participant.data[taskId]?.startTime &&\n        participant.data[taskId]?.endTime\n      ) {\n        return (\n          new Date(participant.data[taskId].endTime) -\n          new Date(participant.data[taskId].startTime)\n        ); // minutes->seconds->ms\n      }\n      return 0;\n    });\n    // console.log(\"longest time\", longestTimeForTask);\n    unrelativeProvenanceData.forEach((participant, index) => {\n      if (participant.data && participant.data[taskId]) {\n        relativeProvenanceData[index].data[taskId] = calculateRelativeProvGraph(\n          participant.data[taskId],\n          longestTimeForTask\n        );\n        //create id field in each provenance event (that doesn't change with edits)\n        participant.data[taskId].provenance.map((p) => (p.id = p.event));\n      } else {\n        delete relativeProvenanceData[index][taskId];\n        // console.log(\"NO DATA\", relativeProvenanceData[index], taskId);\n      }\n    });\n  });\n\n  return relativeProvenanceData;\n}\n\nexport default ProvenanceDataContext;\n","//@ts-nocheck\nimport React, { useContext } from \"react\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Fade from \"@material-ui/core/Fade\";\nimport styles from \"./ProvenanceIsolatedNodes.module.css\";\nimport ProvenanceDataContext from \"./ProvenanceDataContext\";\nimport Icon from \"@material-ui/core/Icon\";\nimport { iconMapping } from \"./eventMapping\";\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\n\nconst ProvenanceIsolatedNodes = ({\n  nodes,\n  selectedItemId,\n  hoveredItemId,\n  handleHover = () => { }, //console.log,\n  handleProvenanceNodeClick = () => { }, //console.log,\n}) => {\n  // console.log(\"dywootto\", nodes);\n  function determineItemOpacity(node, selectedItemId, hoveredItemId) {\n    let opacity;\n    if (selectedItemId && node.id !== selectedItemId) {\n      opacity = 0.1;\n    } else if (hoveredItemId && node.id !== hoveredItemId) {\n      opacity = 0.1;\n    }\n    if (node.id === hoveredItemId || node.id === selectedItemId) {\n      opacity = 1;\n    }\n    return opacity;\n  }\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{ display: \"flex\", flexDirection: \"row\" }}>\n      {nodes.map((node, index) => {\n        const opacity = determineItemOpacity(\n          node,\n          selectedItemId,\n          hoveredItemId\n        ); //node.id === selectedItemId ? 1 : 0.5;\n        return (\n          <div\n            key={index}\n            style={{ opacity }}\n            onMouseEnter={() => handleHover(node.id)}\n            onMouseLeave={() => handleHover(null)}\n            onClick={() => handleProvenanceNodeClick(node)}>\n            <IsolatedNode node={node}></IsolatedNode>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport const IsolatedNode = ({ node, configToUse }) => {\n  let { actionConfigurations } = useContext(ProvenanceDataContext);\n\n  // if provided a config to use, use that (used for volatile config changes before they are saved)\n  if (configToUse) {\n    actionConfigurations = configToUse;\n  }\n\n  const eventMapping = actionConfigurations;\n  let eventMap = eventMapping[node.name]\n    ? eventMapping[node.name]\n    : { icon: \"Text\", color: \"#fff\" };\n  //add check for custom icons for newly created events;\n  let ProvenanceIcon = iconMapping[eventMap.icon];\n  if (!ProvenanceIcon) {\n    ProvenanceIcon = () => <text transform={\"translate(0,16)\"}>{\"SR\"}</text>;\n  }\n  // console.log(\"in rerender\", iconMapping, eventMap.icon, ProvenanceIcon);\n  // node.event !== \"startedProvenance\" &&\n  //   node.event !== \"Finished Task\" ?\n  return (\n    <Tooltip\n      TransitionComponent={Fade}\n      TransitionProps={{ timeout: 600 }}\n      title={`${node.name} ${node.count ? `[${node.count}]` : \"\"}`}\n      PopperProps={{\n        popperOptions: {\n          modifiers: {\n            offset: {\n              enabled: true,\n              offset: \"0px, -6px\",\n            },\n          },\n        },\n      }}\n      arrow>\n      <svg width={34} height={34}>\n        <rect\n          x={0}\n          y={0}\n          width={30}\n          height={30}\n          rx={5}\n          fill={eventMap.color}\n          opacity={node.scale || 1}></rect>\n        <g transform={`translate(7,5)`}>\n          {<ProvenanceIcon width={16} height={16} />}\n        </g>\n      </svg>\n    </Tooltip>\n  );\n  // : (\n  //   <div></div>\n  // );\n};\n\nexport default ProvenanceIsolatedNodes;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport TrendingFlatIcon from \"@material-ui/icons/TrendingFlat\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\n\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nimport Fab from \"@material-ui/core/Fab\";\n\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\n\nimport Tagger from \"../components/Tagger\";\n\nimport SortIcon from \"@material-ui/icons/Sort\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\n\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nimport { useFetchAPIData } from \"../hooks/hooks\";\n\n// import * as PouchDB from 'pouchdb-browser';\n\nimport * as d3 from \"d3\";\n\nimport ProvenanceDataContext from \"../components/ProvenanceDataContext\";\nimport ProvenanceIsolatedNodes from \"../components/ProvenanceIsolatedNodes\";\n\nimport Grid, { GridSpacing } from \"@material-ui/core/Grid\";\nimport { pathToFileURL } from \"url\";\nimport { keys } from \"mobx\";\nimport { Sort } from \"@material-ui/icons\";\n\nlet rowHeight = 300;\nlet figureWidth = 572;\n\nconst theme = createMuiTheme({\n  overrides: {\n    MuiTableCell: {\n      root: {\n        padding: 10,\n      },\n    },\n  },\n});\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    flexGrow: 1,\n  },\n  table: {\n    padding: \"10px\",\n  },\n  sortable: {\n    cursor: \"pointer\",\n    backgroundColor: \"rgb(240,240,240)\",\n  },\n  sorted: {\n    fill: \"#5d83d2\",\n  },\n  media: {\n    width: figureWidth,\n    height: rowHeight,\n    // border: '1px solid lightgray'\n  },\n  condition: {\n    fontSize: \"1em\",\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n});\n\nvar groupBy = function (xs, key) {\n  return xs.reduce(function (rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n};\n\nfunction scale(width, maxValue) {\n  return d3.scaleLinear().range([10, width]).domain([0, maxValue]);\n}\n\nconst accScale = scale(40, 1);\nconst timeScale = scale(40, 3.59);\n\nexport const BarChart = (props) => {\n  const {\n    allData,\n    hoveredRow,\n    hoveredRowColor,\n    metric,\n    vert = false,\n    size = { width: 150, height: 200 },\n  } = props;\n\n  let data = allData.find((m) => m.metric == metric);\n  if (data.type == \"text\" || data.type == \"longtext\") {\n    let width = vert ? size.width : 900;\n    let height = vert ? size.height : 80;\n\n    let maxBarHeight = vert ? 20 : height - 10;\n\n    let varsToPlot = Object.entries(data.count)\n      .sort((a, b) => (a[1] > b[1] ? -1 : 1))\n      .slice(0, 20);\n\n    //compute scale for data;\n    let yDomain = varsToPlot.map((v) => v[0]);\n    let xDomain = d3.extent(varsToPlot.map((v) => v[1]));\n\n    let xScale = d3.scaleLinear().domain(xDomain).range([0, maxBarHeight]);\n\n    let yScale = d3\n      .scaleBand()\n      .domain(yDomain)\n      .range([0, height])\n      .padding(0.65);\n\n    let barWidth = yScale.bandwidth();\n\n    let hoveredStats = hoveredRow\n      ? hoveredRow.stats.find((m) => m.metric == metric)\n      : undefined;\n    let hoveredVarsToPlot = hoveredStats\n      ? Object.entries(hoveredStats.count)\n        .sort((a, b) => (a[1] > b[1] ? -1 : 1))\n        .slice(0, 20)\n      : [];\n\n    if (!vert) {\n      xDomain = varsToPlot.map((v) => v[0]);\n      yDomain = [0, d3.extent(varsToPlot.map((v) => v[1]))[1]];\n\n      yScale = d3.scaleLinear().domain(yDomain).range([15, maxBarHeight]);\n\n      xScale = d3.scaleBand().domain(xDomain).range([0, width]).padding(0.5);\n\n      barWidth = xScale.bandwidth();\n    }\n\n    let nothingToPlot = varsToPlot.length < 1;\n    let transform = vert ? \"translate(100px,0px)\" : \"translate(10px,20px)\";\n    {\n      return nothingToPlot ? null : (\n        <svg width={width + 10} height={height + 20}>\n          {/* add axis */}\n          <g style={{ transform: transform }}>\n            <line\n              x1={0}\n              y1={vert ? yScale.range()[0] : yScale.range()[1]}\n              x2={vert ? 0 : xScale.range()[1]}\n              y2={yScale.range()[1]}\n              style={{ stroke: \"rgb(0,0,0,0.25)\", strokeWidth: 1 }}></line>\n            {varsToPlot.map((entry) => {\n              let key = entry[0];\n              let value = entry[1];\n              let tooltipText = key + \" : \" + value;\n\n              let x = vert ? xScale(value) + 5 : xScale(key) - 3;\n              let y = vert\n                ? yScale(key) - barWidth\n                : height - yScale.range()[0];\n              return (\n                <React.Fragment key={key}>\n                  <Tooltip title={tooltipText}>\n                    <rect\n                      className=\"count\"\n                      key={\"d_\" + key}\n                      style={{\n                        opacity: hoveredRowColor ? 0.5 : 1,\n                        fill: \"rgb(93, 131, 210)\",\n                      }}\n                      x={vert ? 0 : xScale(key)}\n                      y={\n                        vert\n                          ? yScale(key)\n                          : height - yScale.range()[0] - yScale(value)\n                      }\n                      width={vert ? xScale(value) : barWidth}\n                      height={vert ? barWidth : yScale(value)}></rect>\n                  </Tooltip>\n                  <Tooltip title={tooltipText}>\n                    <text\n                      style={{\n                        fontSize: \"1em\",\n                        textAnchor: \"start\",\n                        transform:\n                          \"translate(\" + x + \"px,\" + y + \"px) rotate(270deg)\",\n                      }}\n                      x={0}\n                      y={0}>\n                      {\" \"}\n                      {key}{\" \"}\n                    </text>\n                  </Tooltip>\n                  {hoveredRowColor ? (\n                    \"\"\n                  ) : (\n                      <text\n                        style={{\n                          fontSize: \"1em\",\n                          textAnchor: \"middle\",\n                        }}\n                        x={vert ? -5 : xScale(key) + barWidth / 2}\n                        y={\n                          vert\n                            ? yScale(key) - barWidth\n                            : height - yScale.range()[0] - yScale(value) - 2\n                        }>\n                        {\" \"}\n                        {value}{\" \"}\n                      </text>\n                    )}\n                </React.Fragment>\n              );\n            })}\n\n            {/* //Only plot hoveredVars that are in the original top 20 to keep the distribution of bars the same */}\n            {hoveredVarsToPlot\n              .filter((d) => xScale(d[0]))\n              .map((entry) => {\n                let key = entry[0];\n                let value = entry[1];\n                let tooltipText = key + \" : \" + value;\n\n                let x = vert ? xScale(value) + 5 : xScale(key) - 3;\n                let y = vert\n                  ? yScale(key) - barWidth\n                  : height - yScale.range()[0];\n                return (\n                  <React.Fragment key={\"hovered\" + key}>\n                    <Tooltip title={tooltipText}>\n                      <rect\n                        className=\"count\"\n                        key={\"d_\" + key}\n                        style={{ fill: hoveredRowColor }}\n                        x={vert ? 0 : xScale(key)}\n                        y={\n                          vert\n                            ? yScale(key)\n                            : height - yScale.range()[0] - yScale(value)\n                        }\n                        width={vert ? xScale(value) : barWidth}\n                        height={vert ? barWidth : yScale(value)}></rect>\n                    </Tooltip>\n\n                    <text\n                      style={{\n                        fontSize: \"1em\",\n                        textAnchor: \"middle\",\n                      }}\n                      x={vert ? -5 : xScale(key) + barWidth / 2}\n                      y={\n                        vert\n                          ? yScale(key) - barWidth\n                          : height - yScale.range()[0] - yScale(value) - 2\n                      }>\n                      {\" \"}\n                      {value}{\" \"}\n                    </text>\n                  </React.Fragment>\n                );\n              })}\n          </g>\n        </svg>\n      );\n    }\n  }\n\n  return null;\n};\n\n{\n  /* <>{[0, 1, 2,3,4].map(i => {\n                                  let frequentActions = freqPattern[i].seq.map(a => ({ event: a, id: a, count: freqPattern[i].count, scale: colorScale(freqPattern[i].count) })) //actions.filter(a => a.taskID == task.taskID && a.condition == condition).splice(0, 5).map(a => ({ event: a.label, id: a.actionID, count: a.count, scale: colorScale(a.count) }))\n                                  return <>\n                                    <Box style={{ display: 'block' }} >\n                                      <Box  mb={\"6px\"} style={{ display: 'inline-block', width: 100 }}>\n                                        <svg width={100} height={34}>\n                                        <rect x={100-countScale(freqPattern[i].count)} y={0} width={countScale(freqPattern[i].count)} height={30} style={{fill: 'rgb(147 195 209)', 'stroke':'white', strokeWidth:'8px' }}></rect>\n                                        <text x={90} y={20} style={{'fontWeight':'bold','textAnchor':'end'}}>{freqPattern[i].count}</text>\n                                        </svg>\n                                      </Box>\n                                      <Box mt={\"5px\"} mb={\"6px\"} style={{ display: 'inline-block', width: 300 }}>\n                                        <ProvenanceIsolatedNodes\n                                          key={task.taskID}\n                                          nodes={\n                                            frequentActions\n                                          }></ProvenanceIsolatedNodes>\n                                      </Box>\n                                    </Box>\n                                  </>\n                                }\n                                )}\n                                </> */\n}\nlet countScale = d3.scaleLinear().range([0, 75]).domain([0, 137]);\n\nfunction Stimulus({ taskID, conditionName, classes }) {\n  // console.log('am rerendering')\n\n  //check if image exists\n  let imgName = \"../static/taskImages/\" + taskID + \"_\" + conditionName + \".png\";\n\n  // image={require(\"../static/taskImages/\" +\n  // taskID +\n  // \"_\" +\n  // conditionName +\n  // \".png\")}\n\n  let img;\n  try {\n    img = require(\"../static/taskImages/\" +\n      taskID +\n      \"_\" +\n      conditionName +\n      \".png\");\n  } catch (err) {\n    // console.log(\"could not find\", imgName);\n    img = \"\";\n  }\n\n  return (\n    <>\n      <Box mt={\"5px\"} mb={\"6px\"} mr={\"10px\"} boxShadow={1}>\n        <CardMedia\n          style={{ display: \"inline-block\" }}\n          className={classes.media}\n          component=\"img\"\n          image={img}\n          // image=\"https://placekitten.com/g/100/100\"\n          title={imgName}\n        />\n      </Box>\n      <Typography className={classes.pos} variant=\"overline\" color=\"primary\">\n        Stimulus\n      </Typography>\n    </>\n  );\n}\n\n//Compoment to draw participant counts for each interaction sequence\nfunction SequenceCount({\n  row,\n  hoveredRow,\n  hoveredRowColor,\n  clickedRow,\n  clickedRowColor,\n}) {\n  let total = 137;\n  let height = 25;\n  let iconWidth = 3;\n  let padding = 1;\n  let numIconsPerCol = Math.floor(height / (iconWidth + padding));\n  let numCols = Math.ceil(total / numIconsPerCol);\n  let width = numCols * (iconWidth + padding);\n\n  let textWidth = 25;\n\n  let xScale = d3\n    .scaleLinear()\n    .range([0, iconWidth + padding])\n    .domain([0, 1]);\n  let yScale = d3.scaleLinear().range([0, height]).domain([0, numIconsPerCol]);\n\n  let currentParticipants = row.matchingSequences.map((s) => s.participantID);\n  let hoveredParticipants = [];\n\n  if (clickedRow) {\n    hoveredParticipants = clickedRow.matchingSequences.map(\n      (s) => s.participantID\n    );\n  } else {\n    hoveredParticipants = hoveredRow\n      ? hoveredRow.matchingSequences.map((s) => s.participantID)\n      : [];\n  }\n\n  // if (hoveredRow){\n  //   console.log('currentRow has ', row.count, currentParticipants.length , 'participants')\n  //   console.log('hoveredRow has ', hoveredParticipants.length , 'participants')\n\n  // }\n\n  let intersection = currentParticipants.filter((x) =>\n    hoveredParticipants.includes(x)\n  );\n\n  // width = countScale.range()[1]\n\n  return (\n    <svg width={width + textWidth * 4} height={height}>\n      {Array.from(Array(total).keys()).map((key) => {\n        return (\n          <rect\n            key={key}\n            x={xScale(Math.floor(key / numIconsPerCol))}\n            y={yScale(key % numIconsPerCol) + padding}\n            width={iconWidth}\n            height={iconWidth}\n            style={{\n              // opacity: key < intersection.length ? 1 : .2,\n              fill:\n                key < intersection.length\n                  ? hoveredRowColor || \"rgb(220, 220, 220)\"\n                  : key < row.count\n                    ? hoveredRow && clickedRow\n                      ? clickedRowColor\n                      : \"rgb(150, 150, 150)\"\n                    : \"rgb(220, 220, 220)\", //rgb(147 195 209)\n            }}></rect>\n        );\n      })}\n\n      <text\n        x={xScale(numCols) + padding}\n        y={yScale(numIconsPerCol / 2)}\n        style={{\n          fontWeight: \"bold\",\n          alignmentBaseline: \"middle\",\n          textAnchor: \"start\",\n          fill: \"rgb(150, 150, 150)\",\n        }}>\n        {row.count}\n      </text>\n\n      {hoveredRow ? (\n        <text\n          x={xScale(numCols) + padding + 25}\n          y={yScale(numIconsPerCol / 2)}\n          style={{\n            fontWeight: \"bold\",\n            alignmentBaseline: \"middle\",\n            textAnchor: \"start\",\n            fill: hoveredRowColor,\n          }}>\n          {\" / \" + intersection.length}\n        </text>\n      ) : (\n          <></>\n        )}\n\n      {clickedRow && hoveredRow ? (\n        <text\n          x={xScale(numCols) + padding + 55}\n          y={yScale(numIconsPerCol / 2)}\n          style={{\n            fontWeight: \"bold\",\n            alignmentBaseline: \"middle\",\n            textAnchor: \"start\",\n            fill: clickedRowColor,\n          }}>\n          {\"/ \" + (row.count - intersection.length)}\n        </text>\n      ) : (\n          <></>\n        )}\n\n      {/* <rect\n    x={0}\n    y={0}\n    width={countScale(137)}\n    height={20}\n    style={{\n      fill: \"rgb(220, 220, 220)\"\n    }}></rect>\n<rect\n    x={0}\n    y={0}\n    width={countScale(row.count)}\n    height={20}\n    style={{\n      fill: \"rgb(93, 131, 210)\"\n    }}></rect>\n<text\n    x={countScale(137)+padding}\n    y={10}\n    style={{ fontWeight: \"bold\", alignmentBaseline:'middle', textAnchor: \"start\" ,'fill':'rgb(93, 131, 210)' }}>\n    {row.count}\n  </text> */}\n    </svg>\n  );\n}\n\nfunction SortIconContainer({ sorted, classes }) {\n  let size = 20;\n  return (\n    <svg width={size} height={size} style={{ paddingTop: \"5px\" }}>\n      <SortIcon\n        className={sorted ? classes.sorted : \"\"}\n        style={{ transform: \"rotate(-180deg)\" }}\n        width={size}\n        height={size}\n      />\n    </svg>\n  );\n}\n\n//Compoment to draw interaction sequence tables\nfunction TableComponent({\n  rows,\n  hoveredRowColor,\n  hoveredRow = undefined,\n  setHoveredRow = undefined,\n  clickedRowColor,\n  clickedRow = undefined,\n  setClickedRow = undefined,\n}) {\n  // console.log('rendering table',hoveredRow)\n  // console.log(rows)\n\n  const classes = useStyles();\n\n  let [sort, setSort] = useState({\n    value: \"Count\",\n    desc: { Count: true, Pattern: true },\n  });\n\n  // useEffect()({\n  rows.sort((a, b) => {\n    let aValue = sort.value == \"Count\" ? a.count : a.seq.length;\n    let bValue = sort.value == \"Count\" ? b.count : b.seq.length;\n    let rValue = sort.desc[sort.value] ? -1 : 1;\n    return aValue > bValue ? rValue : -rValue;\n  });\n  // },[])\n\n  // console.log(rows)\n  return (\n    <MuiThemeProvider theme={theme}>\n      <TableContainer style={{ maxHeight: \"300px\" }}>\n        <Table stickyHeader aria-label=\"sticky table\">\n          <TableHead>\n            <TableRow>\n              {[\n                { key: \"Pattern\", title: \"Interaction Pattern\" },\n                { key: \"Count\", title: \"Participant Count\" },\n              ].map((header) => {\n                return (\n                  <TableCell\n                    key={header[\"key\"]}\n                    onClick={() => {\n                      sort = { ...sort };\n                      let sameKey = sort.value == header.key;\n                      sort.value = header.key;\n                      sort.desc[header.key] = sameKey\n                        ? !sort.desc[header.key]\n                        : true;\n                      setSort(sort);\n                    }}\n                    className={classes.sortable}>\n                    {\" \"}\n                    {header.title}\n                    <SortIconContainer\n                      classes={classes}\n                      sorted={sort.value == header.key}></SortIconContainer>\n                  </TableCell>\n                );\n              })}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {rows.map((row, i) => {\n              // console.log('row',row)\n              return (\n                <TableRow\n                  key={row.id}\n                  onMouseDown={() => {\n                    clickedRow == row ? setClickedRow() : setClickedRow(row);\n                  }}\n                  onMouseEnter={() => {\n                    setHoveredRow(row);\n                  }}\n                  onMouseLeave={() => setHoveredRow()}\n                  style={{\n                    background:\n                      clickedRow == row\n                        ? \"rgb(230,230,230)\"\n                        : hoveredRow == row\n                          ? \"rgb(245,245,245)\"\n                          : \"white\",\n                  }}>\n                  <TableCell\n                    component=\"th\"\n                    scope=\"row\"\n                    style={{ width: \"300px\", padding: \"10px\" }}>\n                    {row.seq ? (\n                      <ProvenanceIsolatedNodes\n                        // key={}\n                        nodes={row.seqObj}\n                        selectedItemId={undefined}\n                        handleProvenanceNodeClick={() => { }}></ProvenanceIsolatedNodes>\n                    ) : (\n                        row.answer\n                      )}\n                  </TableCell>\n                  {row.seq ? (\n                    <TableCell align=\"left\">\n                      <SequenceCount\n                        row={row}\n                        hoveredRow={hoveredRow}\n                        hoveredRowColor={hoveredRowColor}\n                        clickedRow={clickedRow}\n                        clickedRowColor={clickedRowColor}></SequenceCount>\n                    </TableCell>\n                  ) : (\n                      <></>\n                    )}\n                  {/* <TableCell  component=\"th\" scope=\"row\" style={{padding:'10px'}}>\n          {row.seq? <Histogram data={value} ci={value.ci} />: <></>}\n        </TableCell> */}\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </MuiThemeProvider>\n  );\n}\n\n// Compoment for single metric histogram\nfunction Histogram({\n  data,\n  hoveredRow,\n  metric,\n  hoveredRowColor,\n  clickedRow,\n  clickedRowColor,\n}) {\n  // let hoveredStats = undefined;\n  // let hoveredCI = undefined;\n  let value = data.find((m) => m.metric == metric);\n  if (value.type == \"int\" || value.type == \"float\") {\n    let hoveredStats;\n\n    if (clickedRow && hoveredRow && clickedRow == hoveredRow) {\n      hoveredStats = hoveredRow\n        ? hoveredRow.stats.find((m) => m.metric == metric)\n        : undefined;\n      console.log(\"showing metrics for \", hoveredRow.matchingSequences.length);\n    } else if (clickedRow) {\n      let intersectionRow = hoveredRow\n        ? clickedRow.intersections.find((r) => r.id == hoveredRow.id)\n        : undefined;\n      hoveredStats = intersectionRow\n        ? intersectionRow.stats.find((m) => m.metric == metric)\n        : undefined;\n      if (intersectionRow) {\n        console.log(\n          \"showing metrics for \",\n          intersectionRow.matchingSequences.length\n        );\n      }\n    } else {\n      hoveredStats = hoveredRow\n        ? hoveredRow.stats.find((m) => m.metric == metric)\n        : undefined;\n    }\n\n    let hoveredCI = hoveredStats ? hoveredStats.ci : undefined;\n    let histColor =\n      clickedRow && clickedRow !== hoveredRow\n        ? clickedRowColor\n        : hoveredRowColor;\n    return (\n      <Grid key={metric + \"_hist\"} item>\n        {\n          <DrawHistogram\n            hoveredRowColor={histColor}\n            data={hoveredStats || value}\n            ci={hoveredCI || value.ci}\n          />\n        }\n        <Typography\n          style={{ display: \"block\" }}\n          color=\"primary\"\n          variant=\"overline\">\n          {metric}\n        </Typography>\n      </Grid>\n    );\n  }\n  // if (value.type == \"text\") {\n  //   return (\n  //     <Grid key={metric+'_bar'} item>\n  //       <BarChart data={value}></BarChart>\n  //       <Typography\n  //         style={{ display: \"block\" }}\n  //         color=\"primary\"\n  //         variant=\"overline\">\n  //         {metric}\n  //       </Typography>\n  //     </Grid>\n  //   );\n  // }\n  return <></>;\n}\n\nexport const DrawHistogram = (props) => {\n  const {\n    data,\n    hoveredRowColor,\n    ci,\n    size = { width: 100, height: 40 },\n  } = props;\n\n  let [hovered, setHovered] = useState(false);\n\n  let menu = function () {\n    return (\n      <>\n        <rect\n          x={0}\n          y={0}\n          width={width}\n          height={height}\n          rx={5}\n          fill={\"white\"}\n          opacity={0.5}></rect>\n\n        <g transform={`translate(0,0)`}>\n          {<SortIcon width={16} height={16} />}\n          <text x={20} y={10}>\n            Sort\n          </text>\n        </g>\n      </>\n    );\n  };\n\n  let average = ci[0];\n  let lowerBound = ci[1];\n  let upperBound = ci[2];\n\n  let width = size.width;\n  let height = size.height;\n\n  let barHeight = 20;\n  let barPadding = 2;\n  //compute scale for data;\n  let xDomain = d3.extent(data.bins);\n  let yDomain = d3.extent(data.hist);\n\n  let xScale = d3\n    .scaleLinear()\n    .domain(xDomain)\n    .range([10, width - 40]);\n\n  let yScale = d3.scaleLinear().domain(yDomain).range([0, barHeight]);\n\n  let barWidth = xScale(data.bins[1]) - xScale(data.bins[0]) - barPadding;\n\n  let textLabel = Math.round(average * 10) / 10; //label == '%' ? (Math.round(average * 100) + ' ' + label) : Math.round(average * 10) / 10 + ' ' + label\n\n  return (\n    <>\n      <svg\n        style={{ transform: \"translate(-10px,0px)\" }}\n        width={width}\n        height={height}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}>\n        <g transform={\"translate(10,0)\"}>\n          <line\n            x1={0}\n            y1={yScale.range()[1]}\n            x2={xScale.range()[1]}\n            y2={yScale.range()[1]}\n            style={{ stroke: \"rgb(0,0,0,0.25)\", strokeWidth: 1 }}></line>\n          {data.hist.map((d, i) => (\n            <rect\n              className=\"count\"\n              key={\"d_\" + data.bins[i]}\n              style={{ fill: hoveredRowColor || \"rgb(149 149 149)\" }} //rgb(93, 131, 210)\n              x={xScale(data.bins[i]) + barPadding / 2}\n              y={barHeight - yScale(d)}\n              width={barWidth}\n              height={yScale(d)}></rect>\n          ))}\n          <circle\n            className=\"count\"\n            style={{ fill: \"#ff5e00\", opacity: 1 }}\n            cx={xScale(average)}\n            cy={yScale.range()[1] / 2}\n            r={5}></circle>\n\n          <line\n            className=\"count\"\n            style={{ stroke: \"black\", strokeWidth: 2, opacity: 0.5 }}\n            x1={xScale(lowerBound)}\n            x2={xScale(upperBound)}\n            y1={yScale.range()[1] / 2}\n            y2={yScale.range()[1] / 2}></line>\n\n          <text\n            style={{ fontSize: \"1em\", textAnchor: \"middle\" }}\n            x={xScale(average)}\n            y={40}>\n            {\" \"}\n            {textLabel}{\" \"}\n          </text>\n\n          {hovered ? (\n            <>\n              <text\n                style={{\n                  fill: \"rgb(0,0,0,0.25)\",\n                  fontSize: \"1em\",\n                  textAnchor: \"end\",\n                }}\n                x={-2}\n                y={23}>\n                {\" \"}\n                {Math.floor(xScale.domain()[0])}{\" \"}\n              </text>\n              <text\n                style={{\n                  fill: \"rgb(0,0,0,0.25)\",\n                  fontSize: \"1em\",\n                  textAnchor: \"start\",\n                }}\n                x={xScale.range()[1] + 2}\n                y={23}>\n                {\" \"}\n                {Math.ceil(xScale.domain()[1])}{\" \"}\n              </text>\n            </>\n          ) : null}\n        </g>\n      </svg>\n    </>\n  );\n};\n\n//Compoment for the card for a single Condition\nfunction ConditionCard({ condition, conditionName, classes, taskID }) {\n  //Keeps track of which rows in the table are hovered on\n  const [hoveredRow, setHoveredRow] = useState();\n  const [clickedRow, setClickedRow] = useState();\n  let [hidden, setHidden] = useState(false);\n\n  let hoveredRowColor = \"#f59c3d\"; // '#9100e6';\n  let clickedRowColor = \"#3d77f5\"; // '#9100e6';\n  let freqPattern, data, metricValues;\n\n  //only compute when the condition changes\n  // useEffect(() => {\n  // console.log('calling use effect')\n  freqPattern = condition.patterns[0].topK;\n  data = condition.stats;\n\n  metricValues = [...new Set(data.map((m) => m.metric))];\n\n  freqPattern.map((action, i) => {\n    action.id = i;\n    action.seqObj = action.seq.map((a) => ({\n      name: a,\n      id: a,\n      count: action.count,\n    }));\n    return action;\n  });\n\n  // }, [condition]);\n  // console.log(condition.textAnswers.map(a=>a.answer).flat())\n  // console.log(metricValues)\n  return !metricValues ? (\n    <></>\n  ) : (\n      <React.Fragment key={\"ConditionCard_\" + conditionName}>\n        <Typography\n          onClick={() => {\n            setHidden(!hidden);\n          }}\n          style={{ cursor: \"pointer\" }}\n          className={classes.condition}\n          variant=\"overline\">\n          {conditionName}\n        </Typography>\n        {hidden ? (\n          <></>\n        ) : (\n            <Grid container className={classes.root} spacing={2}>\n              <Grid item xs={12}>\n                <Grid container justify=\"flex-start\" spacing={2}>\n                  <Grid key={\"cat\"} item>\n                    <Stimulus\n                      taskID={taskID}\n                      classes={classes}\n                      conditionName={conditionName}></Stimulus>\n                  </Grid>\n                  <Grid key={\"prov\"} item>\n                    <Box\n                      height={rowHeight}\n                      width={600}\n                      mt={\"5px\"}\n                      mb={\"6px\"}\n                      mr={\"10px\"}\n                      boxShadow={0}\n                      style={{ overflow: \"scroll\" }}>\n                      {\n                        <TableComponent\n                          rows={freqPattern}\n                          hoveredRow={hoveredRow}\n                          hoveredRowColor={hoveredRow ? hoveredRowColor : undefined}\n                          setHoveredRow={setHoveredRow}\n                          clickedRow={clickedRow}\n                          clickedRowColor={clickedRow ? clickedRowColor : undefined}\n                          setClickedRow={setClickedRow}></TableComponent>\n                      }\n                    </Box>\n                    <Typography\n                      className={classes.pos}\n                      variant=\"overline\"\n                      color=\"primary\">\n                      Actions\n                </Typography>\n                  </Grid>\n                  <Grid key={\"performanceMetrics\"} item xs>\n                    <Grid\n                      key={\"performanceMetrics\"}\n                      item\n                      style={{ display: \"block\" }}>\n                      <Box\n                        height={rowHeight / 2.5}\n                        p={\"20px\"}\n                        mt={\"5px\"}\n                        mb={\"6px\"}\n                        mr={\"10px\"}\n                        style={{ overflow: \"scroll\", display: \"inline-flex\" }}\n                        boxShadow={1}>\n                        {metricValues.map((metric) => {\n                          return (\n                            <Histogram\n                              key={metric}\n                              data={data}\n                              hoveredRow={hoveredRow}\n                              hoveredRowColor={\n                                hoveredRow ? hoveredRowColor : undefined\n                              }\n                              clickedRow={clickedRow}\n                              clickedRowColor={\n                                clickedRow ? clickedRowColor : undefined\n                              }\n                              metric={metric}></Histogram>\n                          );\n                        })}\n                      </Box>\n                      <Typography\n                        className={classes.pos}\n                        variant=\"overline\"\n                        color=\"primary\"\n                        style={{ display: \"block\" }}>\n                        Performance Metrics\n                  </Typography>\n                    </Grid>\n                    {''/* \n                    <Grid key={\"qualData\"} item xs>\n                      <Box\n                        height={rowHeight / 2.5}\n                        width={1}\n                        mt={\"5px\"}\n                        mb={\"6px\"}\n                        mr={\"10px\"}\n                        boxShadow={1}\n                        style={{ overflow: \"scroll\" }}>\n                        {metricValues.map((metric) => {\n                          console.log('dywootto', metric, data)\n                          return (\n                            <BarChart\n                              key={metric}\n                              allData={data}\n                              hoveredRow={hoveredRow}\n                              hoveredRowColor={\n                                hoveredRow ? hoveredRowColor : undefined\n                              }\n                              metric={metric}></BarChart>\n                          );\n                        })}\n                      </Box>\n                      <Typography\n                        className={classes.pos}\n                        variant=\"overline\"\n                        color=\"primary\">\n                        Word Counts for Qualitative Responses\n                  </Typography>\n                    </Grid>\n                    */}\n                  </Grid>\n\n\n                  {/* {condition.textAnswers.map(txt=>{\n              return <List dense={true}>\n              <ListItem>\n                <ListItemText\n                  primary={txt.answer}\n                  secondary={null}\n                />\n              </ListItem>\n          </List>\n            })} */}\n                </Grid>\n              </Grid>\n            </Grid>\n          )}\n        <Divider />\n      </React.Fragment>\n    );\n}\n\nfunction TaskCard({ task, classes }) {\n  let [hidden, setHidden] = useState(false);\n\n  return (\n    <Box\n      m={2}\n      key={\"box_\" + task.taskID}\n    // style={{ display: \"inline-block\" }}\n    >\n      {/* style={{ 'width': 600 }}  */}\n      <Card className={classes.root} key={task.taskID}>\n        <CardContent>\n          <Typography\n            variant=\"h5\"\n            component=\"h2\"\n            onClick={() => {\n              setHidden(!hidden);\n            }}\n            style={{ cursor: \"pointer\", display: \"inline-block\" }}>\n            {task.name}\n          </Typography>\n          {/* <Tooltip title={taskTooltip}> */}\n          <Typography\n            className={classes.pos}\n            color=\"textSecondary\"\n            style={{ display: \"inline-block\", marginLeft: \"10px\" }}>\n            {task.prompt + \"  [\" + task.answer + \"]\"}\n          </Typography>\n          <Divider />\n\n          {hidden ? (\n            <></>\n          ) : (\n              Object.keys(task.conditions).map((cKey) => {\n                let condition = task.conditions[cKey];\n                return (\n                  <ConditionCard\n                    key={task.taskID + cKey}\n                    condition={condition}\n                    conditionName={cKey}\n                    taskID={task.taskID}\n                    classes={classes}></ConditionCard>\n                );\n              })\n            )}\n        </CardContent>\n        {hidden ? (\n          <></>\n        ) : (\n            <CardActions>\n              <Button size=\"small\">Explore</Button>\n            </CardActions>\n          )}\n      </Card>\n    </Box>\n  );\n}\n\nexport default function TaskContainer() {\n  const classes = useStyles();\n  const bull = <span className={classes.bullet}></span>;\n\n  const { overviewData, homeTaskSort } = useContext(ProvenanceDataContext);\n\n  // console.log('data is ', data)\n\n  // console.log('homeTaskSort is ', homeTaskSort)\n\n  function getValues(task, conditionFilter, sortKey) {\n    let conditions = Object.keys(task.conditions);\n    let values = [];\n    conditions.map((c) => {\n      if (conditionFilter[c]) {\n        let metricValues = task.conditions[c].stats.find(\n          (s) => s.metric == sortKey\n        );\n        values.push(metricValues.ci[1]); //average for that metric\n      }\n    });\n    return values;\n  }\n  if (overviewData) {\n    // console.log(data.tasks)\n\n    if (homeTaskSort) {\n      console.log(\"homeTaskSort\", homeTaskSort);\n      let sortKey = homeTaskSort.metric;\n      let desc = homeTaskSort.desc;\n      let conditionFilter = homeTaskSort.conditions;\n\n      overviewData.tasks.sort((a, b) => {\n        let aValue, bValue;\n        if (sortKey == \"name\") {\n          aValue = a[sortKey];\n          bValue = b[sortKey];\n        } else {\n          let aValues = getValues(a, conditionFilter, sortKey);\n          let bValues = getValues(b, conditionFilter, sortKey);\n          aValue = desc ? Math.max(...aValues) : Math.min(...aValues);\n          bValue = desc ? Math.max(...bValues) : Math.min(...bValues);\n        }\n\n        let rValue = desc ? -1 : 1;\n        return aValue > bValue ? rValue : -rValue;\n      });\n\n      overviewData.taskList.sort((a, b) => {\n        let taskA = overviewData.tasks.find((t) => t.taskID == a);\n        let taskB = overviewData.tasks.find((t) => t.taskID == b);\n\n        if (!taskA || !taskB) {\n          return -1;\n        }\n        let indexA = overviewData.tasks.indexOf(taskA);\n        let indexB = overviewData.tasks.indexOf(taskB);\n\n        return indexA > indexB ? 1 : -1;\n      });\n\n      console.log(\"done sorting\");\n    }\n  }\n\n  // })\n  let colorScale = d3\n    .scaleLinear()\n    // .domain(d3.extent(allCounts))\n    .domain([0, 800])\n    .range([0.3, 1]);\n\n  //Only render when all API calls have returned\n  let ready = overviewData;\n  // console.log('actions', actions)\n  return ready == undefined ? (\n    <></>\n  ) : (\n      <>\n        {overviewData.taskList.map((taskID) => {\n          let task = overviewData.tasks.find((t) => t.taskID == taskID);\n          return task ? (\n            <TaskCard key={task.name} task={task} classes={classes}></TaskCard>\n          ) : (\n              <Skeleton\n                key={taskID}\n                variant=\"rect\"\n                width={\"98%\"}\n                height={500}\n                style={{ margin: \"20px\", padding: \"20px\" }}>\n                Loading {taskID}\n              </Skeleton>\n            );\n        })}\n      </>\n    );\n}\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TrendingFlatIcon from '@material-ui/icons/TrendingFlat';\nimport Divider from '@material-ui/core/Divider';\nimport { Alert, AlertTitle } from '@material-ui/lab';\n\nimport {\n    getTimelineFromServer,\n} from \"../fetchers/fetchMocks.js\";\n\nimport * as labella from \"labella\"\n\nimport { List } from 'react-virtualized';\n\nimport { useFetchAPIData } from \"../hooks/hooks\";\n\n// import * as PouchDB from 'pouchdb-browser';\n\n\nimport * as d3 from \"d3\";\n\nimport ProvenanceDataContext from \"../components/ProvenanceDataContext\";\nimport ProvenanceIsolatedNodes from \"../components/ProvenanceIsolatedNodes\";\n\nimport Grid, { GridSpacing } from '@material-ui/core/Grid';\nimport { pathToFileURL } from \"url\";\nimport { keys } from \"mobx\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 275,\n        flexGrow: 1\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    }\n});\n\nvar groupBy = function (xs, key) {\n    return xs.reduce(function (rv, x) {\n        (rv[x[key]] = rv[x[key]] || []).push(x);\n        return rv;\n    }, {});\n};\n\n\nfunction scale(width, maxValue) {\n    return d3\n        .scaleLinear()\n        .range([10, width])\n        .domain([0, maxValue]);\n}\n\nlet xDomain, yDomain, categories;\nconst TimeLineView = (props) => {\n    //  get timeline from server;\n    let [loadingTimeLineData, errorLoadingTimeLineData, timelineData] = useFetchAPIData(async () => {\n        console.log(\"requesting timeline data from server \");\n        return await getTimelineFromServer();\n    }, []);\n\n\n    return (<div>\n        {loadingTimeLineData && <Skeleton width={1000} height={1000}> Loading study data</Skeleton>}\n        {errorLoadingTimeLineData && <Alert severity=\"error\">\n            <AlertTitle>Error</AlertTitle>\n            There was an error fetching timeline data {errorLoadingTimeLineData}\n        </Alert>}\n        {timelineData && <StudyCard timelineData={timelineData}></StudyCard>}\n    </div>)\n\n}\nexport default TimeLineView;\n\nexport function StudyCard(props) {\n    const classes = useStyles();\n    const bull = <span className={classes.bullet}></span>;\n    let timelineData = props.timelineData;\n    let { overviewData } = useContext(ProvenanceDataContext);\n    console.log('dywootto study', overviewData, timelineData);\n    Object.assign(overviewData, timelineData)\n    // console.log('combinedData is ', data)\n\n    function eventMap(eventData, size = { width: 130, height: 30 }) {\n\n        let width = size.width;\n        let height = size.height;\n\n        let xScale = d3.scaleLinear().domain([0, xDomain[1]]).range([0, width - 40])\n        let yScale = d3.scaleLinear().domain(yDomain).range([height, 0])\n\n        //metrics to plot in each task label\n        let metrics = ['accuracy']\n\n\n        // let barHeight = 20;\n        let barPadding = 2;\n        let metricSquare = 8;\n        let barHeight = 16\n        let labelHeight = 15\n        let textWidth = 30;\n        let labelWidth = textWidth  //+ metrics.length * (metricSquare + barPadding) + textWidth  + barPadding\n        let axisHeight = yScale.range()[0] + barHeight + 3\n\n        //compute scale for data; \n        // let xDomain = d3.extent(data, d => d.elapsedTime);\n        // let yDomain = d3.extent(data, d => d.level);\n        // let colors = [\"rgb(96, 201, 110)\", \"rgb(0, 191, 128)\", \"rgb(0, 180, 147)\", \"rgb(0, 167, 165)\", \"rgb(0, 153, 179)\", \"rgb(0, 138, 188)\", \"rgb(0, 122, 189)\", \"rgb(0, 104, 182)\", \"rgb(42, 85, 168)\", \"rgb(77, 65, 147)\"]\n        let colors = [\"rgb(0, 153, 179)\", \"rgb(0, 138, 188)\", \"rgb(0, 122, 189)\", \"rgb(0, 104, 182)\", \"rgb(42, 85, 168)\", \"rgb(77, 65, 147)\"]\n        // let colors = [ \"#e6f598\", \"#abdda4\", \"#66c2a5\", \"#3288bd\", \"#5e4fa2\", \"#9e0142\", \"#d53e4f\", \"#f46d43\", \"#fdae61\",\"#fee08b\", \"#ffffbf\", ]\n\n        let colorScale = d3.scaleOrdinal(colors).domain(categories);\n\n        let color = function (d) {\n            return (d.eventID == 'task' ? 'rgba(171,171,171,0.5)' : d.eventID == 'browse away' ? 'black' : colorScale(d.category))\n        }\n\n        let hoverFill = function (d) {\n            return (d.uniqueID == hoveredElement ? '#ff5800' : 'rgba(171, 171, 171, 0.5)')\n        }\n\n        let maxTime = Math.max(...eventData.map(d => d.elapsedTime + d.duration))\n        let phases = eventData.filter(d => d.level == 0)\n\n        var filteredData = eventData.filter(d => d.eventID == 'task' && d.taskID && d.taskID).sort((a, b) => a.elapsedTime > b.elapsedTime ? 1 : - 1);\n\n        //compute y position for labels\n        let y = 1;\n        let labelPos = [];\n\n        let nodes = filteredData.map(d => {\n            let labelStart = xScale(d.elapsedTime)\n            let labelExtent = xScale(d.elapsedTime) + labelWidth + 8;\n            let level = labelPos.find(p => p.x < labelStart);\n            let n = {};\n            n['data'] = d;\n            if (!level) {\n                y = y + 1;\n                labelPos.push({ y, x: labelExtent, label: d.shortName })\n                n['y'] = y;\n            } else {\n                n['y'] = level.y\n                labelPos = labelPos.filter(p => p.y !== level.y);\n                labelPos.push({ y: level.y, x: labelExtent, label: d.shortName })\n                labelPos.sort((a, b) => a.y < b.y ? -1 : 1)\n            }\n            n['labelWidth'] = labelWidth\n            return n;\n        })\n\n        let metricColorScales = {}; //one color scale per metric\n        let metricYScales = {} // one y scale per metric\n        let taskTimeScales = {} // one time scale per task (depending on the range of completion times)\n\n        let colorRange = [\"#e6550d\", \"#3182bd\"];\n        let heightRange = [barPadding, labelHeight - barPadding]\n        let timeScaleRange = [barPadding, textWidth - 2 * barPadding];\n\n\n        let getStats = function (taskID, condition, metric) {\n            let taskInfo = overviewData.tasks.find(dd => dd.taskID == taskID);\n            let out = {}\n            if (taskInfo) {\n                let stats = taskInfo.conditions[condition.trim()].stats.find(t => t.metric == metric);\n                if (stats) {\n                    out['average'] = stats.ci[0];\n                    out['lowerBound'] = stats.ci[1];\n                    out['upperBound'] = stats.ci[2];\n                    out['min'] = stats.min;\n                    out['max'] = stats.max;\n\n                }\n\n            }\n            return out\n        }\n\n        //get stats for all metrics to be displayed in the label plus time. \n        nodes.map(n => {\n            n.data.stats = {}\n            metrics.map(metric => {\n                n.data.stats[metric] = getStats(n.data.taskID, n.data.condition, metric)\n            })\n            n.data.stats['time'] = getStats(n.data.taskID, n.data.condition, 'time')\n        })\n\n        metrics.map(metric => {\n            //create metric scales for color and height of bars\n            metricColorScales[metric] = d3.scaleLinear().range(colorRange).domain(overviewData.metrics[metric])\n            metricYScales[metric] = d3.scaleLinear().range(heightRange).domain(overviewData.metrics[metric])\n        })\n\n        overviewData.taskList.map(task => {\n            overviewData.conditions.map(condition => {\n                let stats = getStats(task, condition, 'time')\n                //WARNING, right now setting a single range for time, regardless of task/condtion since the backend returns a common scale for all metrics\n                taskTimeScales[task] = d3.scaleLinear().range(timeScaleRange).domain([stats['min'], stats['max']])\n            })\n        })\n\n        // console.log(nodes)\n        // console.log('nodePos',labelPos)\n\n\n        return (\n            <svg width={width} height={300} >\n                {/* add axis */}\n                {/* {console.log(data.map(d=>d.elapsedTime), Math.max(...data.map(d=>d.elapsedTime)))} */}\n                <g style={{ \"transform\": \"translate(0px, 200px)\" }}>\n                    {/* <line x1={0} y1={axisHeight} x2={xScale(maxTime) + 5} y2={axisHeight} style={{ \"stroke\": \"rgb(0,0,0,0.25)\", \"strokeWidth\": 1 }}></line> */}\n                    {eventData.map((d, i) => {\n                        let rectWidth = (xScale(d.duration) > 5) ? xScale(d.duration) - barPadding : xScale(d.duration)\n\n                        let barComponent = <React.Fragment key={d.participantID + '_' + Math.random()}>\n                            {/* <Tooltip title={(d.eventID == 'task' ? d.taskID : d.eventID) + \" [\" + d.duration + ' / ' + d.accuracy + \"]\"}> */}\n                            <rect className='count' key={'d_' + d.eventID + '_' + d.elapsedTime} onMouseOver={() => hovered(d)} onMouseOut={() => setHovered(undefined)} style={{ fill: color(d), opacity: (d.eventID == 'task' ? .8 : .6) }} // \"rgb(93, 131, 210)\"\n                                x={xScale(d.elapsedTime) + barPadding}\n                                y={yScale(d.level)}\n                                width={rectWidth}\n                                height={d.eventID == 'task' ? barHeight : barHeight / 2}></rect>\n\n\n                            {/* </Tooltip> */}\n\n                        </React.Fragment>\n\n                        //  console.log('taskInfo', taskInfo)\n\n                        return barComponent\n                    }\n\n                    )}\n\n                    {nodes.map(n => <line x1={xScale(n.data.elapsedTime) + barPadding} y1={yScale(n.data.level) + 15} x2={xScale(n.data.elapsedTime) + barPadding} y2={yScale(n.y) + labelHeight} style={{ stroke: 'rgb(150,150,150)', strokeWidth: '.8px' }}></line>)}\n\n                    {nodes.map(n => {\n                        let ciPlot, background;\n\n                        let timeScale = taskTimeScales[n.data.taskID];\n\n                        let label = <g style={{ \"transform\": \"translate(\" + (xScale(n.data.elapsedTime) + barPadding) + \"px, \" + (yScale(n.y)) + \"px)\" }}>\n                            <rect className='count' key={'background_' + n.data.eventID} style={{ fill: 'rgb(245,245,245)' }}\n                                x={0}\n                                y={0}\n                                width={labelWidth}\n                                height={labelHeight}></rect>\n\n                            <line x1={0} y1={labelHeight} x2={n.labelWidth} y2={labelHeight} style={{ stroke: 'rgb(150,150,150)', strokeWidth: '.8px' }}></line>\n\n                            <text\n                                style={{ fontSize: \".75em\", fontWeight: 'bold', textAnchor: \"start\", fill: 'rgb(90,90,90)', alignmentBaseline: \"hanging\" }}\n                                x={barPadding * 2}\n                                y={barPadding}>\n                                {\" \"}\n                                {n.data.shortName}{\" \"}\n                            </text>\n                        </g>\n\n                        if (Object.keys(n.data.stats).includes('time')) {\n                            let plotHeight = yScale(n.y) + barHeight\n                            let maxWidth = Math.max(xScale(n.data.duration) + barPadding, xScale(n.data.upperBound));\n\n                            let avg = n.data.stats['time'].average\n                            let slower = avg < n.data.duration;\n                            let minTime = Math.min(avg, n.data.duration)\n                            let diff = Math.abs(avg - n.data.duration)\n\n                            let timePadding = 2;\n                            let glyphSize = 4;\n                            let lineHeight = 2;\n\n                            ciPlot = <g style={{ \"transform\": \"translate(\" + (xScale(n.data.elapsedTime) + (labelWidth - textWidth) + barPadding) + \"px, \" + (yScale(n.y)) + \"px)\" }}>\n\n                                <line x1={timeScale.range()[0]} y1={labelHeight / 2 + lineHeight / 2} x2={timeScale.range()[1]} y2={labelHeight / 2 + lineHeight / 2} style={{ stroke: 'rgb(200,200,200)', strokeWidth: '.8px' }}></line>\n\n\n\n                                {/*\n                                <line\n                                    className=\"count\"\n                                    style={{ stroke: \"black\", strokeWidth: 3, opacity: 0.5 }}\n                                    x1={compressedTimeScale(n.data.lowerBound)}\n                                    x2={compressedTimeScale(n.data.upperBound)}\n                                    y1={0}\n                                    y2={0}></line> */}\n                                {/* // PROBLEM HERE */}\n                                <rect x={timeScale(minTime)} y={timePadding} width={Math.abs(timeScale(avg) - timeScale(n.data.duration))} height={labelHeight - 2 * timePadding} style={{ fill: slower ? '#ff8d00' : 'rgb(53 130 184)', opacity: '.8' }}></rect>\n\n                                <rect x={timeScale(minTime)} y={labelHeight / 2} width={timeScale(diff)} height={lineHeight} style={{ fill: slower ? '#ff8d00' : 'rgb(53 130 184)', opacity: '.8' }}></rect>\n                                {/* <rect x={timeScale(avg)} y={timePadding} width={1} height={labelHeight - 2 * timePadding} style={{ fill: 'black', opacity: '1', 'rx': 0 }}></rect> */}\n\n                                {/* <rect x={0} y={0} width ={glyphSize} height={glyphSize}  transform ={\"translate(\" + timeScale(avg) + \",\" +  (labelHeight/2) + \") rotate(45,2,2)\"} style={{ fill: 'black', opacity: '1'}}></rect> */}\n                                <rect x={0} y={0} width={glyphSize} height={glyphSize} style={{ fill: 'black', opacity: '1', transform: \"translate(\" + timeScale(avg) + \"px,\" + (labelHeight / 2 - glyphSize / 2) + \"px) rotate(45deg)\" }}></rect>\n\n                                <rect x={0} y={0} width={glyphSize} height={glyphSize} style={{ fill: 'red', opacity: '1', transform: \"translate(\" + timeScale(n.data.duration) + \"px,\" + (labelHeight / 2 - glyphSize / 2) + \"px) rotate(45deg)\" }}></rect>\n\n\n                                {/* <circle\n                                    className=\"count\"\n                                    style={{ stroke: \"black\", opacity: 1, strokeWidth: '1px' }}\n                                    cx={ slower ? compressedTimeScale.range()[0] : compressedTimeScale(diff)  }\n                                    cy={0}\n                                    r={1}></circle> */}\n\n                                {/* <line x1={compressedTimeScale(n.data.average)} y1={-3} x2={compressedTimeScale(n.data.average)} y2={3} style={{ stroke: 'black', strokeWidth: '1px' }}></line> */}\n\n                                {/* <line x1={compressedTimeScale(n.data.duration)} y1={-3} x2={compressedTimeScale(n.data.duration)} y2={3} style={{ stroke: '#ff5e00', strokeWidth: '1px' }}></line> */}\n\n\n                            </g>\n                        }\n                        return <> {background} {label}   </> // {ciPlot}\n\n\n                    })}\n\n                    {nodes.map(n => {\n\n                        let metricPlot = <>\n                            {metrics.map((m, i) => {\n\n                                let avg = n.data.stats[m].average;\n                                let value = n.data[m]\n                                let vertScale = metricYScales[m];\n                                let colorScale = metricColorScales[m];\n                                let better = value > avg;\n                                let maxValue = Math.max(avg, value)\n                                let diff = Math.abs(avg - value)\n\n\n                                return <g style={{ \"transform\": \"translate(\" + (xScale(n.data.elapsedTime) + textWidth + barPadding + i * (metricSquare + barPadding)) + \"px, \" + yScale(n.y) + \"px)\" }}>\n                                    {/* <line x1={xScale(n.data.elapsedTime) + textWidth + i * (metricSquare + barPadding)} y1={yScale(n.y)} x2={xScale(n.data.elapsedTime) + textWidth  + i * (metricSquare + barPadding)} y2={yScale(n.y) + labelHeight} style={{ \"stroke\": \"rgb(0,0,0,0.25)\", \"strokeWidth\": .8 }}></line> */}\n                                    {/* <rect className='count' key={'d_' + n.data.eventID + Math.random()} style={{ fill: colorScale(value), opacity: 1 }} // 'rx': metricSquare \n                                        x={0}\n                                        y={labelHeight - yScale(value)}\n                                        width={n.data.eventID == 'task' ? metricSquare : 0}\n                                        height={2}></rect> */}\n                                    <rect className='count' key={'d_' + n.data.eventID + Math.random()} style={{ fill: 'black', opacity: 1 }} // 'rx': metricSquare \n                                        x={0}\n                                        y={labelHeight - vertScale(avg)}\n                                        width={n.data.eventID == 'task' ? metricSquare : 0}\n                                        height={1}></rect>\n\n                                    {/* <rect className='count' key={'d_' + n.data.eventID + Math.random()} style={{ fill: 'red', opacity: 1 }} // 'rx': metricSquare \n                                        x={-5}\n                                        y={labelHeight - vertScale(value)}\n                                        width={n.data.eventID == 'task' ? metricSquare + 5 : 0}\n                                        height={.5}></rect> */}\n\n\n                                    <rect className='count' key={'d_' + n.data.eventID + Math.random()} style={{ fill: colorScale(value), opacity: .8 }} // 'rx': metricSquare \n                                        x={0}\n                                        y={labelHeight - vertScale(maxValue)}\n                                        width={n.data.eventID == 'task' ? metricSquare : 0}\n                                        height={Math.abs(vertScale(avg) - vertScale(value))}></rect>\n\n                                    {/* {i == metrics.length - 1 ? <line x1={xScale(n.data.elapsedTime) + textWidth + barPadding + (i + 1) * (metricSquare + barPadding)} y1={yScale(n.y)} x2={xScale(n.data.elapsedTime) + textWidth + barPadding + (i + 1) * (metricSquare + barPadding)} y2={yScale(n.y) + labelHeight} style={{ \"stroke\": \"rgb(0,0,0,0.25)\", \"strokeWidth\": .8}}></line> */}\n                                    {/* : ''} */}\n\n                                </g>\n                            })}\n                        </>\n\n                        return <></> //metricPlot\n                    }\n\n\n                    )}\n                    {phases.map(p =>\n                        <text\n                            style={{ fontSize: \"1em\", textAnchor: \"start\", fill: 'rgb(90,90,90)' }}\n                            x={xScale(p.elapsedTime)}\n                            y={axisHeight + 5}>\n                            {\" \"}\n                            {p.label}{\" \"}\n                        </text>\n                    )}\n                    <text\n                        style={{ fontSize: \"1em\", textAnchor: \"start\", fill: 'rgb(90,90,90)' }}\n                        x={xScale(maxTime) + 5}\n                        y={axisHeight - 7}>\n                        {\" \"}\n                        {Math.round(maxTime) + ' min'}{\" \"}\n                    </text>\n\n\n                </g>\n            </svg>)\n    }\n\n    function hovered(d) {\n        if (hoveredElement !== d.uniqueID) {\n            setHovered(d.uniqueID)\n        }\n\n    }\n\n    useEffect(() => {\n        if (overviewData) {\n            participants = overviewData.participants\n            participants.map(p => {\n                p.study.map(d => {\n                    d.uniqueID = d.eventID + '_' + Math.random()\n                })\n            })\n        }\n\n    }, [overviewData])\n\n    let [hoveredElement, setHovered] = useState();\n\n    let participants, conditionGroups;\n    if (overviewData) {\n        participants = overviewData.participants\n        //the concept of a single condition per participant is not always valid. \n        // participants.map(p => p.condition = p.study[0].condition)\n        let allLevels = participants.map(p => p.study.map(s => s.level)).flat();\n        // console.log(allLevels)\n        categories = [... new Set(participants.map(p => p.study.map(s => s.category)).flat())];\n        xDomain = d3.extent(participants, d => d.minutesToComplete);\n        yDomain = d3.extent(allLevels);\n        // console.log(yDomain)\n        conditionGroups = groupBy(participants, 'condition');\n    }\n\n\n    // })\n    let colorScale = d3.scaleLinear()\n        // .domain(d3.extent(allCounts))\n        .domain([0, 800])\n        .range([0.3, 1])\n\n    //Only render when all API calls have returned \n    let ready = overviewData;\n    // if (ready) {\n    //     // console.log(data)\n    // }\n    // console.log('events', eventGroups)\n    return (ready == undefined ? <></> : <React.Fragment key={'events'}>\n        <Box m={2} style={{ display: 'inline-block' }} >\n            <Card className={classes.root} key={'participantOverview'}  >\n                <CardContent>\n                    <Typography variant=\"h5\" component=\"h2\">\n                        Participant Timeline\n                </Typography>\n                    {/* <Typography className={classes.pos} color=\"textSecondary\"  >\n                        Event Sequences\n                    </Typography> */}\n                    <Divider />\n                    <Box mt={2} >\n                        <Grid container className={classes.root} spacing={2}>\n                            {Object.keys(conditionGroups).map(cond =>\n                                <Grid item xs={12} key={cond}>\n                                    <Grid container justify=\"flex-start\" spacing={2}>\n                                        {/* <Box display=\"flex\" justifyContent=\"center\" p={2}>\n                                            <Typography style={{ display: 'block' }} color=\"primary\" variant='overline'  >\n                                                {cond}\n                                            </Typography>\n                                        </Box> */}\n\n                                        <Divider />\n\n                                        {conditionGroups[cond].slice(0, 5).map(participant => {\n                                            return <>\n                                                <Grid key={participant.participantID} item>\n                                                    <Box borderBottom={1} boxShadow={0} p={1} style={{ borderColor: 'rgba(171, 171, 171, 0.5)' }}>\n                                                        {/* <Box display=\"flex\" justifyContent=\"flex-end\"> */}\n\n                                                        <Typography style={{ display: 'block' }} color=\"primary\" variant='overline'  >\n                                                            {'ParticipantID: ' + participant.participantID}\n                                                        </Typography>\n                                                        <Typography style={{ display: 'block' }} color=\"primary\" variant='overline'  >\n                                                            {'Avg. Accuracy: ' + (Math.round(participant.averageAccuracy * 100) / 100 || undefined)}\n                                                        </Typography>\n                                                        {/* <Typography style={{ display: 'block' }} color=\"primary\" variant='overline'  >\n                                                                {'ID:' + participant.participantID.slice(0, 3) + '...' + participant.participantID.slice(-3)}\n                                                            </Typography> */}\n                                                        {/* </Box> */}\n\n                                                        {eventMap(participant.study, { width: 1600, height: 25 })}\n                                                    </Box>\n\n                                                </Grid>\n                                            </>\n                                        }\n\n                                        )}\n                                    </Grid>\n                                </Grid>)}\n\n                        </Grid>\n                    </Box>\n                </CardContent>\n            </Card>\n        </Box>\n\n    </React.Fragment>\n\n    );\n}\n\n\n// virtualized list\n{/* <Grid container className={classes.root} spacing={2}>\n{ Object.keys(conditionGroups).map(cond=>{\n    let group = conditionGroups[cond];\n    function rowRenderer({\n        key, // Unique key within array of rows\n        index, // Index of row within collection\n        isScrolling, // The List is currently being scrolled\n        isVisible, // This row is visible within the List (eg it is not an overscanned row)\n        style, // Style object to be applied to row (to position it)\n      }) {\n          let el = group[index]\n        return (\n            <Grid key={el.participantID} item>\n            <Typography style={{ display: 'block' }} color=\"primary\" variant='subtitle1'  >\n            {'Avg. Accuracy: ' + el.averageAccuracy}\n            </Typography>\n            <Typography style={{ display: 'block' }} color=\"primary\" variant='overline'  >\n            {el.participantID.slice(0,3) + '...' +  el.participantID.slice(el.participantID.length-4,3)}\n            </Typography>\n            \n            {eventMap(el.study, { width: 800, height: 50 })}\n            </Grid>\n        );\n      }\n\n      return <>                            \n    <Grid item xs={6}>\n    <Grid container justify=\"flex-start\" spacing={2}>\n    <Typography style={{ display: 'block' }} color=\"primary\" variant='overline'  >\n     {cond}\n    </Typography>\n    <Divider />\n    <List\n            width={1000}\n            height={1000}\n            rowCount={group.length}\n            rowHeight={20}\n            rowRenderer={rowRenderer}\n            />\n              </Grid>\n    </Grid>\n        </>\n\n    }\n        // conditionGroups[cond].map(participant =>{\n         \n  )})\n\n</Grid> */}\n","import React, { useContext } from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport TrendingFlatIcon from \"@material-ui/icons/TrendingFlat\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport { useFetchAPIData } from \"../hooks/hooks\";\n\n// import * as PouchDB from 'pouchdb-browser';\n\nimport * as d3 from \"d3\";\n\nimport ProvenanceDataContext from \"../components/ProvenanceDataContext\";\nimport ProvenanceIsolatedNodes from \"../components/ProvenanceIsolatedNodes\";\n\nimport Grid, { GridSpacing } from \"@material-ui/core/Grid\";\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    flexGrow: 1,\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n});\n\n\nfunction scale(width, maxValue) {\n  return d3.scaleLinear().range([10, width]).domain([0, maxValue]);\n}\n\n\n\nexport default function Upload() {\n\n  const classes = useStyles();\n  const bull = <span className={classes.bullet}></span>;\n\n  const { data } = useContext(\n    ProvenanceDataContext\n  );\n\n  // })\n  let colorScale = d3\n    .scaleLinear()\n    // .domain(d3.extent(allCounts))\n    .domain([0, 800])\n    .range([0.3, 1]);\n\n  //Only render when all API calls have returned\n  let ready = data\n  // console.log('actions', actions)\n  return ready == undefined ? (\n    <></>\n  ) : (\n      <>\n\n        {data.tasks.map(task => {\n          let taskTooltip = <Typography>{task.prompt}</Typography>;\n          return (\n            <Box\n              m={2}\n              key={\"box_\" + task.taskID}\n              style={{ display: \"inline-block\" }}>\n              {/* style={{ 'width': 600 }}  */}\n              <Card className={classes.root} key={task.taskID}>\n                <CardContent>\n                  <Typography variant=\"h5\" component=\"h2\">\n                    {task.name}\n                  </Typography>\n                  <Tooltip title={taskTooltip}>\n                    <Typography className={classes.pos} color=\"textSecondary\">\n                      {task.prompt.slice(0, 60)}\n                    </Typography>\n                  </Tooltip>\n                  <Divider />\n\n                  {Object.keys(task.conditions).map(key => {\n                    let condition = task.conditions[key];\n                    let freqPattern = condition.patterns[0].topK;\n\n                    // let frequentActions = condition.actions.map(a => ({ event: a.label, id: a.actionID, count: a.count, scale: colorScale(a.count) })) //actions.filter(a => a.taskID == task.taskID && a.condition == condition).splice(0, 5).map(a => ({ event: a.label, id: a.actionID, count: a.count, scale: colorScale(a.count) }))\n                    let filteredMetrics = condition.stats //metrics.filter(m => m.group.taskID == task.taskID && m.group.condition == condition);\n\n                    let metricValues = [\n                      ...new Set(filteredMetrics.map((m) => m.metric)),\n                    ]; // console.log(frequentActions)\n\n                    let nodeWidth = 25;\n                    let characterWidth = 5;\n                    let textHeight = 8\n                    let xScale = d3.scaleLinear().domain([0, 1]).range([0, nodeWidth + 10])\n                    let yScale = d3.scaleLinear().domain([0, 1]).range([0, 15])\n                    let colorScale = d3.scaleOrdinal(d3.schemeTableau10).domain(data.actions);\n\n                    let renderPattern = function (nodes) {\n                      let background = nodes.map((n) => {\n                        return <>\n\n                          <line x1={n.x + nodeWidth / 2} y1={yScale(n.y)} x2={n.x + nodeWidth / 2} y2={yScale(0) + nodeWidth} style={{ stroke: 'rgb(150,150,150)', strokeWidth: '1.2px', 'strokeLinecap':'round' }}></line>\n                          <line x1={n.x + nodeWidth / 2} y1={yScale(n.y)} x2={n.x + nodeWidth / 2 + 3} y2={yScale(n.y)} style={{ stroke: 'rgb(150,150,150)', strokeWidth: '1.2px' }}></line>\n                          <rect className='count' key={'background_' + n.event} style={{ fill: colorScale(n.data.event), stroke: 'white', strokeWidth: '1px', 'rx': 2 }}\n                            x={n.x}\n                            y={yScale(0)}\n                            width={nodeWidth}\n                            height={nodeWidth}></rect>\n                        </>\n\n                      })\n\n                      let labels = nodes.map((n) => {\n                        return <>\n                          <rect className='count' key={'background_' + n.event} style={{ fill: 'white', stroke: 'white', strokeWidth: '1px' }}\n                            x={n.x + nodeWidth / 2+3}\n                            y={yScale(n.y)-2}\n                            width={n.labelExtent}\n                            height={textHeight}></rect>\n\n                          <text\n                            style={{ fontSize: \".75em\", textAnchor: \"start\", fill: 'rgb(90,90,90)' }}\n                            x={n.x + nodeWidth / 2 + 5 }\n                            y={yScale(n.y) + textHeight/2}>\n                            {\" \"}\n                            {n.data.event}{\" \"}\n                          </text>\n                        </>\n\n                      })\n\n                      return <svg width={300} height={yScale(Math.max(...nodes.map(n => n.y))) + 50} >\n                        <g style={{ \"transform\": \"translate(50px, 30px)\" }}>\n\n                          {background} {labels}\n                        </g>\n\n\n                      </svg>\n                    }\n\n                    return (\n                      <React.Fragment key={'taskcard_' + key}>\n                        <Typography variant=\"overline\">{key}</Typography>\n\n                        <Grid container className={classes.root} spacing={2}>\n                          <Grid item xs={12}>\n                            <Grid container justify=\"flex-start\" spacing={2}>\n                              <Grid key={\"prov\"} item>\n                                <>{[0, 1, 2].map(i => {\n                                  let frequentActions = freqPattern[i].seq.map(a => ({ event: a, id: a, count: freqPattern[i].count, scale: colorScale(freqPattern[i].count) })) //actions.filter(a => a.taskID == task.taskID && a.condition == condition).splice(0, 5).map(a => ({ event: a.label, id: a.actionID, count: a.count, scale: colorScale(a.count) }))\n\n                                  let evenlabelPos = []\n                                  let eveny = 1;\n                                  let labelPos = []\n                                  let y = 0.5;\n                                  let nodes = frequentActions.map((d, i) => {\n                                    // console.log(d.shortName)\n                                    let labelStart = xScale(i)\n                                    let labelExtent = d.event.length * characterWidth + 30;\n                                    let n = {};\n                                    n['data'] = d;\n                                    let level\n                                    if (i%2 == 0) {\n                                       level = evenlabelPos.find(p => p.x < labelStart);\n                                    }else{\n                                      level = labelPos.find(p => p.x < labelStart);\n                                   }\n                                    // console.log(level)\n                                    if (!level) {\n                                      if (i%2 == 0){\n                                        eveny = eveny + 1;\n                                        evenlabelPos.push({ y:eveny, x: labelExtent, label: d.shortName })\n                                        n['y'] = eveny;\n                                      } else {\n                                        y = y - 1;\n                                        labelPos.push({ y, x: labelExtent, label: d.shortName })\n                                        n['y'] = y;\n                                      }\n                                  \n                                    } else {\n\n                                      if (i % 2 == 0) {\n                                        n['y'] = level.y\n                                        labelPos = labelPos.filter(p => p.y !== level.y);\n                                        labelPos.push({ y: level.y, x: labelExtent, label: d.shortName })\n                                        labelPos.sort((a, b) => a.y < b.y ? -1 : 1)\n                                      } else {\n                                        n['y'] = level.y\n                                        labelPos = labelPos.filter(p => p.y !== level.y);\n                                        labelPos.push({ y: level.y, x: labelExtent, label: d.shortName })\n                                        labelPos.sort((a, b) => a.y < b.y ? -1 : 1)\n                                      }\n\n                                      \n                                    }\n                                    n['x'] = labelStart;\n                                    n['labelExtent'] = labelExtent\n                                    return n;\n                                  })\n\n                                  return <Box mt={\"5px\"} mb={\"6px\"}>\n                                    {renderPattern(nodes)}\n                                  </Box>\n                                }\n                                )}\n                                </>\n                              </Grid>\n                            </Grid>\n                          </Grid>\n                        </Grid>\n                        <Divider />\n                      </React.Fragment>\n                    );\n                  })}\n                  <div></div>\n                </CardContent>\n                <CardActions>\n                  <Button size=\"small\">Explore</Button>\n                </CardActions>\n              </Card>\n            </Box>\n          );\n        })}\n      </>\n    );\n}\n","//@ts-nocheck\nimport { storiesOf } from \"@storybook/react\";\nimport React, { useState, useRef, useContext, useEffect, useMemo } from \"react\";\nimport { start } from \"repl\";\nimport { withKnobs, optionsKnob as options } from \"@storybook/addon-knobs\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Modal from \"@material-ui/core/Modal\";\nimport ColorPicker from \"material-ui-color-picker\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { IsolatedNode } from \"./ProvenanceIsolatedNodes\";\nimport ProvenanceDataContext from \"./ProvenanceDataContext\";\nimport Button from \"@material-ui/core/Button\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Popper from \"@material-ui/core/Popper\";\nimport EventManager, { GroupedList } from \"./EventManager\";\nimport styled from \"styled-components\";\nimport Switch from \"@material-ui/core/Switch\";\n\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { values } from \"mobx\";\nconst Item = styled.div`\n  display: flex;\n  user-select: none;\n  padding: 0.5rem;\n  margin: 0 0 0.5rem 0;\n  align-items: flex-start;\n  align-content: flex-start;\n  line-height: 1.5;\n  border-radius: 3px;\n  background: #fff;\n  border: 1px ${(props) => (props.isDragging ? \"dashed #000\" : \"solid #ddd\")};\n`;\n\nconst Clone = styled(Item)`\n  ~ div {\n    transform: none !important;\n  }\n`;\n\nfunction checkIfGroupDuplicates(allItemConfig) {\n  const usedGroupedElements = {};\n  let duplicatedFlag = false;\n  Object.entries(allItemConfig).map(([key, value]) => {\n    if (value.type === \"group\") {\n      value.elements.forEach((element) => {\n        if (usedGroupedElements[element.id]) {\n          duplicatedFlag = true;\n          return;\n        }\n        usedGroupedElements[element.id] = true;\n      });\n    }\n  });\n  return duplicatedFlag;\n}\nconst ActionLegendDragContainer = (props) => {\n  /*const { actionConfigurationsList, setActionConfigurationsList } = useContext(\n    ProvenanceDataContext\n  );*/\n  // console.log(props);\n  const {\n    actionConfigurations,\n    setActionConfigurationsList,\n    collapsed,\n    handleActionItemEdit,\n    isActionLegendEditing,\n    hashMapConfig,\n  } = props;\n  const listRef = useRef(null);\n\n  function handleAddConfigurationToList(item) {\n    const copy = [...actionConfigurations];\n    copy.push(item);\n    setActionConfigurationsList(copy);\n  }\n  /*function handleAddConfigurationToList(item) {\n    const copy = [...actionConfigurationsList];\n    copy.push(item);\n    setActionConfigurationsList(copy);\n  }*/\n\n  function onDragEnd(result) {\n    const { source, destination } = result;\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n    let copyListItem, copyListEvents;\n    switch (source.droppableId) {\n      case destination.droppableId: // if dropped on same list\n        copyListEvents = { ...listEvents };\n\n        copyListItem = JSON.parse(\n          JSON.stringify(copyListEvents[destination.droppableId])\n        );\n        copyListItem = Object.assign(copyListItem, {\n          elements: reorder(\n            listEvents[source.droppableId].elements,\n            source.index,\n            destination.index\n          ),\n        });\n        handleActionConfigurationChange(copyListItem);\n\n        copyListEvents[destination.droppableId] = copyListItem;\n\n        //setListEvents(copyListEvents);\n        break;\n      case \"ITEMS\": // if dragged from items\n        copyListEvents = { ...listEvents };\n\n        copyListItem = JSON.parse(\n          JSON.stringify(copyListEvents[destination.droppableId])\n        );\n        copyListItem = Object.assign(copyListItem, {\n          elements: copy(\n            actionConfigurations,\n            listEvents[destination.droppableId].elements,\n            source,\n            destination\n          ),\n        });\n        copyListEvents[destination.droppableId] = copyListItem;\n\n        // console.log(\"in list event\", copyListItem, copyListEvents);\n        if (checkIfGroupDuplicates(copyListEvents)) {\n          console.error(\"cannot add duplicate items to group\");\n          return;\n        }\n        handleActionConfigurationChange(copyListItem);\n        //setListEvents(copyListEvents);\n        break;\n      default:\n        // if moved from a list\n        copyListEvents = { ...listEvents };\n        // move in between lists\n        let copiedSource = JSON.parse(\n          JSON.stringify(copyListEvents[source.droppableId])\n        );\n        let copiedDestination = JSON.parse(\n          JSON.stringify(copyListEvents[destination.droppableId])\n        );\n\n        const movedChanges = move(\n          listEvents[source.droppableId].elements,\n          listEvents[destination.droppableId].elements,\n          source,\n          destination\n        );\n\n        copiedSource = Object.assign(copiedSource, {\n          elements: movedChanges[source.droppableId],\n        });\n        copiedDestination = Object.assign(copiedDestination, {\n          elements: movedChanges[destination.droppableId],\n        });\n        handleActionConfigurationChange(copiedSource);\n        handleActionConfigurationChange(copiedDestination);\n\n        copyListEvents[source.droppableId] = copiedSource;\n        copyListEvents[destination.droppableId] = copiedDestination;\n\n        //setListEvents(copyListEvents);\n\n        break;\n    }\n  }\n\n  function handleActionConfigurationChange(item) {\n    // match item on the id, change it\n    const index = actionConfigurations.findIndex(\n      (config) => config.id === item.id\n    );\n    let copy = [...actionConfigurations];\n    copy[index] = item;\n    setActionConfigurationsList(copy);\n  }\n  // filter\n\n  let listEvents = {};\n  actionConfigurations.forEach((config) => {\n    listEvents[config.id] = config;\n  });\n\n  /*return (\n    <GroupedList\n      listEvents={listEvents}\n      handleActionConfigurationChange={handleActionConfigurationChange}\n      handleAddGroup={handleAddConfigurationToList}\n      initialItems={actionConfigurationsList}\n      handleEditActionConfiguration={handleEditActionConfiguration}\n      type=\"sequence\"></GroupedList>*/\n\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <ActionLegendPresentational\n        {...props}\n        listRef={listRef}></ActionLegendPresentational>\n      {listRef.current && isActionLegendEditing && (\n        <Pop\n          hashMapConfig={hashMapConfig}\n          actionConfigurationsList={actionConfigurations}\n          handleAddConfigurationToList={handleAddConfigurationToList}\n          reference={listRef.current}\n          open={!collapsed}\n          handleActionItemEdit={handleActionItemEdit}></Pop>\n      )}\n    </DragDropContext>\n  );\n};\nfunction compileActionListToHashTable(list) {\n  let newActionObject = {};\n  list.forEach((item) => {\n    let newObject = {};\n    newObject[item.id] = item;\n    Object.assign(newActionObject, newObject);\n  });\n  return newActionObject;\n}\nexport const ActionLegend = (props) => {\n  const [actionItemBeingEdited, setActionItemBeingEdited] = useState(null);\n  const [isActionLegendEditing, setIsActionLegendEditing] = useState(false);\n  const { actionConfigurationsList, setActionConfigurationsList } = useContext(\n    ProvenanceDataContext\n  );\n  useEffect(() => {\n    setVolatileActionConfigurationList(actionConfigurationsList);\n  }, [actionConfigurationsList]);\n  const [\n    volatileActionConfigurationList,\n    setVolatileActionConfigurationList,\n  ] = useState(actionConfigurationsList);\n\n  const hashMapConfig = useMemo(() => {\n    const hashConfig = compileActionListToHashTable(\n      volatileActionConfigurationList\n    );\n    // console.log(\n    //   \"compiling new configs\",\n    //   hashConfig,\n    //   volatileActionConfigurationList\n    // );\n    return hashConfig;\n  }, [volatileActionConfigurationList]);\n  function cancelChanges() {\n    // set to orgiinal\n    setVolatileActionConfigurationList(actionConfigurationsList);\n    setIsActionLegendEditing(false);\n  }\n  function handleSaveActionConfiguration(newConfiguration) {\n    const configurationIndex = volatileActionConfigurationList.findIndex(\n      (config) => config.id === newConfiguration.id\n    );\n    let configCopy = [...volatileActionConfigurationList];\n    configCopy[configurationIndex] = newConfiguration;\n\n    // if an action configuration isn't a raw event and was deleted, remove it.\n    /*if (newConfiguration.type !== \"raw\" && newConfiguration.hidden) {\n      console.log(\"deleting config\", configCopy);\n      configCopy.splice(configurationIndex, 1);\n    }*/\n    setVolatileActionConfigurationList(configCopy);\n    setActionItemBeingEdited(null);\n  }\n  function saveChanges() {\n    setActionConfigurationsList(volatileActionConfigurationList);\n    setIsActionLegendEditing(false);\n  }\n  return (\n    <div>\n      {!props.collapsed ? (\n        isActionLegendEditing ? (\n          <div>\n            <Button variant={\"primary\"} onClick={saveChanges}>\n              Apply Changes\n            </Button>\n            <Button variant=\"secondary\" onClick={cancelChanges}>\n              Cancel\n            </Button>\n          </div>\n        ) : (\n          <Button\n            variant={\"primary\"}\n            onClick={() => setIsActionLegendEditing(true)}>\n            Edit Action List\n          </Button>\n        )\n      ) : null}\n      <ActionLegendDragContainer\n        hashMapConfig={hashMapConfig}\n        isActionLegendEditing={isActionLegendEditing}\n        setActionConfigurationsList={setVolatileActionConfigurationList}\n        actionConfigurations={volatileActionConfigurationList}\n        handleActionItemEdit={\n          isActionLegendEditing ? setActionItemBeingEdited : null\n        }\n        collapsed={props.collapsed}></ActionLegendDragContainer>\n      {actionItemBeingEdited && (\n        <Modal\n          open={!!actionItemBeingEdited}\n          onClose={() => setActionItemBeingEdited(null)}\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\">\n          <EditActionForm\n            actionConfiguration={actionItemBeingEdited}\n            handleActionConfigurationCancel={() =>\n              setActionItemBeingEdited(null)\n            }\n            handleActionConfigurationChange={\n              handleSaveActionConfiguration\n            }></EditActionForm>\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nclass ActionConfiguration {\n  constructor(icon, name, id, color) {\n    this.icon = icon;\n    this.name = name;\n    this.id = id;\n    this.color = color;\n  }\n}\n\nconst CustomTypeFields = ({\n  volatileConfiguration,\n  handleConfigurationPropertyChange,\n}) => {\n  let fields;\n  if (volatileConfiguration.type === \"raw\") {\n    fields = (\n      <Switch\n        checked={volatileConfiguration.hidden}\n        onChange={(event) =>\n          handleConfigurationPropertyChange(\"hidden\", event.target.value)\n        }\n        name=\"checkedA\"\n        inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n      />\n    );\n  } else {\n    fields = (\n      <Button onClick={() => {}} color=\"secondary\">\n        Delete\n      </Button>\n    );\n  }\n  return <div>{fields}</div>;\n};\n\nconst EditActionForm = ({\n  actionConfiguration,\n  handleActionConfigurationChange,\n  handleActionConfigurationCancel,\n}) => {\n  // console.log(\"in edit action form\", actionConfiguration);\n\n  const [volatileConfiguration, setVolatileConfiguration] = useState(\n    actionConfiguration\n  );\n  // console.log(\"edit form volatile config\", volatileConfiguration);\n  if (!actionConfiguration.id) {\n    // console.error(`action configuration is missing an id.`);\n    return <div></div>;\n  }\n  function handleConfigurationPropertyChange(key, newValue) {\n    // console.log(\"property changing\", key, newValue);\n    let clonedConfiguration = JSON.parse(JSON.stringify(volatileConfiguration));\n    let newConfiguration = {};\n    newConfiguration[key] = newValue;\n\n    clonedConfiguration = Object.assign(clonedConfiguration, newConfiguration);\n    setVolatileConfiguration(clonedConfiguration);\n  }\n\n  return (\n    <div\n      style={{\n        width: \"300px\",\n        height: \"500px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        backgroundColor: \"white\",\n      }}>\n      <div style={{ order: 0, margin: \"auto\" }}>\n        <TextField\n          value={volatileConfiguration[\"id\"]}\n          onChange={(newValue) =>\n            handleConfigurationPropertyChange(\"id\", newValue.target.value)\n          }\n          disabled\n          id=\"standard-basic\"\n          label={\"id\"}\n        />\n      </div>\n      <div style={{ order: 1, margin: \"auto\" }}>\n        <TextField\n          value={volatileConfiguration[\"name\"]}\n          onChange={(newValue) =>\n            handleConfigurationPropertyChange(\"name\", newValue.target.value)\n          }\n          id=\"standard-basic\"\n          label={\"name\"}\n        />\n      </div>\n      <div style={{ order: 2, margin: \"auto\" }}>\n        <label\n          for={\"colorPicker\"}\n          className={\n            \"MuiFormLabel-root MuiInputLabel-root MuiInputLabel-animated MuiInputLabel-shrink MuiFormLabel-filled\"\n          }>\n          Action Color\n        </label>\n        <ColorPicker\n          name={\"colorPicker\"}\n          id={\"colorPicker\"}\n          defaultValue={volatileConfiguration[\"color\"]}\n          value={volatileConfiguration[\"color\"]}\n          onChange={(newValue) => {\n            handleConfigurationPropertyChange(\"color\", newValue);\n          }}></ColorPicker>\n      </div>\n\n      <div style={{ order: 3, margin: \"auto\" }}>\n        <label\n          for={\"deleteToggle\"}\n          className={\n            \"MuiFormLabel-root MuiInputLabel-root MuiInputLabel-animated MuiInputLabel-shrink MuiFormLabel-filled\"\n          }>\n          {volatileConfiguration.type === \"raw\"\n            ? \"Hide Element\"\n            : \"Delete Element\"}\n        </label>\n        <Switch\n          id={\"deleteToggle\"}\n          checked={volatileConfiguration.hidden}\n          onChange={(event) =>\n            handleConfigurationPropertyChange(\n              \"hidden\",\n              !volatileConfiguration.hidden\n            )\n          }\n          name=\"checkedA\"\n          inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n        />\n      </div>\n      <div style={{ order: 4 }}></div>\n      <div style={{ order: 5, margin: \"auto\" }}>\n        <Button\n          color=\"primary\"\n          onClick={() =>\n            handleActionConfigurationChange(volatileConfiguration)\n          }>\n          Submit\n        </Button>\n        <Button onClick={handleActionConfigurationCancel}>Cancel</Button>\n      </div>\n    </div>\n  );\n};\nfunction uuid() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n// a little function to help us with reordering the result\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n/**\n * Moves an item from one list to another list.\n */\nconst copy = (source, destination, droppableSource, droppableDestination) => {\n  const sourceClone = Array.from(source);\n  const destClone = Array.from(destination);\n  const item = sourceClone[droppableSource.index];\n\n  destClone.splice(droppableDestination.index, 0, { ...item, dragId: uuid() });\n  return destClone;\n};\n\nconst move = (source, destination, droppableSource, droppableDestination) => {\n  const sourceClone = Array.from(source);\n  const destClone = Array.from(destination);\n  const [removed] = sourceClone.splice(droppableSource.index, 1);\n\n  destClone.splice(droppableDestination.index, 0, removed);\n\n  const result = {};\n  result[droppableSource.droppableId] = sourceClone;\n  result[droppableDestination.droppableId] = destClone;\n\n  return result;\n};\nconst Pop = ({\n  open,\n  handleActionItemEdit,\n  reference,\n  handleAddConfigurationToList,\n  actionConfigurationsList,\n  hashMapConfig,\n}) => {\n  // console.log(\"in render popover\", open, handleActionItemEdit, reference);\n  return (\n    <div>\n      {\n        <Popper\n          open={open}\n          id={\"hidingpop\"}\n          anchorEl={reference}\n          placement={\"right-start\"}>\n          <div\n            style={{\n              backgroundColor: \"white\",\n              width: \"650px\",\n              height: \"100%\",\n              padding: \"8px\",\n              display: \"flex\",\n              overflow: \"auto\",\n              border: \"1px lightgray solid\",\n            }}>\n            {\n              <EventManager\n                hashMapConfig={hashMapConfig}\n                actionConfigurationsList={actionConfigurationsList}\n                handleAddConfigurationToList={handleAddConfigurationToList}\n                handleEditActionConfiguration={\n                  handleActionItemEdit\n                }></EventManager>\n            }\n          </div>\n        </Popper>\n      }\n    </div>\n  );\n};\nconst ActionLegendPresentational = ({\n  actionConfigurations,\n  handleActionItemEdit,\n  collapsed,\n  listRef,\n  hashMapConfig,\n}) => {\n  const renderedItems = React.useMemo(() => {\n    return actionConfigurations.map((config) =>\n      Object.assign(config, { dragId: uuid() })\n    );\n  }, [actionConfigurations]);\n  /*\n  <List ref={listRef}>\n    {actionConfigurations.map((actionConfiguration) => {\n      return (\n        <ActionItemNode\n          collapsed={collapsed}\n          actionConfiguration={actionConfiguration}\n          handleActionItemEdit={handleActionItemEdit}></ActionItemNode>\n      );\n    })}\n  </List>\n  */\n\n  // console.log(\"at hashmap config\", hashMapConfig);\n  return (\n    <React.Fragment>\n      <div ref={listRef}>\n        <Droppable droppableId=\"ITEMS\" isDropDisabled={true}>\n          {(provided, snapshot) => (\n            <div\n              ref={provided.innerRef}\n              isDraggingOver={snapshot.isDraggingOver}>\n              {renderedItems.map((item, index) => (\n                <Draggable\n                  isDragDisabled={collapsed}\n                  key={item.dragId}\n                  draggableId={item.dragId}\n                  index={index}>\n                  {(provided, snapshot) => (\n                    <React.Fragment>\n                      <div\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        isDragging={snapshot.isDragging}\n                        style={provided.draggableProps.style}>\n                        {\n                          <ActionItemNode\n                            hashMapConfig={hashMapConfig}\n                            collapsed={collapsed}\n                            handleActionItemEdit={handleActionItemEdit}\n                            actionConfiguration={item}></ActionItemNode>\n                        }\n                      </div>\n                      {snapshot.isDragging && (\n                        <div>\n                          <ActionItemNode\n                            collapsed={collapsed}\n                            hashMapConfig={hashMapConfig}\n                            handleActionItemEdit={handleActionItemEdit}\n                            actionConfiguration={item}></ActionItemNode>\n                        </div>\n                      )}\n                    </React.Fragment>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport const ActionItemNode = ({\n  actionConfiguration,\n  handleActionItemEdit,\n  collapsed,\n  hashMapConfig,\n}) => {\n  // console.log(\"in node\", actionConfiguration);\n  return (\n    <ListItem>\n      <IsolatedNode\n        node={{ name: actionConfiguration.id }}\n        configToUse={hashMapConfig}></IsolatedNode>\n      {!collapsed && (\n        <React.Fragment>\n          <ListItemText\n            style={{\n              maxWidth: \"160px\",\n              overflow: \"hidden\",\n              textOverflow: \"truncate\",\n            }}>\n            {actionConfiguration.name}\n          </ListItemText>\n          {handleActionItemEdit && (\n            <EditIcon\n              style={{ cursor: \"pointer\", \"margin-left\": \"auto\" }}\n              onClick={() =>\n                handleActionItemEdit(actionConfiguration)\n              }></EditIcon>\n          )}\n        </React.Fragment>\n      )}\n    </ListItem>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport ProvenanceDataContext from \"./ProvenanceDataContext\";\nimport styled from \"styled-components\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { ActionItemNode } from \"./ActionLegend\";\nimport { Delete } from \"@material-ui/icons\";\nconst EventManager = ({\n  handleAddConfigurationToList,\n  handleEditActionConfiguration,\n  actionConfigurationsList,\n  hashMapConfig,\n}) => {\n  // filter\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      {[\"sequence\", \"group\"].map((type) => {\n        console.log();\n        const typedConfigs = actionConfigurationsList.filter(\n          (config) => config.type === type\n        );\n        const nonHiddenConfigs = typedConfigs.filter((config) => {\n          console.log(config);\n          return config.hidden === 0 || config.hidden === false;\n        });\n        let listEvents = {};\n        nonHiddenConfigs.forEach((config) => {\n          listEvents[config.id] = config;\n        });\n        return (\n          <GroupedList\n            hashMapConfig={hashMapConfig}\n            listEvents={listEvents}\n            handleAddGroup={handleAddConfigurationToList}\n            initialItems={actionConfigurationsList}\n            handleEditActionConfiguration={handleEditActionConfiguration}\n            type={type}></GroupedList>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default EventManager;\n\nconst grid = 8;\n\nconst Content = styled.div`\n  width: 310px;\n`;\n\nconst Item = styled.div`\n  display: flex;\n  user-select: none;\n  padding: 0.5rem;\n  margin: 0 0 0.5rem 0;\n  align-items: flex-start;\n  align-content: flex-start;\n  line-height: 1.5;\n  border-radius: 3px;\n  background: #fff;\n  border: 1px ${(props) => (props.isDragging ? \"dashed #000\" : \"solid #ddd\")};\n`;\n\nconst Clone = styled(Item)`\n  ~ div {\n    transform: none !important;\n  }\n`;\n\nconst Handle = styled.div`\n  display: flex;\n  align-items: center;\n  align-content: center;\n  user-select: none;\n  margin: -0.5rem 0.5rem -0.5rem -0.5rem;\n  padding: 0.5rem;\n  line-height: 1.5;\n  border-radius: 3px 0 0 3px;\n  background: #fff;\n  border-right: 1px solid #ddd;\n  color: #000;\n`;\n\nconst List = styled.div`\n  border: 1px\n    ${(props) => (props.isDraggingOver ? \"dashed #000\" : \"solid #ddd\")};\n  background: #fff;\n  padding: 0.5rem 0.5rem 0;\n  border-radius: 3px;\n  flex: 0 0 150px;\n  font-family: sans-serif;\n`;\n\nconst Kiosk = styled(List)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 200px;\n`;\n\nconst Container = styled(List)`\n  margin: 0.5rem 0.5rem 1.5rem;\n`;\n\nconst Notice = styled.div`\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  padding: 0.5rem;\n  margin: 0 0.5rem 0.5rem;\n  border: 1px solid transparent;\n  line-height: 1.5;\n  color: #aaa;\n`;\n\nconst Button = styled.button`\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  margin: 0.5rem;\n  padding: 0.5rem;\n  color: #000;\n  border: 1px solid #ddd;\n  background: #fff;\n  border-radius: 3px;\n  font-size: 1rem;\n  cursor: pointer;\n`;\n\nconst ButtonText = styled.div`\n  margin: 0 1rem;\n`;\nfunction uuid() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\nexport const GroupedList = ({\n  initialItems,\n  type,\n  handleAddGroup,\n  handleEditActionConfiguration,\n  listEvents,\n  hashMapConfig,\n}) => {\n  console.log(initialItems);\n\n  useEffect(() => {\n    console.log(\"in unique render of grouped list\");\n  }, []);\n\n  //const [listEvents, setListEvents] = useState({});\n  function addList(e) {\n    //let copyEvents = Object.assign({}, listEvents);\n    let newListName = uuid(); //uuid();\n\n    let newListEvents = {\n      [newListName]: {\n        id: newListName,\n        name: `${type}-${newListName}`,\n        type: type,\n        hidden: false,\n        icon: \"text\",\n        color: \"#ddd\",\n        elements: [],\n      },\n    };\n    handleAddGroup(newListEvents[newListName]);\n    /*\n    setListEvents((currentEvents) => {\n      let copyEvents = Object.assign({}, currentEvents);\n      copyEvents = Object.assign(copyEvents, newListEvents);\n      console.log(\"about to add\", copyEvents);\n\n      return copyEvents;\n    });*/\n  }\n\n  console.log(listEvents);\n  return (\n    <div>\n      {/*<DragDropContext onDragEnd={onDragEnd}>*/}\n\n      <Content>\n        <Button onClick={addList}>\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n            <path\n              fill=\"currentColor\"\n              d=\"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\"\n            />\n          </svg>\n          <ButtonText>Add {type}</ButtonText>\n        </Button>\n        {/*<Droppable droppableID=\"DELETE\">\n          {(provided, snapshot) => <Delete></Delete>}\n                    </Droppable>*/}\n\n        {Object.keys(listEvents).map((list, i) => (\n          <React.Fragment>\n            <Droppable key={list} droppableId={list}>\n              {(provided, snapshot) => (\n                <Container\n                  ref={provided.innerRef}\n                  isDraggingOver={snapshot.isDraggingOver}>\n                  <div>\n                    <ActionItemNode\n                      hashMapConfig={hashMapConfig}\n                      handleActionItemEdit={(actionItem) => {\n                        console.log(\"dywootto in actionitem edit\", actionItem);\n                        handleEditActionConfiguration(actionItem);\n                      }}\n                      actionConfiguration={listEvents[list]}></ActionItemNode>\n                  </div>\n                  {listEvents[list].elements.length\n                    ? listEvents[list].elements.map((item, index) => (\n                        <Draggable\n                          key={item.dragId}\n                          draggableId={item.dragId}\n                          index={index}>\n                          {(provided, snapshot) => {\n                            let copyItem = Object.assign({}, item);\n                            /*copyItem = Object.assign(copyItem, {\n                            dragId: copyItem.dragId,\n                          });*/\n                            return (\n                              <Item\n                                ref={provided.innerRef}\n                                {...provided.draggableProps}\n                                isDragging={snapshot.isDragging}\n                                style={provided.draggableProps.style}>\n                                <div {...provided.dragHandleProps}>\n                                  {\n                                    <ActionItemNode\n                                      hashMapConfig={hashMapConfig}\n                                      actionConfiguration={\n                                        copyItem\n                                      }></ActionItemNode>\n                                  }\n                                </div>\n                              </Item>\n                            );\n                          }}\n                        </Draggable>\n                      ))\n                    : !provided.placeholder && <Notice>Drop items here</Notice>}\n                  {provided.placeholder}\n                </Container>\n              )}\n            </Droppable>\n          </React.Fragment>\n        ))}\n        {Object.keys(listEvents).length === 0 && (\n          <span>\n            No {type}s have been created. Click Add {type} to get started\n            dragging items.\n          </span>\n        )}\n      </Content>\n      {/*</DragDropContext>*/}\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Input } from \"antd\";\nimport { relativeProvenanceData } from \"../common/data/provenanceMocks.js\";\nimport EventAccordion from \"../components/EventAccordion\";\nimport Event_Layers from \"../components/Event_Layers\";\nimport EventManager from \"../components/EventManager\";\nimport EcoIcon from \"@material-ui/icons/Eco\";\nimport { PlusSquareOutlined } from \"@ant-design/icons\";\n\nimport CollapsibleTable from \"../components/EventTable\";\nimport * as d3 from \"d3\";\nimport ProvenanceDataContext from \"../components/ProvenanceDataContext\";\n\nconst { Search } = Input;\n\nconst Overview = ({ location }) => {\n  const { overviewData } = useContext(ProvenanceDataContext);\n\n  const [search, setSearch] = React.useState(\"\");\n\n  function createEvent(value) {\n    {\n      setSearch(\"\");\n      console.log(\"new Event is\", value);\n      newEvent(value);\n    }\n  }\n\n  return (\n    <div style={{ padding: \"15px\" }}>\n      <Search\n        placeholder=\"Create Event Type\"\n        enterButton={<PlusSquareOutlined />}\n        size=\"large\"\n        // onSearch={newEvent}\n        // onChange={event => setSearch(event.target.value)}\n        style={{ width: 672 }}\n      // value={search}\n      />\n      <div style={{ paddingTop: \"15px\" }}>\n        {/* {patternComponent} */}\n        {/* <EventAccordion /> */}\n        {/* <CollapsibleTable data={data} onChange={setData} /> */}\n        {/*\n          <EventAccordion\n            data={data}\n            onChange={(newData) => console.log(newData)}\n          />*/}\n        {\n          <EventManager\n            handleEditActionConfiguration={(val) =>\n              console.log(val)\n            }></EventManager>\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default Overview;\n","import React from \"react\";\nimport TableDataLoader from \"../components/TableDataLoader\";\n\nconst Export = () => {\n  return <div>This is export </div>;\n};\n\nexport default Export;\n","//@ts-nocheck\nimport React, { useState, useRef, useEffect, useMemo } from \"react\";\nimport * as d3 from \"d3\";\nimport { select, event } from \"d3-selection\";\nimport { scaleLinear } from \"d3-scale\";\nimport { brushX } from \"d3-brush\";\nimport { axisBottom } from \"d3-axis\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Fade from \"@material-ui/core/Fade\";\n\nfunction obtainItemCounts(arr) {\n  let occurrences = {};\n  for (let i = 0, j = arr.length; i < j; i++) {\n    occurrences[arr[i]] = (occurrences[arr[i]] || 0) + 1;\n  }\n  return occurrences;\n}\nexport const CategoricalFilter = (props) => {\n  const { data, width, scale, labels, onFilter = () => {} } = props;\n  const occurrences = useMemo(() => obtainItemCounts(data), [data]);\n  // search through data for all states\n  const [currentFilter, setCurrentFilterInternal] = useState(\n    Object.keys(occurrences)\n  );\n  const height = 20;\n  const fullHeight = 20 + 15;\n  const maxOccurance = Object.values(occurrences).reduce((a, b) =>\n    a > b ? a : b\n  );\n  const yScale = d3.scaleLinear().domain([0, maxOccurance]).range([0, height]);\n  function setCurrentFilter(currentValues) {\n    onFilter(currentValues);\n    setCurrentFilterInternal(currentValues);\n  }\n  return (\n    <svg width={width} height={fullHeight}>\n      {Object.entries(occurrences).map(([key, value], index) => {\n        const color = currentFilter.includes(key) ? \"black\" : \"#cfcfcf\";\n        return (\n          <Tooltip\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 600 }}\n            title={key}\n            key={key}\n            PopperProps={{\n              popperOptions: {\n                modifiers: {\n                  offset: {\n                    enabled: true,\n                    offset: \"0px, -6px\",\n                  },\n                },\n              },\n            }}>\n            <g\n              pointerEvents={\"bounding-box\"}\n              key={key}\n              onClick={() => {\n                const indexOfValue = currentFilter.indexOf(key);\n                let temp = Object.assign([], currentFilter);\n\n                if (indexOfValue > -1) {\n                  temp.splice(indexOfValue, 1);\n                } else {\n                  temp.push(key);\n                }\n                setCurrentFilter(temp);\n              }}\n              cursor={\"pointer\"}\n              fill={\"none\"}>\n              <rect\n                x={scale(key)}\n                width={20}\n                height={yScale(value)}\n                y={height - yScale(value)}\n                fill={color}></rect>\n\n              <g transform={`translate(${scale(key)},${height})`} fill={color}>\n                {labels[key]}\n              </g>\n            </g>\n          </Tooltip>\n        );\n      })}\n    </svg>\n  );\n};\n\nexport const Histogram = ({\n  hovered,\n  data,\n  xScale,\n  buckets,\n  yScale,\n  height,\n}) => {\n  const binWidth = 10;\n  const [min, max] = xScale.domain();\n  const currentBinCounter = d3\n    .histogram()\n    .domain([min - 0.001, max + 0.001]) // to make inclusive of threshold\n    .thresholds(buckets.map((bucket) => bucket.x1));\n\n  const currentBins = currentBinCounter(data);\n  const average = d3.mean(data);\n  const bars = (\n    <g transform={`translate(${(1 / 3) * binWidth},0)`}>\n      {buckets.map((bucket, index) => {\n        return (\n          <g key={index}>\n            <rect\n              key={`old${index}`}\n              x={xScale(bucket.x0) - 0.5 * binWidth} // 1/2 xBandwidth to move to middle 1/2 another because of -1 index on xBand domain\n              y={yScale(bucket.length)}\n              width={binWidth}\n              fill={\"gray\"}\n              opacity={0.3}\n              height={height - yScale(bucket.length)}></rect>\n            <rect\n              key={index}\n              x={xScale(bucket.x0) - 0.5 * binWidth} // 1/2 xBandwidth to move to middle 1/2 another because of -1 index on xBand domain\n              y={yScale(currentBins[index].length)}\n              width={binWidth}\n              fill={\"black\"}\n              height={height - yScale(currentBins[index].length)}></rect>\n          </g>\n        );\n      })}\n    </g>\n  );\n\n  return (\n    <g>\n      {\n        <rect\n          width={xScale.range()[1] - xScale.range()[0]}\n          fill={\"lightgray\"}\n          x={0}\n          y={height - 1}\n          height={1}></rect>\n      }\n\n      {bars}\n      <g>\n        {average !== null && (\n          <g>\n            <rect\n              x={xScale(average)}\n              y={0}\n              height={height}\n              width={2}\n              fill={\"rgb(61, 119, 245)\"}></rect>\n            <text\n              style={{\n                fill: \"rgb(61, 119, 245)\",\n                fontSize: \"1em\",\n                textAnchor: \"middle\",\n                stroke: \"#fff\",\n                \"paint-order\": \"stroke\",\n                \"stroke-width\": \"2px\",\n              }}\n              x={xScale(average)}\n              y={height + 14}>\n              {average.toFixed(2)}\n            </text>\n          </g>\n        )}\n      </g>\n      <g className={\"sample group dywootto\"}></g>\n      {hovered && (\n        <>\n          <text\n            style={{\n              fill: \"rgb(0,0,0,0.25)\",\n              fontSize: \"1em\",\n              textAnchor: \"end\",\n              stroke: \"#fff\",\n              \"paint-order\": \"stroke\",\n\n              \"stroke-width\": \"1px\",\n            }}\n            x={10}\n            y={35}>\n            {\" \"}\n            {Math.round(xScale.domain()[0])}{\" \"}\n          </text>\n\n          <text\n            style={{\n              fill: \"rgb(0,0,0,0.25)\",\n              fontSize: \"1em\",\n              textAnchor: \"end\",\n              stroke: \"#fff\",\n              \"paint-order\": \"stroke\",\n\n              \"stroke-width\": \"1px\",\n            }}\n            x={xScale.range()[1]}\n            y={35}>\n            {\" \"}\n            {Math.round(xScale.domain()[1])}{\" \"}\n          </text>\n        </>\n      )}\n    </g>\n  );\n};\n\nconst Brush = (props) => {\n  const { width, height, onChange } = props;\n  const brushRef = useRef(null);\n\n  useEffect(() => {\n    const node = brushRef.current;\n\n    const dayBrush = brushX()\n      .extent([\n        [0, 0],\n        [width, height],\n      ])\n      //.on(\"brush\", brushed)\n      .on(\"end\", brushed);\n\n    select(node)\n      .selectAll(\"g.brush\")\n      .data([0])\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"brush\");\n\n    select(node).select(\"g.brush\").call(dayBrush);\n\n    /*\n    Code for updating brush if we want it to dynamically update while brushing\n    function brushed() {\n      console.warn(event);\n      onBrushFunction(event.selection);\n    }*/\n    function brushed() {\n      // if filter cleared, set to all\n      if (!event.selection) {\n        event.selection = [0, width];\n      }\n      console.warn(\"clear\", event);\n      onChange(event.selection);\n    }\n  });\n  return (\n    <svg ref={brushRef} height={height + 15} width={width + 10}>\n      <g transform={\"translate(5,0)\"}>{props.children}</g>\n    </svg>\n  );\n};\n\nconst BrushableHistogram = ({\n  data,\n  xScale,\n  buckets,\n  yScale,\n  height,\n  setMinimum,\n  setMaximum,\n}) => {\n  const width = xScale.range()[1];\n  const [hovered, setHovered] = React.useState(false);\n\n  function setFilterBounds(inputs) {\n    if (inputs?.length !== 2) {\n      inputs = xScale.domain();\n    }\n    // scale inversion\n    setMinimum(xScale.invert(inputs[0]));\n    // set bounds\n    setMaximum(xScale.invert(inputs[1]));\n  }\n\n  return (\n    <div\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}>\n      <Brush width={width} height={height} onChange={setFilterBounds}>\n        <Histogram\n          hovered={hovered}\n          data={data}\n          width={width}\n          height={height}\n          yScale={yScale}\n          xScale={xScale}\n          buckets={buckets}></Histogram>\n      </Brush>\n    </div>\n  );\n};\n\nexport const QuantitativeFilter = ({\n  data,\n  xScale,\n  buckets,\n  height,\n  yScale,\n  onFilter = (val) => {},\n}) => {\n  const [minimum, setMinimum] = useState(d3.min(data));\n  const [maximum, setMaximum] = useState(d3.max(data));\n  const debouncedMin = useDebounce(minimum, 100);\n  const debouncedMax = useDebounce(maximum, 100);\n  useEffect(() => {\n    onFilter({ filterMin: debouncedMin, filterMax: debouncedMax });\n  }, [debouncedMin, debouncedMax]);\n  return (\n    <BrushableHistogram\n      yScale={yScale}\n      xScale={xScale}\n      buckets={buckets}\n      height={height}\n      data={data}\n      setMinimum={setMinimum}\n      setMaximum={setMaximum}></BrushableHistogram>\n  );\n};\nfunction useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n","import React from \"react\";\nimport ReactTags from \"react-tag-autocomplete\";\nimport \"./reacttags.css\";\n\nconst TagWrapper = ({ tags, onTagChange, isMaster, id }) => {\n  function handleAddTag(tag) {\n    onTagChange(\"Add\", tag);\n  }\n\n  function handleDeleteTag(i) {\n    const allTags = tags.slice(0);\n    const tag = allTags.splice(i, 1);\n    onTagChange(\"Delete\", tag);\n  }\n  console.log(\"dywootto\", id);\n  return (\n    <div id={id}>\n      <ReactTags\n        autofocus={false}\n        tags={tags}\n        allowNew={true}\n        handleDelete={handleDeleteTag}\n        handleAddition={handleAddTag}\n      />\n    </div>\n  );\n};\nexport default TagWrapper;\n","import React, { useEffect, useContext, useMemo } from \"react\";\nimport styles from \"./EventSearch.module.css\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { Divider } from \"antd\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Button from \"@material-ui/core/Button\";\nimport Category from \"@material-ui/icons/Category\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport ProvenanceDataContext from \"./ProvenanceDataContext\";\nimport { IsolatedNode } from \"./ProvenanceIsolatedNodes\";\nfunction uuidv4() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nconst actions = [\n  \"Finished Task\",\n  \"Select Node\",\n  \"Searched for Node\",\n  \"Dragged Node\",\n  \"Unselect Node\",\n  \"search\",\n  \"colLabel\",\n  \"sort\",\n  \"attrRow\",\n  \"answerBox\",\n  \"cell\",\n  \"rowLabel\",\n  \"cleared all selected nodes\",\n  \"clear\",\n  \"Hard Unselected a Node\",\n  \"Hard Selected a Node\",\n];\nconst COLLECTION = actions.map((actionName) => {\n  return { id: uuidv4(), label: actionName };\n});\n\n// This method is needed for rendering clones of draggables\nconst getRenderItem = (items, className) => (provided, snapshot, rubric) => {\n  const item = items[rubric.source.index];\n  return (\n    <React.Fragment>\n      <div\n        {...provided.draggableProps}\n        {...provided.dragHandleProps}\n        ref={provided.innerRef}\n        style={provided.draggableProps.style}\n        className={snapshot.isDragging ? \"dragging\" : \"\"}>\n        <IsolatedNode node={{ name: item.id }} />\n      </div>\n    </React.Fragment>\n  );\n};\n\nfunction ActionList(props) {\n  return (\n    <div\n      style={{ width: \"100%\", height: \"100%\", backgroundColor: \"whitesmoke\" }}>\n      <Droppable\n        renderClone={getRenderItem(props.items, props.className)}\n        droppableId={props.droppableId}\n        isDropDisabled={true}>\n        {(provided, snapshot) => (\n          <div ref={provided.innerRef} className={props.className}>\n            {props.items.map((item, index) => {\n              const shouldRenderClone =\n                item.id === snapshot.draggingFromThisWith;\n              return (\n                <React.Fragment key={item.id}>\n                  {shouldRenderClone ? (\n                    <div className=\"react-beatiful-dnd-copy\">\n                      {\" \"}\n                      <IsolatedNode node={{ name: item.id }} />\n                    </div>\n                  ) : (\n                    <Draggable draggableId={item.id} index={index}>\n                      {(provided, snapshot) => {\n                        return (\n                          <React.Fragment>\n                            <div\n                              ref={provided.innerRef}\n                              {...provided.draggableProps}\n                              {...provided.dragHandleProps}\n                              className={snapshot.isDragging ? \"dragging\" : \"\"}>\n                              <IsolatedNode\n                                key={`node-${item.id}`}\n                                node={{ name: item.id }}\n                              />\n                            </div>\n                          </React.Fragment>\n                        );\n                      }}\n                    </Draggable>\n                  )}\n                </React.Fragment>\n              );\n            })}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </div>\n  );\n}\n\nfunction Shop(props) {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <React.Fragment>\n      <IconButton aria-label=\"Open Event List\" onClick={handleClick}>\n        <Category />\n      </IconButton>\n\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}>\n        <div style={{ overflow: \"auto\", width: \"300px\", height: \"100px\" }}>\n          <ActionList\n            droppableId=\"SHOP\"\n            className={styles.searchOptions}\n            items={props.items}\n          />\n        </div>\n      </Popover>\n    </React.Fragment>\n  );\n}\n\nfunction ShoppingBag(props) {\n  return (\n    <div style={{ width: \"100%\", height: \"100%\" }}>\n      <Droppable droppableId=\"BAG\" direction={\"horizontal\"}>\n        {(provided, snapshot) => (\n          <div ref={provided.innerRef} className={styles.searchBar}>\n            {props.items.map((item, index) => (\n              <Draggable\n                key={item.dragID}\n                draggableId={item.dragID}\n                index={index}>\n                {(provided, snapshot) => (\n                  <div\n                    ref={provided.innerRef}\n                    {...provided.draggableProps}\n                    {...provided.dragHandleProps}\n                    style={provided.draggableProps.style}>\n                    <IsolatedNode node={{ name: item.id }} />\n                  </div>\n                )}\n              </Draggable>\n            ))}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </div>\n  );\n}\n\nconst reorder = (list, startIndex, endIndex) => {\n  const [removed] = list.splice(startIndex, 1);\n  list.splice(endIndex, 0, removed);\n\n  return [...list];\n};\n\nconst copy = (source, destination, droppableSource, droppableDestination) => {\n  const item = source[droppableSource.index];\n  destination.splice(droppableDestination.index, 0, {\n    ...item,\n    dragID: `copy${uuidv4()}`,\n  });\n  return [...destination];\n};\n\nconst EventSearch = ({ onFilter = (val) => {} }) => {\n  const { actionConfigurationsList } = useContext(ProvenanceDataContext);\n  console.log(actionConfigurationsList);\n  const collection = useMemo(\n    () =>\n      actionConfigurationsList.map((config) => {\n        let value = Object.assign({}, config);\n        value = Object.assign(value, { dragID: uuidv4() });\n        return value;\n      }),\n    [actionConfigurationsList]\n  );\n\n  const [shoppingBagItems, setShoppingBagItems] = React.useState([]);\n  useEffect(() => {\n    if (onFilter) {\n      onFilter(shoppingBagItems.length > 0 ? shoppingBagItems : null);\n    }\n  }, [shoppingBagItems]);\n  const onDragEnd = React.useCallback(\n    (result) => {\n      const { source, destination } = result;\n\n      // if dragged out of any box, delete it\n      if (!destination) {\n        setShoppingBagItems((state) => {\n          const copy = [...state];\n          copy.splice(source.index, 1);\n\n          return copy;\n        });\n        return;\n      }\n\n      switch (source.droppableId) {\n        case destination.droppableId:\n          setShoppingBagItems((state) =>\n            reorder(state, source.index, destination.index)\n          );\n          break;\n        case \"SHOP\":\n          setShoppingBagItems((state) =>\n            copy(actionConfigurationsList, state, source, destination)\n          );\n          break;\n        default:\n          break;\n      }\n    },\n    [shoppingBagItems]\n  );\n\n  return (\n    <div className={styles.searchContainer}>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <div className={styles.outerSearchBar}>\n          <ShoppingBag items={shoppingBagItems} />\n        </div>\n        <div className={styles.outerSearchOptions}>\n          <Shop items={actionConfigurationsList} />\n        </div>\n        <div className={styles.outerSearchDiscard}>\n          <Discard />\n        </div>\n      </DragDropContext>\n    </div>\n  );\n};\nconst Discard = (props) => {\n  return (\n    <Droppable droppableId={\"DISCARD\"} isDropDisabled={true}>\n      {(provided, snapshot) => (\n        <div ref={provided.innerRef} className={props.className}>\n          <IconButton>\n            {\" \"}\n            <Delete></Delete>\n          </IconButton>\n        </div>\n      )}\n    </Droppable>\n  );\n};\nexport default EventSearch;\n/*const ActionNode = ({ actionName }) => {\n  return <div>{actionName[0]}</div>;\n};\nconst SearchOptions = () => {\n  /*return (\n    <div className={styles.searchOptions}>\n      {\" \"}\n      {actions.map((action) => (\n        <ActionNode actionName={action} />\n      ))}{\" \"}\n    </div>\n  );\n  return <Droppable\n      renderClone={getRenderItem(props.items, props.className)}\n      droppableId={props.droppableId}\n      isDropDisabled={true}\n    >\n      {(provided, snapshot) => (\n        <ul ref={provided.innerRef} className={props.className}>\n          {props.items.map((item, index) => {\n            const shouldRenderClone = item.id === snapshot.draggingFromThisWith;\n            return (\n              <React.Fragment key={item.id}>\n                {shouldRenderClone ? (\n                  <li className=\"react-beatiful-dnd-copy\">{item.label}</li>\n                ) : (\n                  <Draggable draggableId={item.id} index={index}>\n                    {(provided, snapshot) => (\n                      <React.Fragment>\n                        <li\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          {...provided.dragHandleProps}\n                          className={snapshot.isDragging ? \"dragging\" : \"\"}\n                        >\n                          {item.label}\n                        </li>\n                      </React.Fragment>\n                    )}\n                  </Draggable>\n                )}\n              </React.Fragment>\n            );\n          })}\n          {provided.placeholder}\n        </ul>\n      )}\n    </Droppable>\n};\nconst SearchList = () => {\n  return <div></div>;\n};\nconst SearchBar = () => {\n  const [sequence, setSequenceInternal] = React.useState([\"a\", \"b\", \"c\"]);\n  console.log(sequence);\n  return (\n    <div className={styles.searchBar}>\n      <Droppable droppableId={\"searchBar\"}>\n        {(provided) => {\n          console.log(sequence, provided);\n\n          return (\n            <div {...provided.droppableProps} ref={provided.innerRef}>\n              {sequence.map((item, index) => {\n                return <SearchIcon item={item} index={index}></SearchIcon>;\n              })}\n              {provided.placeholder}\n            </div>\n          );\n        }}\n      </Droppable>\n    </div>\n  );\n};\nconst SearchIcon = ({ item, index }) => {\n  console.log(item, index);\n  return (\n    <Draggable draggableId={`item${index}`} index={index}>\n      {(provided) => {\n        console.log(\"innerest\", `item${index}`);\n        return (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}>{`item${index}`}</div>\n        );\n      }}\n    </Draggable>\n  );\n};\n\nexport default () => {\n  console.log(\"search\", styles, styles.searchContainer);\n  function handleSequenceChange(input) {\n    console.log(input);\n  }\n  return (\n    <div className={styles.searchContainer}>\n      <DragDropContext onDragEnd={handleSequenceChange}>\n        <SearchBar></SearchBar>\n        <SearchOptions></SearchOptions>;\n      </DragDropContext>\n    </div>\n  );\n};\n*/\n","import React, { useState } from \"react\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\nconst initialState = {\n  mouseX: null,\n  mouseY: null,\n};\n\nexport default function Tagger({ text = undefined, tagDivId, rowData }) {\n  const [state, setState] = React.useState<{\n    mouseX: null | number;\n    mouseY: null | number;\n  }>(initialState);\n\n  const [tags, setTags] = useState([]);\n  const [remove, setRemove] = useState();\n  console.log(text, tags);\n  text =\n    text ||\n    \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ipsum purus, bibendum sit  amet vulputate eget, porta semper ligula. Donec bibendum vulputate erat, ac fringilla mi   finibus nec. Donec ac dolor sed dolor porttitor blandit vel vel purus. Fusce vel malesuada   ligula. Nam quis vehicula ante, eu finibus est. Proin ullamcorper fermentum orci, quis   finibus massa. Nunc lobortis, massa ut rutrum ultrices, metus metus finibus ex, sit amet   facilisis neque enim sed neque. Quisque accumsan metus vel maximus consequat. Suspendisse  lacinia tellus a libero volutpat maximus\";\n\n  //    console.log('text is ', text)\n  const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    console.log(window.getSelection().toString());\n    // console.log(window.getSelection().toString().length,remove)\n    if (window.getSelection().toString().length > 0 || remove) {\n      setState({\n        mouseX: event.clientX - 2,\n        mouseY: event.clientY - 4,\n      });\n    }\n  };\n\n  //on mouse up select that input box.\n\n  const handleClose = () => {\n    let tag = window.getSelection().toString();\n    setRemove(undefined);\n    //   console.log(text.split(tag))\n    if (tag.length > 0) {\n      let currentTags = [...tags];\n      currentTags.push(tag);\n      setTags(currentTags);\n    }\n    if (document.getElementById(tagDivId)?.querySelectorAll(\"input\")) {\n      setTimeout(function () {\n        document.getElementById(tagDivId).querySelectorAll(\"input\")[0].focus();\n      }, 500);\n    }\n\n    setState(initialState);\n  };\n\n  const removeTag = () => {\n    let tag = remove;\n    let currentTags = [...tags];\n    let newTags = currentTags.filter((t) => t != tag);\n\n    setRemove(undefined);\n    setTags(newTags);\n\n    setState(initialState);\n  };\n  let taggedText = text;\n  // console.log(typeof(text))\n  tags.map((t) => {\n    console.log(\"before\", taggedText);\n\n    taggedText = taggedText.replace(t, \"<tag>>\" + t + \"<tag>\");\n    console.log(\"after\", taggedText);\n  });\n  console.log(taggedText);\n\n  return (\n    <div onMouseUp={handleClick}>\n      {tags.length > 0 ? (\n        <Typography>\n          {\" \"}\n          {taggedText.split(\"<tag>\").map((t, i) => {\n            if (t[0] == \">\") {\n              t = t.substring(1);\n              console.log(rowData.tags, i);\n              return (\n                <Tooltip title={\"Interesting Pattern\"}>\n                  <span\n                    onMouseDown={() => setRemove(t)}\n                    style={{\n                      cursor: \"pointer\",\n                      backgroundColor: \"rgb(255 153 0 / 24%)\",\n                    }}>\n                    {t}\n                  </span>\n                </Tooltip>\n              );\n            } else {\n              return <span>{t}</span>;\n            }\n          })}\n          {/* {text.split(tags).map((t, i) => {\n              return <><span>{t}</span><Tooltip title={'Interesting Pattern'}><span onClick={()=>setRemove(true)} style={{backgroundColor: \"rgb(255 153 0 / 24%)\"}}>{tags}</span></Tooltip></>\n          })}  */}\n        </Typography>\n      ) : (\n        <Typography>{text}</Typography>\n      )}\n      <Menu\n        keepMounted\n        open={state.mouseY !== null}\n        onClose={handleClose}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={\n          state.mouseY !== null && state.mouseX !== null\n            ? { top: state.mouseY, left: state.mouseX }\n            : undefined\n        }>\n        {remove ? (\n          <MenuItem onClick={removeTag}>Remove Tag</MenuItem>\n        ) : (\n          <MenuItem onClick={handleClose}>Tag</MenuItem>\n        )}\n      </Menu>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { QuantitativeFilter, CategoricalFilter } from \"./TableFilters\";\nimport * as d3 from \"d3\";\nimport TagWrapper from \"./reactTagWrapper\";\nimport ProvenanceIsolatedNodes from \"./ProvenanceIsolatedNodes\";\nimport EventSearch from \"./EventSearch\";\nimport Tagger from \"./Tagger\";\nimport { getTopPatternsForGroup } from \"../fetchers/fetchMocks.js\";\nimport { useFetchAPIData } from \"../hooks/hooks\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { pure } from \"recompose\";\n\nconst columnOverrides = {};\nconst filterQuantitativeValues = (filter, value) =>\n  value >= filter.filterMin && value <= filter.filterMax;\n\nconst QuantitativeCell = ({ rowData, name, commonScale }) => {\n  let additionalComponents;\n  const cellHeight = 20;\n  if (name === \"time\" && rowData?.sequence) {\n    // map through requences\n    additionalComponents = rowData.sequence.map((node) => {\n      return (\n        <rect\n          width={3}\n          x={commonScale(node.time)}\n          height={cellHeight}\n          opacity={0.25}></rect>\n      );\n    });\n  }\n  return (\n    <svg width={commonScale.range()?.[1]} height={cellHeight}>\n      <rect\n        fill={\"gray\"}\n        width={commonScale(rowData[name])}\n        height={cellHeight}></rect>\n      {additionalComponents}\n    </svg>\n  );\n};\nexport class NotesColumn {\n  constructor(metaData) {\n    this.width = metaData.width;\n    this.handleTagCreation = metaData.handleTagCreation;\n    this.selectionIndicies = [];\n  }\n  generateColumnObject() {\n    return {\n      title: \"Notes\",\n      name: \"None\",\n      cellStyle: {\n        padding: \"4px 16px\",\n      },\n      width: this.width,\n      customSort: (a, b) => b.tags.length - a.tags.length,\n      filterComponent: () => <div></div>,\n      render: (rowData) => {\n        if (!Array.isArray(rowData.tags)) {\n          rowData.tags = [];\n        }\n        return (\n          <TagWrapper\n            id={generateRowId(rowData)}\n            tags={rowData.tags}\n            onTagChange={(action, tag) => {\n              if (action === \"Add\") {\n                rowData.tags.push(tag);\n              } else {\n                const index = rowData.tags.findIndex((iterTag) => {\n                  return iterTag.name === tag[0]?.name;\n                });\n                if (index > -1) {\n                  rowData.tags.splice(index, 1);\n                }\n              }\n\n              this.handleTagCreation(\n                rowData.participantID,\n                rowData.taskID,\n                tag,\n                action\n              );\n            }}></TagWrapper>\n        );\n      },\n    };\n  }\n}\nfunction generateRowId(rowData) {\n  return `row${rowData[\"id\"]}`;\n}\nexport class LongTextColumn {\n  constructor(data, name, metaData) {\n    this.name = name;\n    this.data = data;\n    this.width = metaData.width ? metaData.width : 300;\n    this.order = metaData.order;\n    this.hideByDefault = metaData.hideByDefault;\n  }\n\n  generateColumnObject() {\n    return {\n      title: this.name,\n      name: this.name,\n      render: (rowData) => {\n        return (\n          <div style={{ \"white-space\": \"normal\" }}>\n            <Tagger\n              text={rowData[this.name]}\n              tagDivId={`${generateRowId(rowData)}`}\n              rowData={rowData}></Tagger>\n          </div>\n        );\n      },\n      width: this.width,\n      hideByDefault: this.hideByDefault,\n      order: this.order,\n    };\n  }\n}\nexport class CategoricalColumn {\n  constructor(data, name, metaData) {\n    this.name = name;\n    this.data = data;\n    this.width = metaData.width ? metaData.width : 100;\n    this.order = metaData.order;\n    this.hideByDefault = metaData.hideByDefault;\n  }\n\n  generateColumnObject() {\n    return {\n      title: this.name,\n      name: this.name,\n      render: (rowData) => {\n        return (\n          <span>{rowData[this.name] ? rowData[this.name] : this.name}</span>\n        );\n      },\n      width: this.width,\n      hideByDefault: this.hideByDefault,\n      order: this.order,\n    };\n  }\n}\nexport class QuantitativeColumn {\n  constructor(data, name, metaData, handleFilterChange) {\n    this.name = name;\n    this.data = data;\n    this.type = \"quantitative\";\n    this.height = 42.5;\n    this.width = metaData.width ? metaData.width : 100;\n    this.order = metaData.order;\n    this.hideByDefault = metaData.hideByDefault;\n    this.customSort = (a, b) => a[this.name] - b[this.name];\n    this.handleFilterChange = handleFilterChange;\n    this.customFilterAndSearch = (filter, value) => {\n      return filterQuantitativeValues(filter.value, value);\n    };\n    this.cellComponent = (rowData) => {\n      return (\n        <QuantitativeCell\n          rowData={rowData}\n          name={this.name}\n          commonScale={this.xScale}></QuantitativeCell>\n      );\n    };\n    let [min, max] = d3.extent(this.data, (datum) => datum[this.name]);\n    if (min > 0) {\n      min = 0;\n    }\n\n    this.xScale = d3\n      .scaleLinear()\n      .domain([min - 0.001, max + 0.001])\n      .range([10, this.width - 20]); // offset from sides\n    this.yScale = d3.scaleLinear().range([this.height, 0]);\n    // the scale\n    let niceX = this.xScale.nice();\n    const binner = d3.histogram().domain(niceX.domain());\n    const buckets = binner(data.map((datum) => datum[this.name]));\n    this.yScale = this.yScale.domain([\n      0,\n      d3.max(buckets, (bucket) => bucket.length),\n    ]);\n    this.buckets = buckets;\n  }\n\n  set setWidth(newWidth) {\n    this.width = newWidth;\n    this.scale.range([0, this.width]);\n  }\n\n  set setRender(Component) {\n    this.cellComponent = Component;\n  }\n\n  generateColumnObject() {\n    return {\n      title: this.name,\n      name: this.name,\n      width: this.width,\n      type: this.type,\n      customSort: this.customSort,\n      render: this.cellComponent,\n      order: this.order,\n      hideByDefault: this.hideByDefault,\n      customFilterAndSearch: this.customFilterAndSearch,\n      groupedSummaryComponent: ({ incomingData }) => {\n        return (\n          <div style={{ pointerEvents: \"all\", opacity: 0.7 }}>\n            <GroupDataResolver incomingData={incomingData}>\n              {({ partitionedData }) => {\n                if (partitionedData.length === 0) {\n                  return <div></div>;\n                }\n                return (\n                  <QuantitativeFilter\n                    xScale={this.xScale}\n                    yScale={this.yScale}\n                    buckets={this.buckets}\n                    height={this.height}\n                    data={partitionedData.map(\n                      (datum) => datum[this.name]\n                    )}></QuantitativeFilter>\n                );\n              }}\n            </GroupDataResolver>\n          </div>\n        );\n      },\n      filterComponent: (props) => {\n        return (\n          <QuantitativeFilter\n            {...props}\n            xScale={this.xScale}\n            yScale={this.yScale}\n            buckets={this.buckets}\n            height={this.height}\n            onFilter={(filter, value, row) => {\n              return this.handleFilterChange(this.name, filter);\n            }}\n            data={this.data.map(\n              (datum) => datum[this.name]\n            )}></QuantitativeFilter>\n        );\n      },\n    };\n  }\n}\n\nfunction hasSubArrayStrict(master, sub) {\n  return master.join(\",\").indexOf(sub.join(\",\")) > -1;\n}\n\nfunction hasSubArrayNonStrict(master, sub) {\n  return sub.every(((i) => (v) => (i = master.indexOf(v, i) + 1))(0));\n}\n\nconst EventsSummary = (props) => {\n  let { incomingData } = props;\n  incomingData = incomingData?.incomingData;\n  if (!incomingData || !incomingData[0]) {\n    return <div></div>;\n  }\n\n  return <EventSearch onFilter={props.onFilter}></EventSearch>;\n};\n\n/* */\nfunction filterEvents(filterValue, rowValue) {\n  if (!filterValue || !rowValue) {\n    return true;\n  }\n  return hasSubArrayNonStrict(\n    rowValue.map((val) => val.name),\n    filterValue.map((val) => val.id)\n  ); //rowValue.length >= 5;\n}\nconst GroupedContainer = (props) => {\n  if (\n    typeof props.children === \"undefined\" ||\n    typeof props.children !== \"function\"\n  ) {\n    return <div></div>;\n  }\n  return (\n    <div style={{ pointerEvents: \"none\", opacity: 0.7 }}>\n      {props.children()}\n    </div>\n  );\n};\nexport class ProvenanceColumn {\n  constructor(data, name, metaData, handleFilterChange) {\n    this.name = name;\n    this.width = 300;\n    this.data = data;\n    this.handleProvenanceNodeClick = metaData.handleProvenanceNodeClick;\n    this.handleFilterChange = handleFilterChange;\n    this.customFilterAndSearch = (filter, value) => {\n      return filterEvents(filter.value, value);\n    };\n  }\n  generateColumnObject() {\n    return {\n      title: \"Events Used\",\n      name: this.name,\n      width: this.width,\n      customSort: (a, b) => a.sequence.length - b.sequence.length,\n      customFilterAndSearch: this.customFilterAndSearch,\n      render: (renderData) =>\n        renderProvenanceNodeCell(renderData, this.handleProvenanceNodeClick),\n      groupedSummaryComponent: ({ incomingData }) => {\n        console.log(\"in generate column object\");\n        return (\n          <GroupDataResolver incomingData={incomingData}>\n            {({ partitionedData }) => {\n              if (partitionedData.length === 0) {\n                return <div></div>;\n              }\n              return (\n                <GroupedEventSummary\n                  incomingData={partitionedData}></GroupedEventSummary>\n              );\n            }}\n          </GroupDataResolver>\n        );\n      },\n\n      type: \"provenance\",\n      filterComponent: (props) => (\n        <EventsSummary\n          incomingData={{ incomingData: this.data }}\n          onFilter={(filter, value, row) => {\n            return this.handleFilterChange(this.name, filter);\n          }}></EventsSummary>\n      ),\n    };\n  }\n}\n\nconst GroupedEventSummaryFunc = ({ incomingData }) => {\n  const filteredList = useMemo(() => {\n    return incomingData.map((row) => {\n      return {\n        participantID: row.participantID,\n        // uniqueID: row.uniqueID,\n        condition: row.condition,\n        taskID: row.taskID,\n      };\n    });\n  });\n\n  const [\n    isLoading,\n    errorLoading,\n    patternDataFromServer,\n  ] = useFetchAPIData(async () => {\n    const response = await getTopPatternsForGroup(filteredList);\n    return response;\n  }, []);\n\n  // create list of individuals in each group\n  return (\n    <div>\n      {isLoading && (\n        <Skeleton width={\"150px\"} height={\"35px\"} variant={\"rect\"}></Skeleton>\n      )}\n      {errorLoading && <p>{errorLoading}</p>}\n      <div style={{ height: \"60px\", overflow: \"auto\" }}>\n        <Typography style={{ float: \"left\", marginTop: \"20px\" }}>\n          {filteredList.length} Participants\n        </Typography>\n        {patternDataFromServer &&\n          patternDataFromServer[0][\"topK\"].map((topSequence, index) => {\n            return (\n              <div\n                key={`sequence${index}`}\n                style={{\n                  display: \"inline-block\",\n                  backgroundColor: \"whitesmoke\",\n                  borderRadius: \"20px\",\n                  padding: \"4px\",\n                  margin: \"10px\",\n                }}>\n                <div style={{ float: \"left\" }}>\n                  <ProvenanceIsolatedNodes\n                    nodes={topSequence.sequence.map((seq) => {\n                      return { name: seq };\n                    })}\n                    handleProvenanceNodeClick={\n                      console.log\n                    }></ProvenanceIsolatedNodes>\n                </div>\n\n                <span style={{ float: \"right\" }}> {topSequence[\"count\"]}</span>\n              </div>\n            );\n          })}{\" \"}\n      </div>\n    </div>\n  );\n};\nconst GroupedEventSummary = pure(GroupedEventSummaryFunc);\n\nfunction renderNotesCell(rowData) {\n  if (!Array.isArray(rowData.tags)) {\n    rowData.tags = [];\n  }\n  return (\n    <TagWrapper\n      id={generateRowId(rowData)}\n      tags={rowData.tags}\n      onTagChange={(action, tag) => {\n        // check if rowData is selected;\n        if (action === \"Add\") {\n          rowData.tags.push(tag);\n        } else {\n          const index = rowData.tags.findIndex((iterTag) => {\n            return iterTag.name === tag[0]?.name;\n          });\n          if (index > -1) {\n            rowData.tags.splice(index, 1);\n          }\n        }\n      }}></TagWrapper>\n  );\n}\n\nfunction renderNotesColumn(notesColumnWidth) {\n  return {\n    title: \"Notes\",\n    name: \"None\",\n    cellStyle: {\n      padding: \"4px 16px\",\n    },\n    width: notesColumnWidth,\n    customSort: (a, b) => b.tableData.tags.length - a.tableData.tags.length,\n    filterComponent: () => <div></div>,\n    render: renderNotesCell,\n  };\n}\n\nfunction renderProvenanceNodeCell(data, handleProvenanceNodeClick) {\n  return (\n    <ProvenanceIsolatedNodes\n      nodes={data.sequence}\n      handleProvenanceNodeClick={\n        handleProvenanceNodeClick\n      }></ProvenanceIsolatedNodes>\n  );\n}\n\nconst GroupDataResolverFunc = (props) => {\n  const { incomingData, children } = props;\n  const [partitionedData, setPartitionedData] = useState([]);\n  useEffect(() => {\n    console.log(\"in groupdata useEffect!!!\");\n    if (incomingData && incomingData.length > 0) {\n      setPartitionedData(incomingData);\n    }\n  }, [incomingData.length]);\n  if (_.isFunction(children)) {\n    return children({ partitionedData });\n  }\n  return <div></div>;\n};\n\nconst GroupDataResolver = pure(GroupDataResolverFunc);\n","//@ts-nocheck\nimport React, {\n  useState,\n  useEffect,\n  forwardRef,\n  useRef,\n  useCallback,\n  useMemo,\n} from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {\n  GroupingState,\n  SelectionState,\n  IntegratedSelection,\n  IntegratedGrouping,\n  FilteringState,\n  IntegratedFiltering,\n  IntegratedSummary,\n  SummaryState,\n} from \"@devexpress/dx-react-grid\";\nimport {\n  Grid,\n  VirtualTable,\n  TableHeaderRow,\n  TableGroupRow,\n  TableSelection,\n  GroupingPanel,\n  Toolbar,\n  DragDropProvider,\n  TableFilterRow,\n  TableColumnResizing,\n  ColumnChooser,\n  TableColumnVisibility,\n  TableSummaryRow,\n  ExportPanel,\n} from \"@devexpress/dx-react-grid-material-ui\";\nimport { GridExporter } from \"@devexpress/dx-react-grid-export\";\n\nimport { pure } from \"recompose\";\nimport saveAs from \"file-saver\";\n\nimport ProvenanceGraph from \"./ProvenanceGraph\";\nimport * as d3 from \"d3\";\nimport TagsInput from \"react-tagsinput\";\nimport TagStyles from \"./tagstyles.module.css\";\nimport TagWrapper from \"./reactTagWrapper\";\nimport { QuantitativeFilter, CategoricalFilter } from \"./TableFilters\";\nimport styles from \"./ProvenanceTable.module.css\";\nimport { ifError } from \"assert\";\nimport _ from \"lodash\";\nimport {\n  QuantitativeColumn,\n  CategoricalColumn,\n  ProvenanceColumn,\n  NotesColumn,\n  LongTextColumn,\n} from \"./ColumnDefinitions.tsx\";\nimport {\n  CodeSandboxCircleFilled,\n  PropertySafetyFilled,\n} from \"@ant-design/icons\";\nimport { Typography } from \"@material-ui/core\";\n\nconst differenceFilter = (firstArray, secondArray) => {\n  return firstArray.filter(\n    (firstArrayItem) =>\n      !secondArray.some(\n        (secondArrayItem) =>\n          firstArrayItem.columnName === secondArrayItem.columnName\n      )\n  );\n};\nfunction toFixedTrunc(x, n) {\n  const v = (typeof x === \"string\" ? x : x.toString()).split(\".\");\n  if (n <= 0) return v[0];\n  let f = v[1] || \"\";\n  if (f.length > n) return `${v[0]}.${f.substr(0, n)}`;\n  while (f.length < n) f += \"0\";\n  return `${v[0]}.${f}`;\n}\nconst GroupCellContentFunc = (props) => {\n  const { provenanceData, column, row, children } = props;\n  const groupData = children.props.columnSummaries[0].value;\n\n  let Content = () => <div></div>;\n  if (column.groupedSummaryComponent) {\n    Content = column.groupedSummaryComponent;\n  }\n\n  return (\n    <TableSummaryRow.GroupCell {...props}>\n      <Content incomingData={groupData} partitionedData={groupData}></Content>\n    </TableSummaryRow.GroupCell>\n  );\n};\nconst GroupCellContent = pure(GroupCellContentFunc);\nconst GroupRowContent = (props) => {\n  return (\n    <div>\n      <p>Hello this is a test</p>\n      <TableGroupRow.Row {...props}></TableGroupRow.Row>\n    </div>\n  );\n};\n\nconst nameGroupCriteria = (value) => {\n  const firstLetter = String(value).substr(0, 1).toLowerCase();\n  const groupValue =\n    firstLetter < \"n\" ? { from: \"A\", to: \"M\" } : { from: \"N\", to: \"Z\" };\n  return {\n    value: groupValue,\n    key: `${groupValue.from}-${groupValue.to}`,\n  };\n};\nconst FilterCells = ({ value, other, ...restProps }) => {\n  let Item; //= () => <div></div>;\n  let itemProps = Object.assign({}, restProps);\n  if (restProps.column.filterComponent) {\n    itemProps[\"onFilter\"] = restProps.onFilter;\n    Item = restProps.column.filterComponent;\n    //Item = (props) => <NewItem {...props}></NewItem>;\n  } else {\n    Item = (props) => <TableFilterRow.Cell {...props}></TableFilterRow.Cell>;\n  }\n  return (\n    <VirtualTable.Cell style={{ width: \"100%\" }}>\n      <Item {...itemProps}></Item>\n    </VirtualTable.Cell>\n  );\n};\nconst ProvenanceCells = ({ value, style, ...restProps }) => {\n  let item;\n  if (restProps.column.render) {\n    item = restProps.column.render(restProps.row);\n  }\n  return (\n    <VirtualTable.Cell {...restProps} style={{ margin: \"16px\" }}>\n      {item}\n    </VirtualTable.Cell>\n  );\n};\nfunction onSave(workbook) {\n  workbook.xlsx.writeBuffer().then((buffer) => {\n    saveAs(\n      new Blob([buffer], { type: \"application/octet-stream\" }),\n      \"DataGrid.xlsx\"\n    );\n  });\n}\n\nfunction getGroupSummaryValues(props) {\n  //const { selection, rows, totalSummaryItems } = this.state;\n  //const selectionSet = new Set(selection);\n  //const selectedRows = rows.filter((row, rowIndex) => selectionSet.has(rowIndex));\n  return rows; /*totalSummaryItems.map((summary) => {\n      const { columnName, type } = summary;\n      return IntegratedSummary.defaultCalculator(type, selectedRows, row => row[columnName]);\n    });*/\n}\n// must use non zero order else !order is true\n\nfunction getColumnMetaData(columnKey, columnMetaData) {\n  if (columnMetaData[columnKey]) {\n    return columnMetaData[columnKey];\n  } else {\n    return { hideByDefault: true };\n  }\n}\n\nfunction generateColumnDefinition(\n  columnSchema,\n  data,\n  columnsMetaData,\n  handleFilterChange\n) {\n  let defaultColumnDefinition;\n  const columnMetaData = getColumnMetaData(\n    columnSchema.COLUMN_NAME,\n    columnsMetaData\n  );\n  if (columnSchema.DATA_TYPE === \"int\" || columnSchema.DATA_TYPE === \"float\") {\n    defaultColumnDefinition = new QuantitativeColumn(\n      data,\n      columnSchema.COLUMN_NAME,\n      columnMetaData,\n      handleFilterChange\n    );\n  } else if (columnSchema.DATA_TYPE === \"text\") {\n    defaultColumnDefinition = new CategoricalColumn(\n      data,\n      columnSchema.COLUMN_NAME,\n      columnMetaData,\n      handleFilterChange\n    );\n  } else if (columnSchema.DATA_TYPE === \"longtext\") {\n    defaultColumnDefinition = new LongTextColumn(\n      data,\n      columnSchema.COLUMN_NAME,\n      columnMetaData,\n      handleFilterChange\n    );\n  } else if (columnSchema.DATA_TYPE === \"provenance\") {\n    defaultColumnDefinition = new ProvenanceColumn(\n      data,\n      \"sequence\",\n      columnMetaData,\n      handleFilterChange\n    );\n  } else if (columnSchema.DATA_TYPE === \"tag\") {\n    defaultColumnDefinition = new NotesColumn(columnMetaData);\n    /*\n    defaultColumnDefinition = {\n      title: columnSchema.COLUMN_NAME,\n      name: columnSchema.COLUMN_NAME,\n      render: (rowData) => <span>{\"tag\"}</span>,\n      width: 100,\n    };*/\n  } else {\n    console.error(\n      `[DevExtremeTable.tsx] ERROR: Column Schema contains unkown column type ${columnSchema.DATA_TYPE}.`\n    );\n  }\n\n  return defaultColumnDefinition;\n}\nconst DevExtremeTable = ({\n  provenanceData,\n  handleProvenanceNodeClick,\n  tableSchema,\n  handleTagCreation,\n}) => {\n  const exporterRef = useRef(null);\n\n  const [filters, setFilters] = React.useState([]);\n  const handleFilter = (columnName, value) => {\n    const currentFilterIndex = filters.findIndex(\n      (filter) => filter.columnName === columnName\n    );\n    let clonedFilters = [...filters];\n    if (currentFilterIndex > -1) {\n      clonedFilters[currentFilterIndex] = {\n        columnName: columnName,\n        value: value,\n      };\n    } else {\n      clonedFilters.push({ columnName: columnName, value: value });\n    }\n    setFilters(clonedFilters);\n  };\n  let columnMetaData = {\n    participantID: { order: 1 },\n    condition: { order: 2 },\n    accuracy: { width: 125, order: 3 },\n    time: { width: 200, order: 4 },\n    sequence: {\n      width: 300,\n      order: 5,\n      handleProvenanceNodeClick: handleProvenanceNodeClick,\n    },\n    notes: { width: 200, order: 6, handleTagCreation: handleTagCreation },\n  };\n\n  React.useEffect(() => {\n    /*\n    setTimeColumnDefinition(renderTimeColumn(provenanceData, 250));\n    setAccuracyColumnDefinition(renderAccuracyColumn(provenanceData, 100));\n    setEventsColumnDefinition(renderProvenanceNodeColumn(provenanceData, 500));\n    //setNotesColumnDefinition(renderNotesColumn(200));\n    setRows(provenanceData);*/\n\n    setColumns(\n      tableSchema\n        .map((columnSchema) =>\n          generateColumnDefinition(\n            columnSchema,\n            provenanceData,\n            columnMetaData,\n            handleFilter\n          ).generateColumnObject()\n        )\n        .sort((a, b) => {\n          if (!a.order) {\n            return 1;\n          }\n          if (!b.order) {\n            return -1;\n          }\n          return a.order > b.order ? 1 : -1;\n        })\n    );\n  }, [provenanceData]);\n\n  const [columns, setColumns] = useState(\n    tableSchema\n      .map((columnSchema) =>\n        generateColumnDefinition(\n          columnSchema,\n          provenanceData,\n          columnMetaData\n        ).generateColumnObject()\n      )\n      .sort((a, b) => {\n        if (!a.order) {\n          return 1;\n        }\n        if (!b.order) {\n          return -1;\n        }\n        return a.order > b.order ? 1 : -1;\n      })\n  );\n  const [selection, setSelectionInternal] = useState([]);\n\n  const setSelection = (selectionIndicies) => {\n    setSelectionInternal(selectionIndicies);\n  };\n\n  const [rows, setRows] = useState(provenanceData);\n  const startExport = useCallback(\n    (options) => {\n      exporterRef.current.exportGrid(options);\n    },\n    [exporterRef]\n  );\n  // when task ID changes, use new data\n  useEffect(() => {\n    setRows(provenanceData);\n  }, [provenanceData]);\n  const [grouping, setGroupingInternal] = useState([]);\n  const setGrouping = (newGrouping) => {\n    // if an item is recently grouped on, remove any filters for it.\n    let newlyAddedGroups = differenceFilter(newGrouping, grouping)?.[0];\n    if (newlyAddedGroups) {\n      let currentFilter = filters.find(\n        (filterItem) => newlyAddedGroups.columnName === filterItem.columnName\n      );\n\n      if (!currentFilter) {\n        currentFilter = { value: { filterMin: 0.5, filterMax: 1.5 } };\n      }\n      const newGroupIndex = newGrouping.findIndex(\n        (newGroup) => newGroup.columnName === newlyAddedGroups.columnName\n      );\n      newGrouping[newGroupIndex] = Object.assign(newGrouping[newGroupIndex], {\n        groupMetaData: currentFilter.value,\n      });\n    }\n    // search through grouping,\n    setGroupingInternal(newGrouping);\n    //setFilters(clonedFilters);\n  };\n  const groupingPredicate = (value, column, filterValue) => {\n    // find filter value\n    const isRowInTrueGroup = column.customFilterAndSearch(\n      { value: filterValue },\n      value\n    );\n    return {\n      value: isRowInTrueGroup,\n      key: `${column.name}-${isRowInTrueGroup}`,\n    };\n  };\n  const integratedGroupingColumnExtensions = useMemo(\n    () => {\n      return columns.map((column) => {\n        // if quantitative column, group with filter value\n        if (column.type === \"quantitative\") {\n          const group = grouping.find(\n            (group) => group.columnName === column.name\n          );\n          let groupingValue = group\n            ? group.groupMetaData\n            : { filterMin: 0.2, filterMax: 1.2 };\n\n          return {\n            columnName: column.name,\n            criteria: (value) =>\n              groupingPredicate(value, column, groupingValue),\n          };\n        } else if (column.type === \"provenance\") {\n          const group = grouping.find(\n            (group) => group.columnName === column.name\n          );\n          let groupingValue = group ? group.groupMetaData : null;\n\n          return {\n            columnName: column.name,\n            criteria: (value) =>\n              groupingPredicate(value, column, groupingValue),\n          };\n        }\n        return { columnName: column.name };\n      });\n    },\n    [columns, grouping]\n\n    // { columnName: \"visType\", criteria: nameGroupCriteria },\n    //{ columnName: \"answer\", criteria: (data) => data.accuracy > 0.5 },\n  );\n  const [tableGroupColumnExtension] = useState([\n    columns.map((column) => ({\n      columnName: column.name,\n      showWhenGrouped: true,\n    })),\n    //  { columnName: \"visType\", showWhenGrouped: true },\n    // { columnName: \"answer\", showWhenGrouped: true },\n  ]);\n\n  const [defaultColumnWidths] = useState(\n    columns.map((column) => {\n      return {\n        columnName: column.name,\n        width: column.width ? column.width : 100,\n      };\n    })\n  );\n\n  const [filteringColumnExtensions] = useState(\n    columns.map((column) => {\n      return {\n        columnName: column.name,\n        predicate: (value, filter, row) => {\n          //if (!filter.value.length) return true;\n          if (column.customFilterAndSearch) {\n            return column.customFilterAndSearch(filter, value, row);\n          }\n          return IntegratedFiltering.defaultPredicate(value, filter, row);\n        },\n      };\n    })\n  );\n\n  const [groupSummaryItems] = useState(\n    columns.map((column) => {\n      return {\n        name: column.name,\n        columnName: column.name,\n        type: \"custom\",\n        showInGroupFooter: false,\n        alignByColumn: true,\n      };\n    })\n  );\n\n  const [defaultHiddenColumnNames] = useState(\n    columns\n      .filter((column) => column.hideByDefault)\n      .map((column) => column.name)\n  );\n  const summaryCalculator = (type, rows, getValue) => {\n    if (type === \"custom\") {\n      if (!rows.length) {\n        return null;\n      }\n      return rows;\n    }\n    return rows;\n  };\n  const TempRowComponent = (props) => {\n    const [hidden, setHidden] = useState(false);\n    let groupedRowHeader = `Grouped Row`;\n    const columnName = props.row.groupedBy;\n    const columnInfo = columns.find((column) => column.name == columnName);\n    if (columnInfo) {\n      if (columnInfo.type === \"quantitative\") {\n        const groupIndex = grouping.findIndex(\n          (group) => group.columnName === columnName\n        );\n        const group = grouping[groupIndex];\n\n        if (props.row.value === true) {\n          // grab values from filters\n          groupedRowHeader = `${\"---\".repeat(\n            groupIndex\n          )} Grouped on: ${columnName} [${toFixedTrunc(\n            group.groupMetaData.filterMin,\n            2\n          )},${toFixedTrunc(group.groupMetaData.filterMax, 2)}]`;\n        } else {\n          groupedRowHeader = `${\"---\".repeat(\n            groupIndex\n          )} Grouped on: ${columnName} is outside of range [${toFixedTrunc(\n            group.groupMetaData.filterMin,\n            2\n          )}, ${toFixedTrunc(group.groupMetaData.filterMax, 2)}]`;\n        }\n      } else if (columnInfo.type === \"provenance\") {\n        const groupIndex = grouping.findIndex(\n          (group) => group.columnName === columnName\n        );\n        const group = grouping[groupIndex];\n\n        if (props.row.value === true) {\n          // grab values from filters\n          groupedRowHeader = `${\"---\".repeat(\n            groupIndex\n          )} Grouped on provenance sequence:${group.groupMetaData\n            .map((node) => node.label)\n            .join(\",\")}`;\n        } else {\n          groupedRowHeader = `${\"---\".repeat(\n            groupIndex\n          )} Grouped on not containing provenance sequence`;\n        }\n      } else {\n        groupedRowHeader = `${columnName} is ${props.row.value}`;\n      }\n    }\n    return (\n      <React.Fragment>\n        <tr className={styles.groupHeaderRow}>\n          <td colSpan={42} onClick={() => setHidden(!hidden)}>\n            <Typography\n              className={styles.groupHeaderContent}\n              variant={\"overline\"}>\n              {groupedRowHeader}\n            </Typography>\n          </td>\n        </tr>\n        {!hidden && (\n          <TableGroupRow.Row {...props}>{props.children}</TableGroupRow.Row>\n        )}\n      </React.Fragment>\n    );\n  };\n  return (\n    <Paper>\n      <Grid rows={rows} columns={columns}>\n        <DragDropProvider />\n        <GroupingState\n          grouping={grouping}\n          onGroupingChange={setGrouping}\n          columnGroupingEnabled\n          columnExtensions={tableGroupColumnExtension}\n        />\n        <SummaryState groupItems={groupSummaryItems} />\n        <IntegratedGrouping\n          columnExtensions={integratedGroupingColumnExtensions}\n        />\n        <IntegratedSummary calculator={summaryCalculator} />\n        <FilteringState filters={filters} onFiltersChange={setFilters} />\n        <IntegratedFiltering\n          columnExtensions={filteringColumnExtensions}></IntegratedFiltering>\n        <SelectionState\n          selection={selection}\n          onSelectionChange={setSelection}\n        />\n        <IntegratedSelection />\n        <VirtualTable cellComponent={ProvenanceCells} height={1000} />\n        <TableColumnVisibility\n          defaultHiddenColumnNames={defaultHiddenColumnNames}\n        />\n        <TableColumnResizing defaultColumnWidths={defaultColumnWidths} />\n        <TableHeaderRow showGroupingControls />\n        <TableSelection showSelectAll />\n        <TableFilterRow cellComponent={FilterCells} />\n        <TableGroupRow\n          rowComponent={TempRowComponent}\n          columnExtensions={tableGroupColumnExtension}\n          summaryCellComponent={(props) => (\n            <GroupCellContent\n              columns={columns}\n              provenanceData={provenanceData}\n              {...props}></GroupCellContent>\n          )}\n          contentComponent={() => {\n            return <div></div>;\n          }}\n          showColumnsWhenGrouped\n          stubCellComponent={(stubProps) => {\n            let shouldHideStub = false;\n            // if this stub prop matches last grouping, hide it\n            // this is used to fix a bug where the inner most grouped row is off by one td\n\n            if (grouping.length > 0) {\n              const groupedByRow = stubProps.tableRow.row.groupedBy;\n              shouldHideStub =\n                grouping[grouping.length - 1].columnName === groupedByRow;\n            }\n            return (\n              <td style={shouldHideStub ? { display: \"none\" } : null}></td>\n            );\n          }}\n        />\n        <Toolbar />\n        <ExportPanel startExport={startExport} />\n\n        <ColumnChooser />\n        <GroupingPanel showGroupingControls></GroupingPanel>\n      </Grid>\n      <GridExporter\n        ref={exporterRef}\n        rows={rows}\n        columns={columns}\n        onSave={onSave}\n        selection={selection}\n      />\n    </Paper>\n  );\n};\n\nfunction generateCategoricalScale(data, width) {\n  const uniqueValues = Array.from(new Set(data));\n  return d3.scaleBand().rangeRound([0, width]).padding(0).domain(uniqueValues);\n}\n\nfunction renderStimulusDefinition(provenanceData, stimulusColumnWidth) {\n  // TODO: Refactor to generalized\n  return {\n    title: \"Stimulus\",\n    name: \"visType\",\n    render: (rowData) => <span>{rowData.visType}</span>,\n    width: stimulusColumnWidth,\n  };\n}\n\nfunction renderUserIdColumn(provenanceData, userIdColumnWidth) {\n  return {\n    title: \"User Id\",\n    name: \"workerID\",\n    render: (rowData) => <span>{rowData.workerID}</span>,\n    width: userIdColumnWidth,\n    groupedSummaryComponent: () => <div></div>,\n  };\n}\n\n/**\n *\n * @param filter\n * @param value\n * @param accesssor\n */\nfunction filterCategoricalValue(filter, value, accesssor) {\n  if (!Array.isArray(value)) {\n    value = [value];\n  }\n  // for each value\n  let newValues = value;\n  if (accesssor) {\n    newValues = newValues.map(accesssor);\n  }\n  for (let i = 0; i < newValues.length; i++) {\n    if (Object.values(filter).includes(newValues[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nconst GroupDataResolver = (props) => {\n  const { incomingData, children } = props;\n  const [partitionedData, setPartitionedData] = useState([]);\n  useEffect(() => {\n    if (incomingData && incomingData.length > 0) {\n      setPartitionedData(incomingData);\n    }\n  }, incomingData);\n  if (_.isFunction(children)) {\n    return children({ partitionedData });\n  }\n  return <div></div>;\n};\n\n/* Accuracy */\nfunction renderAccuracyCell(rowData, accuracyScale) {\n  return (\n    <svg width={100} height={20}>\n      <rect\n        x={accuracyScale(rowData.answer.accuracy)}\n        width={20}\n        height={20}></rect>\n    </svg>\n  );\n}\n\nfunction renderAccuracyColumn(currentProvenanceData, columnWidth) {\n  // TODO: Refactor to categorical or Numerical\n  let accuracyScale = generateCategoricalScale([\"1\", \"0\"], columnWidth);\n\n  return {\n    title: \"Accuracy\",\n    name: \"answer\",\n    width: columnWidth,\n    cellStyle: {\n      maxWidth: columnWidth,\n      padding: \"4px 16px\",\n    },\n    customSort: (a, b) => a.answer.accuracy - b.answer.accuracy,\n    render: (rowData) => renderAccuracyCell(rowData, accuracyScale),\n    customFilterAndSearch: (filter, value, row) => {\n      return filterCategoricalValue(\n        filter,\n        value,\n        (answer) => `${answer.accuracy}`\n      );\n    },\n    groupedSummaryComponent: ({ incomingData }) => {\n      return (\n        <GroupDataResolver incomingData={incomingData}>\n          {({ partitionedData }) => {\n            if (partitionedData.length === 0) {\n              return <div></div>;\n            }\n            return (\n              <CategoricalFilter\n                width={columnWidth}\n                scale={accuracyScale}\n                labels={{ \"1\": \"true\", \"0\": \"false\" }}\n                data={partitionedData.map(\n                  // TODO: fix from hard coded\n                  (graph) => graph.answer.correct\n                )}></CategoricalFilter>\n            );\n          }}\n        </GroupDataResolver>\n      );\n    },\n\n    filterComponent: (props) => (\n      <CategoricalFilter\n        {...props}\n        width={columnWidth}\n        scale={accuracyScale}\n        labels={{ \"1\": \"true\", \"0\": \"false\" }}\n        data={currentProvenanceData.map(\n          // TODO: fix from hard coded\n          (graph) => graph.answer.correct\n        )}></CategoricalFilter>\n    ),\n  };\n}\n\n/* Time */\nfunction renderTimeCell(rowData, timeScale) {\n  return (\n    <svg width={timeScale.range()?.[1]} height={20}>\n      <ProvenanceGraph performance={rowData} xScale={timeScale} />\n    </svg>\n  );\n}\nfunction renderTimeColumn(currentProvenanceData, columnWidth) {\n  const max = d3.max(currentProvenanceData, (datum) => datum.totalTime);\n  const timeScale = d3.scaleLinear().domain([0, max]).range([0, columnWidth]);\n\n  return {\n    title: \"Time To Complete\",\n    name: \"totalTime\",\n    width: columnWidth,\n    cellStyle: {\n      maxWidth: columnWidth,\n      padding: \"4px 16px\",\n    },\n    customSort: (a, b) => a.totalTime - b.totalTime,\n    render: (rowData) => renderTimeCell(rowData, timeScale),\n    customFilterAndSearch: (filter, value, row) => {\n      return filterQuantitativeValues(filter, value, row);\n    },\n    groupedSummaryComponent: ({ incomingData }) => {\n      return (\n        <GroupDataResolver incomingData={incomingData}>\n          {({ partitionedData }) => {\n            if (partitionedData.length === 0) {\n              return <div></div>;\n            }\n            return (\n              <QuantitativeFilter\n                xScale={timeScale}\n                data={partitionedData.map(\n                  (graph) => graph.totalTime\n                )}></QuantitativeFilter>\n            );\n          }}\n        </GroupDataResolver>\n      );\n    },\n    filterComponent: (props) => (\n      <QuantitativeFilter\n        {...props}\n        xScale={timeScale}\n        data={currentProvenanceData.map(\n          (graph) => graph.totalTime\n        )}></QuantitativeFilter>\n    ),\n  };\n}\n\nexport default DevExtremeTable;\n","//@ts-nocheck\nimport React, { useMemo, useEffect } from \"react\";\nimport ProvenanceIsolatedNodes from \"./ProvenanceIsolatedNodes\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ArrowForward from \"@material-ui/icons/ArrowForward\";\nimport ArrowBack from \"@material-ui/icons/ArrowBack\";\nimport PlayCircleOutline from \"@material-ui/icons/PlayCircleOutline\";\nimport PauseCircleOutline from \"@material-ui/icons/PauseCircleOutline\";\nimport * as d3 from \"d3\";\nimport { AutoSizer, List } from \"react-virtualized\";\n\nconst conditionEnums = Object.freeze({\n  adjMatrix: \"AM\",\n  nodeLink: \"NL\",\n});\nfunction parseTaskNumFromId(taskID) {\n  let taskNumber = taskID.match(/\\d/g);\n  taskNumber = taskNumber.join(\"\");\n  // remove leading zeros\n  return parseInt(taskNumber, 10);\n}\nconst ProvenanceController = ({ nodes, selectedNode }) => {\n  //  \"https://vdl.sci.utah.edu/mvnv-study/?vis=NL&taskNum=7&participantID=5588d7a1fdf99b304ee56840&taskID=S-task07/#c0203065-9927-42f5-88f6-07189cae6cff\";\n  const [playInterval, setPlayInterval] = React.useState(null);\n  const [hoveredItemId, setHoveredItemId] = React.useState(null);\n  const [selectedItemId, setSelectedItemIdInternal] = React.useState(\n    selectedNode.id\n  );\n  const url = selectedNode.url;\n\n  useEffect(() => {\n    let currentIndex = nodes.findIndex((node) => node.id === selectedItemId);\n    if (currentIndex > -1) {\n      let currentNode = nodes[currentIndex];\n      document\n        .querySelector(\"#childFrame\")\n        .contentWindow.postMessage(currentNode.nodeID, \"*\");\n    }\n  }, [selectedItemId]);\n\n  function handlePlayClick() {\n    // set if not selected\n    setPlayInterval(setInterval(handleForward, 1000));\n  }\n  function handlePauseClick() {\n    clearInterval(playInterval);\n    setPlayInterval(null);\n  }\n\n  const setSelectedItemId = (id) => {\n    // unselect the currently selected node\n    if (id === selectedItemId) {\n      setSelectedItemIdInternal(null);\n    } else {\n      setSelectedItemIdInternal(id);\n    }\n  };\n\n  function handleForward() {\n    // TODO handle case if\n\n    setSelectedItemId((previousId) => {\n      if (!previousId) {\n        setSelectedItemId(nodes[0].id);\n      }\n      const currentIndex = nodes.findIndex((node) => node.id === previousId);\n\n      // if at the end, do nothing\n      if (currentIndex === nodes.length - 1 || currentIndex === -1) {\n        return nodes[0].id;\n      }\n      return nodes[currentIndex + 1].id;\n    });\n  }\n\n  function handleBackward() {\n    if (!selectedItemId) {\n      setSelectedItemId(nodes[0].id);\n    }\n    const currentIndex = nodes.findIndex((node) => node.id === selectedItemId);\n\n    // if at the begining, do nothing\n    if (currentIndex < 1) {\n      return;\n    }\n    setSelectedItemId(nodes[currentIndex - 1].id);\n  }\n\n  console.log(\"new url for iframe\", url);\n  return (\n    <div style={{ backgroundColor: \"white\" }}>\n      <div style={{ height: \"85vh\" }}>\n        <iframe\n          id={\"childFrame\"}\n          width={\"100%\"}\n          height={\"100%\"}\n          src={url}></iframe>\n      </div>\n      <div\n        style={{\n          margin: \"0 auto\",\n          width: \"fit-content\",\n          display: \"grid\",\n          gridTemplateRows: \"50px 50px\",\n          gridTemplateColumns: \"min(max-content,1000)\",\n        }}>\n        <div style={{ gridRow: 1, overflow: \"scroll\" }}>\n          <ProvenanceIsolatedNodes\n            hoveredItemId={hoveredItemId}\n            handleHover={(id) => setHoveredItemId(id)}\n            selectedItemId={selectedItemId}\n            nodes={nodes}\n            handleProvenanceNodeClick={(node) =>\n              setSelectedItemId(node.id)\n            }></ProvenanceIsolatedNodes>\n          <AutoSizer>\n            {({ height, width }) => (\n              <TimeLine\n                width={width}\n                hoveredItemId={hoveredItemId}\n                setHoveredItemId={(id) => setHoveredItemId(id)}\n                selectedItemId={selectedItemId}\n                nodes={nodes}\n                setSelectedItemId={(node) =>\n                  setSelectedItemId(node.id)\n                }></TimeLine>\n            )}\n          </AutoSizer>\n        </div>\n        <div style={{ gridRow: 2, width: \"100%\", height: \"100%\" }}>\n          <div\n            style={{\n              margin: \"0 auto\",\n              display: \"flex\",\n              justifyContent: \"center\",\n            }}>\n            <IconButton aria-label=\"delete\" onClick={handleBackward}>\n              <ArrowBack />\n            </IconButton>\n            {playInterval && (\n              <IconButton aria-label=\"delete\" onClick={handlePauseClick}>\n                <PauseCircleOutline />\n              </IconButton>\n            )}\n            {!playInterval && (\n              <IconButton aria-label=\"delete\" onClick={handlePlayClick}>\n                <PlayCircleOutline />\n              </IconButton>\n            )}\n\n            <IconButton aria-label=\"delete\" onClick={handleForward}>\n              <ArrowForward />\n            </IconButton>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProvenanceController;\n\nconst TimeLine = (props) => {\n  const {\n    width,\n    nodes,\n    setSelectedItemId,\n    setHoveredItemId,\n    selectedItemId,\n    hoveredItemId,\n  } = props;\n  function determineItemOpacity(node, selectedItemId, hoveredItemId) {\n    let opacity;\n    if (selectedItemId && node.id !== selectedItemId) {\n      opacity = 0.1;\n    } else if (hoveredItemId && node.id !== hoveredItemId) {\n      opacity = 0.1;\n    }\n    if (node.id === hoveredItemId || node.id === selectedItemId) {\n      opacity = 1;\n    }\n    return opacity;\n  }\n\n  const commonScale = useMemo(() => {\n    return d3\n      .scaleLinear()\n      .domain(d3.extent(nodes, (node) => node.time))\n      .range([5, width - 5]);\n  }, [nodes, width]);\n\n  return (\n    <svg width={width} height={35}>\n      {nodes.map((node, index) => {\n        const opacity = determineItemOpacity(\n          node,\n          selectedItemId,\n          hoveredItemId\n        );\n        //const opacity = node.id === selectedItemId ? 0.5 : 0.1;\n        return (\n          <rect\n            key={`item-${index}`}\n            onMouseEnter={() => setHoveredItemId(node.id)}\n            onMouseLeave={() => setHoveredItemId(null)}\n            onClick={() => setSelectedItemId(node)}\n            width={0.75}\n            x={commonScale(node.time)}\n            height={20}\n            opacity={opacity}></rect>\n        );\n      })}\n    </svg>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport DevTable from \"./DevExtremeTable\";\nimport ProvenanceDataContext from \"./ProvenanceDataContext\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport LoaderStyles from \"./TableDataLoader.module.css\";\nimport Measure from \"react-measure\";\nimport { getSchema } from \"../fetchers/fetchMocks\";\nimport { useFetchAPIData } from \"../hooks/hooks\";\nimport {\n  getTaskDataFromServer,\n  fetchProvenanceDataByNodeId\n\n} from \"../fetchers/fetchMocks.js\";\nimport Modal from \"@material-ui/core/Modal\";\nimport ProvenanceController from \"../components/ProvenanceController\";\n\nimport { Alert, AlertTitle } from '@material-ui/lab';\n//State\nfunction timeout(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n\nconst TableDataLoader = (props) => {\n  const [height, setHeight] = useState(1000);\n  const [currentlyVisitedNodes, setCurrentlyVisitedNodes] = useState(null);\n\n  const {\n    selectedTaskId, queryCount,\n  } = useContext(ProvenanceDataContext);\n\n  async function handleProvenanceNodeClick(node) {\n    console.log(\"dywootto handle provenance node click\", node);\n\n    // hardcoded data for now. ideally, we'll have the event id to be able to select on.\n    const participantId = \"545d6768fdf99b7f9fca24e3\";\n    let fetched = await fetchProvenanceDataByNodeId(node.id);\n    if (fetched.success) {\n      const processedNodes = fetched.data.map((node) => {\n        return {\n          id: node.id,\n          name: node.actionID,\n          time: node.elapsedTime,\n          nodeID: node.nodeID,\n          url: node.url,\n          participantId: node.participantID,\n          uniqueId: node.uniqueID,\n        };\n      });\n      setCurrentlyVisitedNodes(processedNodes);\n    }\n\n  }\n\n  // select all of that provenance graph.\n  //const promise = mysql_api(`/actions/${participantId}/${taskId}`);\n\n  //promise.then((resolved) => {\n  //  console.log(\"resolvedclick\", resolved);\n  //alert(`queried (skinny) provenance from db ${resolved.data}`);\n\n  // rehydrate provenance graph\n  // render vis using that provenance graph\n  //});\n\n  let [\n    isTaskDataLoading,\n    isTaskDataError,\n    currentTaskData,\n  ] = useFetchAPIData(async () => {\n    const response = await getTaskDataFromServer(selectedTaskId);\n    response.data = response.data.map((datum) => {\n      // console.log(datum.sequence);\n\n      // TODO: Fix this from being null\n      try {\n        datum.sequence = JSON.parse(`[${datum.sequence}]`);\n      } catch (err) {\n        console.error(\n          `[Provenance Data Context] Error Parsing ${datum.participantID}'s event sequence. This is likely caused by the sequence being > 16k characters.`\n        );\n        datum.sequence = [];\n      }\n      return datum;\n    });\n    return response;\n  }, [selectedTaskId, queryCount]);\n\n  const [tableSchema, setTableSchema] = useState(null);\n\n  let [isPerformanceSchemaLoading, isPerformanceSchemaError, schemaFromServer] = useFetchAPIData(async () => {\n    return await getSchema(\"Performance\");\n  }, []);\n\n  // Set Schema\n  useEffect(() => {\n    let tableSchema = schemaFromServer;\n\n    const hiddenColumns = [\"id\"];\n    // TODO: make this smart, if > column is highly variable, don't show.\n    const hideAggregate = [\"participantID\", \"answer\"];\n\n    if (tableSchema) {\n      // append the provenance sequence nodes onto the end of performance schema\n\n      tableSchema = tableSchema.concat({\n        COLUMN_NAME: \"sequence\",\n        DATA_TYPE: \"provenance\",\n        ORDINAL_POSITION: schemaFromServer.length,\n      });\n\n      tableSchema = tableSchema.concat({\n        COLUMN_NAME: \"notes\",\n        DATA_TYPE: \"tag\",\n        ORDINAL_POSITION: schemaFromServer.length + 2,\n      });\n\n      tableSchema = tableSchema.map((column) => {\n        column.hideAggregate = hideAggregate.includes(column);\n        return column;\n      });\n\n      tableSchema = tableSchema.filter(\n        (column) => !hiddenColumns.includes(column.COLUMN_NAME)\n      );\n    }\n\n    setTableSchema(tableSchema);\n  }, [schemaFromServer]);\n  console.log(\"tableschema\", tableSchema);\n\n\n  return (\n    <div>\n      {isTaskDataLoading || isPerformanceSchemaLoading &&\n        <div>\n          <Measure\n            bounds\n            onResize={(contentRect) => {\n              setHeight(contentRect.bounds.height);\n            }}>\n            {(measureRef) => {\n              console.log(\"height\", height);\n              return (\n                <div ref={measureRef} className={LoaderStyles.loader}>\n                  <Skeleton height={height} variant=\"rect\" animation=\"wave\" />\n                </div>\n              );\n            }}\n          </Measure>\n        </div>}\n      {isTaskDataError || isPerformanceSchemaError && <Alert severity=\"error\">\n        <AlertTitle>Error</AlertTitle>\n        This is an error alert  <strong>check it out!</strong>\n      </Alert>}\n      {currentTaskData && tableSchema && <div>\n        <DevTable\n          provenanceData={currentTaskData}\n          tableSchema={tableSchema}\n          handleProvenanceNodeClick={handleProvenanceNodeClick}\n          handleTagCreation={handleTagCreation}></DevTable>\n        {currentlyVisitedNodes && (\n          <Modal\n            open={true}\n            onClose={() => setCurrentlyVisitedNodes(null)}\n            style={{ backgroundColor: \"whitesmoke\" }}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\">\n            <ProvenanceController\n              nodes={currentlyVisitedNodes}\n              selectedNode={currentlyVisitedNodes[0]}></ProvenanceController>\n          </Modal>\n        )}\n      </div>}\n\n    </div>\n\n  )\n};\nasync function handleTagCreation(participantID, taskID, tag, action) {\n  await timeout(200);\n\n  return tag;\n};\n\nexport default TableDataLoader;\n","import React, { useContext } from \"react\";\nimport TableDataLoader from \"../components/TableDataLoader\";\n\nconst Table = ({ location }) => {\n\n  return (\n    <React.Fragment>\n      <TableDataLoader />\n\n    </React.Fragment>\n  );\n};\n\nexport default Table;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { Route, Switch, withRouter } from \"react-router-dom\";\nimport styles from \"./Main.module.css\";\nimport _ from \"lodash\";\nimport { relativeProvenanceData } from \"./common/data/provenanceMocks.js\";\nimport MaterialTableWrapper from \"./components/ProvenanceTable\";\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport Home from \"./pages/Home\";\nimport Study from \"./pages/Study\";\nimport Upload from \"./pages/Upload\";\nimport Overview from \"./pages/Overview\";\nimport Export from \"./pages/Export\";\nimport Table from \"./pages/Table\";\n\nconst Main = ({ location }) => {\n  return (\n    <Wrapper>\n      <TransitionGroup className=\"transition-group\">\n        <CSSTransition key={location.key} timeout={500} classNames=\"fade\">\n          <section className=\"route-section\">\n            <Switch location={location}>\n              <Route path=\"/Home\" component={Home}></Route>\n              <Route path=\"/Study\" component={Study}></Route>\n              <Route path=\"/Upload\" component={Upload}></Route>\n              <Route path=\"/Overview\" component={Overview}></Route>\n              <Route path=\"/Table\" component={Table}></Route>\n              <Route path=\"/Export\" component={Export}></Route>\n            </Switch>\n          </section>\n        </CSSTransition>\n      </TransitionGroup>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.div`\n  .fade-enter {\n    opacity: 0.01;\n  }\n\n  .fade-enter.fade-enter-active {\n    opacity: 1;\n    transition: opacity 300ms ease-in;\n  }\n\n  .fade-exit {\n    opacity: 1;\n  }\n\n  .fade-exit.fade-exit-active {\n    opacity: 0.01;\n    transition: opacity 300ms ease-in;\n  }\n\n  div.transition-group {\n    position: relative;\n  }\n\n  section.route-section {\n    position: absolute;\n    width: 100%;\n    top: 0;\n    left: 0;\n  }\n`;\nexport default withRouter(Main);\n","import React from 'react';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Typography from \"@material-ui/core/Typography\";\n\n\nexport default function CheckBox({condition,visible,checkBoxCallback}) {\n  const [checked, setChecked] = React.useState(true);\n\n  const handleChange = (evt) => {\n\n    evt.stopPropagation(); \n    checkBoxCallback(condition,evt.target.checked)\n    setChecked(evt.target.checked);\n  };\n  return (condition && visible ? <>\n      <Checkbox\n        checked={checked}\n        onChange={handleChange}\n        color=\"default\"\n        inputProps={{ 'aria-label': 'checkbox with default color' }}\n      />\n      <Typography\n                            // style={{ display: \"block\" }}\n                            color=\"primary\"\n                            variant=\"overline\">\n                            {condition}\n                        </Typography>\n      </> :null)\n    \n    {/* <div>\n      \n      <Checkbox\n        defaultChecked\n        color=\"primary\"\n        inputProps={{ 'aria-label': 'secondary checkbox' }}\n      />\n      <Checkbox inputProps={{ 'aria-label': 'uncontrolled-checkbox' }} />\n      <Checkbox disabled inputProps={{ 'aria-label': 'disabled checkbox' }} />\n      <Checkbox disabled checked inputProps={{ 'aria-label': 'disabled checked checkbox' }} />\n      <Checkbox\n        defaultChecked\n        indeterminate\n        inputProps={{ 'aria-label': 'indeterminate checkbox' }}\n      />\n      <Checkbox\n        defaultChecked\n        color=\"default\"\n        inputProps={{ 'aria-label': 'checkbox with default color' }}\n      />\n      <Checkbox\n        defaultChecked\n        size=\"small\"\n        inputProps={{ 'aria-label': 'checkbox with small size' }}\n      />\n    </div> */}\n\n}","import React, { useState, useContext } from 'react';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport ProvenanceDataContext from \"../components/ProvenanceDataContext\";\nimport Grid, { GridSpacing } from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\n\nimport SortIcon from '@material-ui/icons/Sort';\n\nimport CheckBox from '../components/CheckBox'\n\n\n\n// const useStyles = makeStyles((theme: Theme) =>\n//     createStyles({\n//         root: {\n//             // backgroundColor: theme.palette.background.paper,\n//             'padding-top': 0,\n//             'padding-bottom': 0\n//         },\n//     }),\n// );\n\n\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 275,\n        flexGrow: 1,\n        padding:'0px'\n    },\n    table: {\n        padding: \"10px\",\n    },\n    condition: {\n        fontSize: \"1em\",\n        color:\"white\",\n        paddingTop:\"10px\",\n        cursor:'pointer'\n    },\n    sort:{\n        cursor:'pointer',\n        marginTop:'16px', \n        marginLeft:'5px'\n    },\n    bullet: {\n        display: \"inline-block\",\n        margin: \"0 2px\",\n        transform: \"scale(0.8)\",\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n});\n\nfunction MenuWrapper({option,index,handleMenuItemClickCallback,setHoveredRowCallback,hoveredRow,selectedIndex,conditions}){\n\n    let initialState = {}\n    conditions.map(c=>initialState[c] = true)\n    const [filterConditions,setConditions] = useState(initialState)\n\n    function checkBoxCallback(condition,checked){\n        let currentState = {... filterConditions}\n        currentState[condition]=checked;\n        setConditions(currentState)\n        \n    }\n\n    let checkboxes = conditions.map(c=><CheckBox key = {c} visible = {(index == hoveredRow || index == selectedIndex ) && option.type !== 'global'} condition ={c} checkBoxCallback={checkBoxCallback}></CheckBox>) \n\n    return (<MenuItem\n    key={option.prompt}\n    // disabled={index === 0}\n    selected={index === selectedIndex}\n    onClick={(event) => handleMenuItemClickCallback(event, index,{desc:true, metric:option['key'],conditions:filterConditions})}\n    onMouseEnter={()=>setHoveredRowCallback(index)}\n    onMouseLeave={()=>setHoveredRowCallback(selectedIndex)}\n>\n    {<div style={{ 'width': '150px' }} > <Typography\n        // style={{ display: \"block\" }}\n        color=\"primary\"\n        variant=\"overline\">\n        {option.prompt}\n    </Typography></div>} \n    <div onClick={(evt)=>evt.stopPropagation()}>\n    {checkboxes}\n        </div> \n    \n</MenuItem>)\n}\n\n\nexport default function SortMenu() {\n\n    \n    const { metrics, conditions,setHomeTaskSort } = useContext(ProvenanceDataContext);\n\n\n    let options = [{ prompt: 'by Task Name', key: 'name' , type:'global'}]; \n\n    if (metrics){\n        Object.keys(metrics).map(m=>options.push({ prompt: 'by ' + m, key: m , type:'metric'}))\n    }\n        \n        // { prompt: 'by Task ', key: 'accuracy' },\n        // { prompt: 'by task completion time', key: 'time' },\n        // { prompt: 'by difference in performance across conditions', key: 'diff' }\n\n\n    // console.log('metrics are ', metrics)\n\n    // console.log('conditions', conditions)\n\n\n\n    const classes = useStyles();\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n    const [selectedIndex, setSelectedIndex] = React.useState(0);\n\n\n    const handleClickListItem = (event: React.MouseEvent<HTMLElement>) => {\n        // console.log('handleClickListItem')\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleMenuItemClick = (event: React.MouseEvent<HTMLElement>, index: number, sortObj) => {\n        setSelectedIndex(index);\n        setHomeTaskSort(sortObj)\n        // console.log('handleMenuItemClick')\n\n        // setTaskSort(options[index].key)\n        setAnchorEl(null);\n\n    };\n\n    let [hoveredRow,setHoveredRow] = useState(selectedIndex)\n\n    let setHoveredRowCallback = (value)=>{\n        setHoveredRow (value)\n    }\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n\n    return ( !conditions ? <></> : \n        <div className={classes.root} style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\n            <List component=\"nav\" aria-label=\"Sort tasks\" className={classes.root}>\n                <ListItem\n                    button\n                    aria-haspopup=\"true\"\n                    aria-controls=\"lock-menu\"\n                    aria-label=\"Sort tasks\"\n                    onClick={handleClickListItem}\n                >\n                    <ListItemText primary=\"Sort tasks\" secondary={options[selectedIndex].prompt} />\n                </ListItem>\n            </List>\n            <Menu\n                id=\"lock-menu\"\n                anchorEl={anchorEl}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleClose}\n            >\n                {options.map((option, index) => (\n                  <MenuWrapper key={option.prompt} hoveredRow={hoveredRow} selectedIndex= {selectedIndex} conditions= {conditions} setHoveredRowCallback={setHoveredRowCallback} handleMenuItemClickCallback = {handleMenuItemClick} option={option} index={index}></MenuWrapper>  \n                ))}\n            </Menu>\n        </div>\n    );\n}\n\n    // <>\n\n       // const classes = useStyles();\n\n    // function MetricAxis({ data, axisLength }) {\n    //     let padding = 20\n    //     let width  = axisLength + 2*padding\n    //     let height = 50\n    //     return typeof(data.range[0]) == 'string' ? null : <svg height={height} width={width}>\n    //         <line\n    //             x1={padding}\n    //             y1={height/2}\n    //             x2={axisLength+padding}\n    //             y2={height/2}\n    //             style={{ stroke: \"white\", strokeWidth: 1 }}></line>\n    //             <text\n    //             style={{\n    //               fontSize: \"1em\",\n    //               textAnchor: \"middle\",\n    //               fill:\"white\" ,\n    //                 fontWeight:'400'               }}\n               \n    //             x={padding+axisLength/2}\n    //             y={height/2-5}>\n    //             {\" \"}\n    //             {data.metric.toUpperCase()}{\" \"}\n    //           </text>\n\n\n    //             <text\n    //             style={{\n    //               fontSize: \"1em\",\n    //               textAnchor: \"end\",\n    //               fill:\"white\" ,\n    //               alignmentBaseline:'middle'                 }}\n                 \n    //             x={padding - 3}\n    //             y={height/2}>\n    //             {\" \"}\n    //             {data.range[0]}{\" \"}\n    //           </text>\n    //           <text\n    //             style={{\n    //               fontSize: \"1em\",\n    //               textAnchor: \"start\",\n    //               fill:\"white\" ,\n    //             alignmentBaseline:'middle'               }}\n               \n    //             x={axisLength+padding}\n    //             y={height/2}>\n    //             {\" \"}\n    //             {data.range[1]}{\" \"}\n    //           </text>\n    //           <g style={{transform:\"translate(\" + (padding + axisLength/2) + 'px,' + (height/2 + 5) + 'px)'}}>   \n    //           <SortIcon  width={'16px'} height={'16px'} className={classes.sort}></SortIcon>\n\n    //           </g>\n              \n\n\n    //     </svg>\n    // }\n\n    //     <React.Fragment key={'Menu'}>\n\n    //         <Grid container className={classes.root} spacing={2}>\n    //             <Grid item xs={12}>\n    //                 <Grid container justify=\"flex-start\" spacing={2}>\n\n    //                     {/* <Grid key={\"condition\"} item>\n    //                         <Box height={rowHeight} width={572} mt={\"5px\"} mb={\"6px\"} mr={'10px'} boxShadow={0} style={{ fontWeight:'bolder' }}>\n    //                             <Typography className={classes.condition} variant=\"overline\">\n    //                             <SortIcon/> Condition\n    //                         </Typography>                            </Box>\n\n    //                     </Grid> */}\n\n    //                     <Grid key={\"tasks\"} item>\n    //                         <Box height={rowHeight} width={572} pt={\"5px\"} pb={\"6px\"} pr={'10px'} boxShadow={0} style={{ display:'inline-flex', fontWeight:'bolder'  }}>\n    //                             <Typography\n    //                                 className={classes.condition}\n    //                                 variant=\"overline\">\n    //                                 Task Name\n    //                              </Typography>\n    //                              <SortIcon className={classes.sort}></SortIcon>\n                                 \n    //                         </Box>\n    //                         </Grid>\n\n\n    //                     <Grid key={\"actions\"} item>\n    //                         <Box height={rowHeight} width={375} pt={\"5px\"} pb={\"6px\"} pr={'10px'} boxShadow={0} style={{ display:'inline-flex', fontWeight:'bolder'  }}>\n    //                             <Typography\n    //                                 className={classes.condition}\n    //                                 variant=\"overline\">\n    //                                 Interaction Sequence Length\n    //                              </Typography>\n    //                              <SortIcon className={classes.sort}></SortIcon>\n\n                                 \n    //                         </Box>\n\n    //                         <Box height={rowHeight} width={250} mt={\"5px\"} mb={\"6px\"} mr={'10px'} boxShadow={0} style={{display:'inline-flex',  fontWeight:'bolder'  }}>\n    //                             <Typography\n    //                                 className={classes.condition}\n    //                                 variant=\"overline\">\n    //                                  Participant Count\n    //                              </Typography>\n    //                              <SortIcon className={classes.sort}></SortIcon>\n\n                                 \n    //                         </Box>\n\n    //                     </Grid>\n    //                     <Grid key={\"metrics\"} style={{display:'inline-flex'}} item>\n\n    //                     {!metrics ? <></> : Object.keys(metrics).map(metric=>{\n    //                         let range = metrics[metric];\n    //                         let labelLength = metric.length * 10;\n    //                     return  <Box height={rowHeight} mt={\"5px\"} mb={\"6px\"} mr={'15px'} boxShadow={0} style={{display:'inline-flex',   fontWeight:'bolder'  }}>\n    //                         {/* <Typography\n    //                             className={classes.condition}\n    //                             variant=\"overline\">\n    //                              {metric}\n    //                             </Typography> */}\n    //                             <MetricAxis data={{metric,range}} axisLength={labelLength}></MetricAxis>\n\n    //                     </Box>\n    //                     })\n    //                 }\n\n    //                     {/* <Box height={rowHeight} mt={\"5px\"} mb={\"6px\"} mr={'15px'} boxShadow={0} style={{display:'inline-flex',   fontWeight:'bolder'  }}>\n    //                         <Typography\n    //                             className={classes.condition}\n    //                             variant=\"overline\">\n    //                              Choose Metrics\n    //                             </Typography>\n    //                     </Box> */}\n\n\n    //                     </Grid>\n\n    //                 </Grid>\n    //             </Grid>\n    //         </Grid>\n    //     </React.Fragment>\n\n    // </>\n\n\n\n","import React from \"react\";\nimport {\n  createStyles,\n  makeStyles,\n  useTheme,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\n\nimport Box from \"@material-ui/core/Box\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nimport styles from \"./SidePane.module.css\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport CloudUpload from \"@material-ui/icons/CloudUpload\";\nimport TableChart from \"@material-ui/icons/TableChart\";\nimport GetApp from \"@material-ui/icons/GetApp\";\nimport BarChart from \"@material-ui/icons/BarChart\";\nimport { Link, LinkProps, useLocation } from \"react-router-dom\";\nimport ProvenanceDataContext from \"./components/ProvenanceDataContext\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport ComputerIcon from \"@material-ui/icons/Computer\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport { ActionLegend } from \"./components/ActionLegend\";\nimport SortMenu from \"./components/sortMenu\";\n\nconst drawerWidth = 260;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n    },\n    typography: {\n      // In Chinese and Japanese the characters are usually larger,\n      // so a smaller fontsize may be appropriate.\n      fontSize: 18,\n    },\n    appBar: {\n      \"background-color\": \"#ababab\",\n      zIndex: theme.zIndex.drawer + 1,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      marginLeft: drawerWidth,\n      width: `calc(100% - ${drawerWidth}px)`,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: 36,\n    },\n    hide: {\n      display: \"none\",\n    },\n\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n    },\n    drawerOpen: {\n      width: drawerWidth,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    drawerClose: {\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      overflowX: \"hidden\",\n      width: theme.spacing(7) + 1,\n      [theme.breakpoints.up(\"sm\")]: {\n        width: theme.spacing(9) + 1,\n      },\n    },\n    toolbar: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n  })\n);\n\nconst SidePane = ({}) => {\n  const {\n    taskList,\n    loadingTaskList,\n    handleChangeSelectedTaskId,\n    selectedTaskId,\n  } = React.useContext(ProvenanceDataContext);\n\n  let selectedPrompt =\n    taskList && selectedTaskId\n      ? taskList.find((p) => p.taskID == selectedTaskId).prompt\n      : \"\";\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const HomeLink = React.forwardRef<\n    HTMLAnchorElement,\n    Omit<LinkProps, \"innerRef\" | \"to\">\n  >((props, ref) => <Link innerRef={ref as any} to=\"/Home\" {...props} />);\n  const StudyLink = React.forwardRef<\n    HTMLAnchorElement,\n    Omit<LinkProps, \"innerRef\" | \"to\">\n  >((props, ref) => <Link innerRef={ref as any} to=\"/Study\" {...props} />);\n  const Upload = React.forwardRef<\n    HTMLAnchorElement,\n    Omit<LinkProps, \"innerRef\" | \"to\">\n  >((props, ref) => <Link innerRef={ref as any} to=\"/Upload\" {...props} />);\n  const Overview = React.forwardRef<\n    HTMLAnchorElement,\n    Omit<LinkProps, \"innerRef\" | \"to\">\n  >((props, ref) => <Link innerRef={ref as any} to=\"/Overview\" {...props} />);\n  const Table = React.forwardRef<\n    HTMLAnchorElement,\n    Omit<LinkProps, \"innerRef\" | \"to\">\n  >((props, ref) => <Link innerRef={ref as any} to=\"/Table\" {...props} />);\n  const Export = React.forwardRef<\n    HTMLAnchorElement,\n    Omit<LinkProps, \"innerRef\" | \"to\">\n  >((props, ref) => <Link innerRef={ref as any} to=\"/Export\" {...props} />);\n  // console.log(\n  //   \"task list\",\n  //   loadingTaskList,\n  //   taskList,\n  //   \"value\",\n  //   !loadingTaskList && taskList,\n  //   \"end\"\n  // );\n  //let taskInfo = taskList.find((t) => t.id == selectedTaskIds[0]);\n\n  let location = useLocation();\n  function appBarWidget() {\n    if (location.pathname.includes(\"Home\")) {\n      return <SortMenu></SortMenu>;\n    } else {\n      return (\n        <>\n          <FormControl className={styles.SelectedTaskInput}>\n            <Select\n              labelId=\"demo-simple-select-label\"\n              id=\"demo-simple-select\"\n              value={selectedTaskId}\n              onChange={handleChangeSelectedTaskId}\n              label=\"name\">\n              {!loadingTaskList &&\n                taskList &&\n                taskList.map((value) => {\n                  return (\n                    <MenuItem key={value.taskID} value={value.taskID}>\n                      {value.taskID}\n                    </MenuItem>\n                  );\n                })}\n              {loadingTaskList && (\n                <Skeleton\n                  variant=\"rect\"\n                  width={\"200\"}\n                  height={50}\n                  style={{ margin: \"20px\", padding: \"20px\" }}>\n                  Loading task selector\n                </Skeleton>\n              )}\n            </Select>\n          </FormControl>\n          <Box ml={3}>\n            <Typography variant=\"button\" noWrap>\n              {selectedPrompt}\n            </Typography>\n          </Box>\n        </>\n      );\n    }\n  }\n\n  function makeIcon(item) {\n    let isCurrent = location.pathname.includes(item.id);\n    const Icon = item.icon;\n    return isCurrent ? (\n      <Icon style={{ color: \"rgb(93, 131, 210)\" }}> </Icon>\n    ) : (\n      <Icon></Icon>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}>\n            <MenuIcon />\n          </IconButton>\n\n          {appBarWidget()}\n          {/* {taskInfo.prompt} */}\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}>\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === \"rtl\" ? (\n              <ChevronRightIcon />\n            ) : (\n              <ChevronLeftIcon />\n            )}\n          </IconButton>\n        </div>\n        <Divider />\n        <List>\n          {[\n            {\n              text: \"Task Overview\",\n              id: \"Home\",\n              link: HomeLink,\n              icon: HomeIcon,\n            },\n            {\n              text: \"Participant Timeline\",\n              id: \"Study\",\n              link: StudyLink,\n              icon: ComputerIcon,\n            },\n            // { text: \"Upload\", id: \"Upload\", link: Upload, icon: CloudUpload },\n            // {\n            //   text: \"Provenance Prep \",\n            //   id: \"Overview\",\n            //   link: Overview,\n            //   icon: BarChart,\n            // },\n            {\n              text: \"Task Analysis\",\n              link: Table,\n              id: \"Table\",\n              icon: TableChart,\n            },\n            // { text: \"Export\", link: Export, icon: GetApp },\n          ].map((item, index) => {\n            return (\n              //added key={index} to get rid of unique key error\n              <React.Fragment key={index}>\n                <ListItem button component={item.link}>\n                  <ListItemIcon>{makeIcon(item)}</ListItemIcon>\n                  <ListItemText primary={item.text} />\n                </ListItem>\n              </React.Fragment>\n            );\n          })}\n        </List>\n\n        <Divider />\n        <ActionLegend collapsed={!open}></ActionLegend>\n      </Drawer>\n    </div>\n  );\n};\n\nexport default SidePane;\n","import React from \"react\";\nimport { MemoryRouter, Link as RouterLink } from \"react-router-dom\";\nimport styles from \"./App.module.css\";\nimport Main from \"./Main\";\nimport SidePane from \"./SidePane\";\nimport \"antd/dist/antd.css\";\n\nimport { ProvenanceDataContextProvider } from \"./components/ProvenanceDataContext\";\n//import { fetchProvenance } from \"./firebase/fetchData\";\n//fetchProvenance();\nfunction App() {\n  return (\n    <div className=\"App\">\n      {\n        <ProvenanceDataContextProvider>\n          <MemoryRouter initialEntries={[\"/Home\"]} initialIndex={0}>\n            <div className={styles.container}>\n              <div className={styles.sidePane}>\n                <SidePane></SidePane>\n              </div>\n              <div className={styles.main}>\n                <Main></Main>\n              </div>\n            </div>\n          </MemoryRouter>\n        </ProvenanceDataContextProvider>\n      }\n    </div>\n  );\n}\n/*\nused to determine why components updated\nif (process.env.NODE_ENV !== \"production\") {\n  const { whyDidYouUpdate } = require(\"why-did-you-update\");\n  whyDidYouUpdate(React);\n}*/\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchContainer\":\"EventSearch_searchContainer__3w0LZ\",\"searchBar\":\"EventSearch_searchBar__3PGaY\",\"searchOptions\":\"EventSearch_searchOptions__3hOQJ\",\"outerSearchBar\":\"EventSearch_outerSearchBar__3wMHs\",\"outerSearchOptions\":\"EventSearch_outerSearchOptions__2tSHp\",\"outerSearchDiscard\":\"EventSearch_outerSearchDiscard__2_Aj4\"};"],"sourceRoot":""}